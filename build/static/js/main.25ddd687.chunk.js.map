{"version":3,"sources":["libs/UnrealRTC/webRtcPlayer.js","libs/UnrealRTC/adapter.js","assets/images/PassageLogo.svg","assets/images/facebook_icon.svg","configs/http.js","services/account.js","redux/accountSlice.js","views/Log In/LogIn.js","views/Registration/Registration.js","agora.config.js","libs/UnrealRTC/app.js","ue4appInstanse.js","services/commands.js","services/agora.js","redux/appSlice.js","components/layout/UE4Engine.js","components/utils/Homepage/text.png","assets/images/playButton.png","assets/images/initLoader.svg","components/utils/Homepage/Homepage.js","components/shared/CircleButton/CircleButton.js","assets/images/less.svg","assets/images/audio.svg","assets/images/mic_btn.svg","assets/images/help_btn.svg","assets/images/help_btn (Hover State).svg","components/shared/MenuButton/MenuButton.js","assets/images/menu.svg","assets/images/settings_btn.svg","assets/images/customization_btn.svg","assets/images/friends_btn.svg","components/shared/NavigationCircleButton/NavigationCircleButton.js","assets/images/message.svg","components/shared/VideoCircle/VideoCircle.js","assets/images/cam_btn.svg","assets/images/cam-disabled (Toggle State).svg","assets/images/audio-disabled.svg","assets/images/mic_btn (Toggle State).svg","components/utils/Page/MobilePage.js","components/shared/DesktopToogleButton/DesktopToogleButton.js","assets/images/audio_big.svg","assets/images/mic_big.svg","assets/images/camera_big.svg","assets/images/camera_big (Toggle State).svg","assets/images/audio_big (Toggle State).svg","assets/images/mic_big (Toggle State).svg","assets/images/settings_btn_big.svg","assets/images/friends_btn (1)_big.svg","assets/images/messages_btn_big.svg","components/utils/Page/DesktopPage.js","assets/images/ufo.svg","assets/images/close_btn (Hover State).svg","redux/reportSlice.js","components/shared/FriendsPanel/Report/Chekboxes.js","components/shared/FriendsPanel/Report/Submit.js","components/shared/FriendsPanel/Report/ReportSubmitted.js","components/shared/FriendsPanel/Report/Report.js","assets/images/removeFriend.svg","assets/images/Group 316.svg","assets/images/FriendsWithoutBackround.svg","components/shared/FriendsPanel/Report/mobile/MobileReport.js","assets/images/report.svg","components/shared/FriendsPanel/FriendsTable.js","assets/images/facebook.svg","assets/images/Group -9.svg","redux/searchSlice.js","components/shared/FriendsPanel/FriendNavigationPanel.js","components/shared/FriendsPanel/DesktopFriendsPanel.js","assets/images/settings.svg","components/shared/SettingPanel/SettingHeaderPanel.js","assets/images/empyAvatar.png","components/shared/SettingPanel/Tabs/componentsForTabs/Avatar.js","components/shared/SettingPanel/Tabs/componentsForTabs/Cancel.js","components/shared/SettingPanel/Tabs/componentsForTabs/ButtonText.js","components/shared/SettingPanel/Tabs/AccountTab.js","components/shared/SettingPanel/Tabs/AudioTab.js","components/shared/SettingPanel/Tabs/componentsForTabs/VideoPreview.js","components/shared/SettingPanel/Tabs/VideoTab.js","components/shared/SettingPanel/Tabs/BillingTab.js","components/shared/SettingPanel/Tabs/ConnectionTab.js","components/shared/SettingPanel/Tabs/PrivacyTab.js","components/shared/SettingPanel/DesktopSettingPanel.js","redux/customizationSlice.js","views/Customization/Desktop/Color/DesktopColorChange.js","views/Customization/Desktop/Color/DesktopColorRectangle.js","views/Customization/Desktop/Color/DesktopFooterColors.js","assets/images/close_btn_customization.svg","assets/images/face_big.svg","assets/images/backpack_btn.svg","assets/images/left_hand_big.svg","assets/images/right_hand_big.svg","assets/images/companion_big.svg","assets/images/color_btn_big.svg","assets/images/slider_arrow_left.svg","assets/images/slider_arrow_right.svg","views/Customization/Desktop/Slider/DesktopCustomizationSlider.js","views/Customization/Desktop/DesktopCustomizationButton.js","views/Customization/Desktop/Name/DesktopName.js","views/Customization/Desktop/DesktopCustomization.js","components/shared/MessagesTable/MessagesTable.js","assets/images/MassagesWithoutBackground.svg","views/DesktopMessages/DesktopHeaderMassages.js","views/DesktopMessages/DesktopMessages.js","assets/images/arrow_left.svg","components/shared/Chat/HeaderOfChat.js","components/shared/Chat/ChatMessages.js","assets/images/send_btn.svg","components/shared/Chat/DesktopChat.js","assets/images/spin-transparent.svg","components/layout/DesktopPageLayout.js","components/shared/FriendsPanel/MobileFriendsPanel.js","views/MobileMessages/MobileHeaderMessages.js","views/MobileMessages/MobileMassages.js","assets/images/close_btn.svg","views/Customization/Mobile/Color/MobileColorChange.js","views/Customization/Mobile/Color/MobileColorRectangle.js","views/Customization/Mobile/Color/MobileFooterColors.js","assets/images/face.svg","assets/images/face_btn-selected.svg","assets/images/backpack_btn-selected.svg","assets/images/lefthand_btn.svg","assets/images/lefthand_btn (Selected State).svg","assets/images/righthand_btn.svg","assets/images/righthand_btn (Selected).svg","assets/images/companion_btn-selected.svg","assets/images/companion_btn.svg","assets/images/colorpicker_btn.svg","assets/images/colorpicker_btn-selected.svg","views/Customization/Mobile/Slider/MobileCustomizationSlider.js","views/Customization/Mobile/MobileCustomizationButton.js","views/Customization/Mobile/Name/MobileName.js","views/Customization/Mobile/MobileCustomization.js","components/shared/Chat/Mobile/MobileHeaderOfChat.js","components/shared/Chat/MobileChat.js","components/shared/SettingPanel/Tabs/MobileTabs/MobileAccountTab.js","components/shared/SettingPanel/MobileSettingPanel.js","components/layout/MobilePageLayout.js","components/layout/AppUIContainer.js","components/utils/GuardedRoute/index.js","services/devices.js","components/layout/UIContainer.js","views/InitialSetup/InitialSetup.js","hooks/useDevices.js","views/ResetPassword/ResetPassword.js","App.js","hooks/useWhoami.js","hooks/useAgora.js","hooks/useNeonItems.js","store.js","index.js"],"names":["define","adapter","webRtcPlayer","parOptions","self","this","cfg","peerConnectionOptions","sdpSemantics","pcClient","dcClient","tnClient","sdpConstraints","offerToReceiveAudio","offerToReceiveVideo","dataChannelOptions","ordered","createWebRtcVideo","video","document","createElement","id","playsInline","addEventListener","e","onVideoInitialised","offerExtmapAllowMixed","onsignalingstatechange","state","console","info","oniceconnectionstatechange","onicegatheringstatechange","handleOnTrack","log","streams","srcObject","setupDataChannel","pc","label","options","datachannel","createDataChannel","binaryType","onopen","onDataChannelConnected","onclose","onmessage","data","onDataChannelMessage","warn","onicecandidate","candidate","onWebRtcCandidate","handleCreateOffer","createOffer","then","offer","setLocalDescription","onWebRtcOffer","sdp","replace","setupPeerConnection","SetBitrate","ontrack","generateAggregatedStatsFunction","aggregatedStats","stats","newStat","forEach","stat","type","isRemote","mediaType","toLowerCase","includes","timestamp","bytesReceived","framesDecoded","packetsLost","bytesReceivedStart","framesDecodedStart","timestampStart","bitrate","Math","floor","lowBitrate","highBitrate","avgBitrate","framerate","lowFramerate","highFramerate","avgframerate","trackIdentifier","kind","framesDropped","framesReceived","framesDroppedPercentage","frameHeight","frameWidth","frameHeightStart","frameWidthStart","hasOwnProperty","currentRoundTripTime","onAggregatedStats","handleCandidateFromServer","iceCandidate","RTCIceCandidate","addIceCandidate","_","close","RTCPeerConnection","receiveAnswer","answer","answerDesc","RTCSessionDescription","setRemoteDescription","aggregateStatsIntervalId","clearInterval","send","readyState","getStats","onStats","aggregateStats","checkInterval","calcAggregatedStats","printAggregatedStats","setInterval","module","exports","r","n","t","o","i","f","u","a","Error","code","p","call","length","1","require","adapterFactory","window","undefined","2","Object","defineProperty","value","utils","_interopRequireWildcard","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","obj","__esModule","newObj","key","prototype","default","arguments","shimChrome","shimFirefox","shimEdge","shimSafari","logging","browserDetails","detectBrowser","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","version","browserShim","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeAllowExtmapMixed","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimGetParameters","shimCreateOffer","shimCreateAnswer","shimGetDisplayMedia","shimReplaceTrack","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimAudioContext","3","_typeof","Symbol","iterator","constructor","_getusermedia","enumerable","get","_getdisplaymedia","shimAddTrackRemoveTrackWithNative","_defineProperty","configurable","writable","MediaStream","webkitMediaStream","_ontrack","set","removeEventListener","origSetRemoteDescription","_this","_ontrackpoly","stream","te","receiver","getReceivers","find","track","event","Event","transceiver","dispatchEvent","getTracks","apply","wrapPeerConnectionEvent","shimSenderWithDtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","slice","origAddTrack","addTrack","sender","push","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","_this2","origRemoveStream","removeStream","_this3","s","RTCRtpSender","origGetSenders","_this4","senders","origGetStats","_this5","_arguments","Array","selector","onSucc","onErr","fixChromeStats_","response","standardReport","result","report","standardStats","localcandidate","remotecandidate","names","name","makeMapStats","Map","keys","map","successCallbackWrapper_","Promise","resolve","reject","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","err","DOMException","getLocalStreams","_this8","_shimmedLocalStreams","streamId","_this9","existingSenders","newSenders","filter","newSender","concat","_this10","origGetLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","newStream","_this13","signalingState","oldStream","method","nativeMethod","methodObj","_this14","args","description","desc","replaceInternalStreamId","origSetLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","_this15","streamid","internalId","externalStream","internalStream","RegExp","webkitRTCPeerConnection","addIceCandidateNullSupported","nativeAddIceCandidate","target","getConfiguration","4","getSourceId","navigator","mediaDevices","getDisplayMedia","constraints","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia","error","5","constraintsToChrome_","c","optional","cc","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","shimConstraints_","func","JSON","parse","stringify","audio","remap","b","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","d","some","match","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","getUserMedia_","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","6","_sdp2","_interopRequireDefault","NativeRTCIceCandidate","substr","nativeCandidate","parsedCandidate","parseCandidate","augmentedCandidate","assign","toJSON","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","sections","splitSections","shift","mediaSection","mLine","parseMLine","protocol","getRemoteFirefoxVersion","parseInt","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","matchPrefix","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","sctp","origCreateDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","size","byteLength","TypeError","proto","completed","checking","iceConnectionState","_onconnectionstatechange","cb","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","nativeSRD","split","line","trim","join","7","_filtericeservers","_rtcpeerconnectionShim2","RTCIceGatherer","origMSTEnabled","ev","enabled","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","config","iceServers","filterIceServers","replaceTrack","setTrack","8","edgeVersion","hasTurn","server","urls","url","deprecated","isString","validTurn","startsWith","9","10","catch","11","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","origGetParameters","origCreateOffer","_arguments2","all","finally","origCreateAnswer","createAnswer","_arguments3","12","preferredMediaSource","mediaSource","13","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","14","shimConstraints","_localStreams","_addTrack","_len","_key","index","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","promise","withCallback","_getUserMedia","errcb","compactObject","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","offerOptions","audioTransceiver","getTransceivers","direction","setDirection","videoTransceiver","AudioContext","webkitAudioContext","15","walkStats","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","bool","oldMethod","newMethod","mozGetUserMedia","userAgent","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","reduce","accumulator","isObj","isEmptyObject","base","resultSet","endsWith","outbound","streamStatsType","filteredResult","trackStats","trackStat","trackId","16","SDPUtils","fixStatsType","writeMediaSection","caps","dtlsRole","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","_initialTrackId","msid","sendEncodingParameters","ssrc","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","ip","port","priority","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","_eventTarget","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onaddstream","onremovestream","onconnectionstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","_createIceGatherer","bufferedCandidateEvents","bufferCandidates","end","_gather","onlocalcandidate","evt","cand","component","ufrag","serializedCandidate","writeCandidate","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","rtcp","cname","compound","rtcpParameters","receive","sessionpart","parseRtpParameters","isIceLite","isRejected","rejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","receiverList","iceOptions","lines","splitLines","getKind","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","codec","isNewTrack","nativeTrack","sid","item","newState","states","closed","connected","disconnected","failed","new","connecting","numAudioTracks","numVideoTracks","writeSessionBoilerplate","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","mediaSectionsInOffer","localTrack","reducedSize","candidateString","senderOrReceiver","promises","allStats","results","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","17","random","blob","part","parts","substring","address","relatedAddress","relatedPort","tcpType","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","password","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","writeSctpDescription","media","output","sessId","sessVer","sessUser","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","httpConfig","host","api","user","deleteFriend","friendId","getAgoraTokenUrl","channelName","getNeonListItems","skip","take","facebookAuth","token","axios","post","http","accessToken","login","email","register","userName","accessCode","firstName","ticket","getAgoraToken","headers","Authorization","whoami","getFriendsList","friendsList","patch","requestFriendship","userId","rejectionfriendship","rejectionFriendship","addFriend","userid","searchUser","limit","updateUser","getGiveMeServer","searchUserName","searchFacebook","myVideo","myAudio","updatePrivacy","acused","cause","addReport","counterSlice","createSlice","initialState","neonName","agoraToken","agoraChannelId","agoraId","isSuperUser","settingsTabDefault","reducers","setId","payload","setToken","setAgoraToken","setNeonName","setLogin","setAgoraChannelId","setIsSuperUser","setFriendsList","actions","clean","setSearchUserName","setSearchFacebook","setMyVideo","setMyAudio","setSettingsTabDefault","setAgoraId","LogIn","Grid","useBreakpoint","useState","setPassword","dispatch","useSelector","account","useDispatch","history","useHistory","justify","span","style","textAlign","marginBottom","zIndex","src","logo","className","xs","sm","md","lg","xl","backgroundColor","borderRadius","pointerEvents","paddingTop","minWidth","fontFamily","color","fontWeight","marginTop","onChange","currentTarget","placeholder","textDecoration","to","onClick","accountHttpService","debug","status","setReduxLogin","notification","fontSize","boxShadow","Registration","publicUserName","setPublicUserName","setConfirmPassword","setAccessCode","align","open","goBack","wsUrl","ws","qualityControlOwnershipCheckBox","unquantizeAndDenormalizeUnsigned","webRtcPlayerObj","responseEventListeners","Date","getTime","freezeFrameOverlay","shouldShowPlayOverlay","freezeFrame","receiving","jpeg","valid","afk","warnTimeout","closeTimeout","active","overlay","warnTimer","countdown","countdownTimer","editTextButton","hiddenInput","now","sendQualityConsoleCommands","descriptor","PrioritiseQuality","emitUIInteraction","Console","LowBitrate","HighBitrate","MinFPS","setOverlay","htmlClass","htmlElement","onClickFunction","videoPlayOverlay","getElementById","playerDiv","appendChild","lastChild","removeChild","onOverlayClick","cl","classList","remove","add","updateAfkOverlayText","innerHTML","showAfkOverlay","hideOverlay","startAfkWarningTimer","inputOptions","controlScheme","ControlSchemeType","LockedMouse","exitPointerLock","resetAfkWarningTimer","clearTimeout","createWebRtcOffer","text","textOverlay","showTextOverlay","sendInputData","styleWidth","styleHeight","styleTop","styleLeft","ToClientMessageType","setupWebRtcPlayer","showFreezeFrame","base64","btoa","byte","String","fromCharCode","onload","naturalHeight","naturalWidth","resizeFreezeFrameOverlay","resizePlayerStyle","showFreezeFrameOverlay","offerStr","ue4appInstance","getInstance","dataChannelInitedUE4Callback","view","Uint8Array","fileReader","FileReader","arrayBuffer","readAsArrayBuffer","TextDecoder","decode","values","listener","commandAsString","command","showOnScreenKeyboard","x","y","top","left","blur","DataView","buffer","getInt32","invalidateFreezeFrameOverlay","playerElement","onmouseenter","Data","ArrayBuffer","setUint8","MessageType","pressMouseButtons","onmouseleave","releaseMouseButtons","registerMouseEnterAndLeaveEvents","fingers","fingerIds","rememberTouch","touch","finger","pop","identifier","forgetTouch","emitTouchData","touches","clientX","offsetLeft","clientY","offsetTop","coord","normalizeAndQuantizeUnsigned","setUint16","force","fakeMouseWithTouches","ontouchstart","firstTouch","changedTouches","playerElementClientRect","emitMouseDown","MouseButton","preventDefault","ontouchend","emitMouseUp","ontouchmove","emitMouseMove","registerTouchEvents","registerInputs","documentElement","maxLength","focus","createOnScreenKeyboardHelpers","styleAdditional","_orientationChangeTimeout","styleCursor","HoveringMouse","suppressBrowserKeys","display","displayWidth","displayHeight","displayTop","displayLeft","checkBox","checked","windowAspectRatio","innerWidth","innerHeight","videoAspectRatio","updateVideoStreamSize","contains","windowSmallerThanPlayer","videoWidth","videoHeight","videoElement","getElementsByTagName","playerAspectRatio","clientHeight","clientWidth","resizePlayerStyleToFillWindow","resizePlayerStyleToActualSize","resizePlayerStyleToArbitrarySize","getBoundingClientRect","ratio","normalizedX","normalizedY","inRange","normalizeAndQuantizeSigned","setupNormalizeAndQuantize","onOrientationChange","emitDescriptor","messageType","descriptorAsString","byteIdx","charCodeAt","requestQualityControl","deltaX","deltaY","delta","setInt16","button","emitMouseWheel","MouseButtonsMask","buttons","registerLockedMouseEvents","lockStateChange","pointerLockElement","mozPointerLockElement","updatePosition","movementX","movementY","requestPointerLock","mozRequestPointerLock","mozExitPointerLock","onclick","onmousedown","onmouseup","onmousewheel","wheelDelta","isKeyCodeBrowserKey","keyCode","SpecialKeyCodes","getKeyCode","connect","WebSocket","MozWebSocket","webRTCData","msg","onmousemove","offsetX","offsetY","oncontextmenu","detail","registerHoveringMouseEvents","onConfig","numberFormat","Intl","NumberFormat","language","maximumFractionDigits","timeFormat","minimumIntegerDigits","runTime","timeValues","timeDurations","timeIndex","runTimeSeconds","runTimeMinutes","runTimeHours","receivedBytesMeasurement","receivedBytes","dataMeasurements","format","reason","alert","load","localWsUrl","resizeCheckBox","onchange","prioritiseQualityCheckbox","qualityParamsSubmit","initialDescriptor","setupHtmlEvents","position","onkeydown","repeat","onkeypress","charCode","onkeyup","handleHomepageClick","play","isLoaded","addResponseEventListener","instance","createInstance","getUe4app","ue4app","emitUICommand","addUIHandler","initUE4Callback","reCreateInstance","commands","initializeCustomization","setAddon","setColor","setName","setCompanionName","teleport","inputMode","addonsSockets","head","back","leftHand","rightHand","companion","addonsColors","ring","primary","secondary","inputModes","simple","simpleTouch","pro","proTouch","createInitCustomizationCommand","agoraUserId","agoraAppId","avatarData","user_id","agora_user_id","is_super_user","agora_app_id","avatar_data","createSetAddonCommand","socket","addonId","addon","createSetColorCommand","createSetCompanionNameCommand","createSetNameCommand","createConnectToGameServerCommand","createTeleportCommand","createInputModeCommand","mode","client","channelMuteState","localMuteState","localTracks","videoTrack","audioTrack","updateStateAudioTrack","isMute","unpublish","publish","updateStateVideoTrack","channelId","agoraUid","isAudioEnableStr","isVideoEnableStr","success","AgoraRTC","createClient","on","uid","createMicrophoneAudioTrack","createCameraVideoTrack","agoraConfig","handleUserPublished","handleUserUnpublished","remoteUsers","subscribe","setVolume","distances","distanceUser","volume","distance","unsubscribe","leave","deleteClient","attenuateAudio","instanceUrl","videoDevices","audioDevices","selectedVideoDevice","selectedAudioDevice","isMicMuted","isAudioDisabled","isVideoDisabled","audioVolume","isSplashed","videoStream","setInstanceUrl","setVideoDevices","setAudioDevices","setSelectedVideoDevice","setSelectedAudioDevice","setIsMicMuted","setIsAudioDisabled","setIsVideoDisabled","setAudioVolume","setVideoStream","setIsSplashed","UE4Engine","userAgoraUid","init","onInited","useEffect","location","pathname","object","agoraService","channel_id","audio_enabled","video_enabled","ue4handler","initCommand","commandService","setNameCommand","setInputMode","isMobile","Homepage","startVideoStreaming","loading","alignItems","justifyContent","initLoader","paddingRight","margin","paddingLeft","playButtonImage","alt","marginLeft","opacity","CircleButton","props","screens","setIsDesktop","image","img","imageDisable","imgDisabled","flag","setFlag","MenuButton","NavigationCircleButton","buttonNav","float","friends","settings","VideoCircle","app","videoRef","useRef","current","offVideo","getVideo","mult","onloadedmetadata","circleWidth","circleHeight","isDesktop","upper","background","inside","ref","Header","Layout","Footer","Content","Sider","MobilePage","Mic","mic","Cam","cam","CamDis","camDis","Audio","MicDis","micDis","AudioDis","audioDis","isOpen","setOpen","micState","setMicState","sound","setSound","webCamState","padding","less","Menu","agora","elem","muted","DesktopToogleButton","isToogled","DesktopPage","marginRight","harassment","suspicious","abusive","llegal","solicting","isReportOpen","isReportSubmited","setIsHarassment","setIsSuspicious","setIsAbusive","setIsIllegal","illegal","setIsSolicting","setIsReportOpen","setIsReportSubmited","Checkboxes","checkboxText","causeReport","Submit","ReportSubmitted","advice","onExitReport","reportedUserName","href","Report","reportDescription","setReportDescription","TextArea","Input","isSubmit","setIsSubmit","reportStatus","isEmptyReport","setIsEmptyReport","clearReportCheckboxes","checkIsReportEmpty","border","outline","descriptionChange","rows","cursor","concatCauses","whoReported","res","MobileReport","overflowY","FriendsTable","locale","search","isSearch","searchItem","searchMatches","setSearchMatches","loaderState","setLoaderState","reportRedux","setWhoReported","setReportedUserName","list","setLoader","columnsFriends","title","dataIndex","render","record","_id","teleportUE4To","changeReport","removeFriend","columsSearch","addFriendImg","pagination","rowClassName","dataSource","columns","emptyText","FriendsWithoutBackground","transform","alignContent","setIsSearch","setSearchItem","FriendNavigationPanel","onExitFriendsClick","isFindOpen","setIsFindOpen","searchValue","setSearchValue","swapFind","delaySearchFunction","searchByParams","paddingBottom","inputChange","letterSpacing","findBtn","DesktopFriendsPanel","setLoading","isLoading","SettingHeaderPanel","onExitSettings","borderBottom","Settings","Avatar","avatar","empyAvatar","Cancel","cancel","Change","change","AccountTab","changedAvatar","setChangedAvatar","changedEmail","setChangedEmail","changedUserName","setChangedUserName","changedOldPassword","setChangedOldPassword","changedNewPassword","setChangedNewPassword","changedConfirmPassword","setChangedConfirmPassword","currChanges","AudioTab","audioState","setaudioState","localAudioDevices","Option","Select","setLocalSelectedAudioDevice","dropdown","select","suffixIcon","dropdownStyle","VideoPreview","videoPreview","VideoTab","localVideoDevices","localSelectedVideoDevice","setLocalSelectedVideoDevice","BillingTab","ConnectionTab","fontStretch","PrivacyTab","usernamePrivacy","setUsernamePrivacy","facebookPrivacy","setFacebookPrivacy","videoPrivacy","setVideoPrivacy","audioPrivacy","setAudioPrivacy","onChangePrivacy","TabPane","Tabs","DesktopSettingsPanel","tabDefault","overflowX","tabPosition","defaultActiveKey","tab","ringColor","primaryColor","secondaryColor","items","setCustomizationItems","setRingColor","setPrimaryColor","setSecondaryColor","DesktopColorChange","customization","defaultRingColor","setDefaultRingColor","defaultPrimaryColor","setDefaultPrimaryColor","defaultSecondaryColor","setDefaultSecondaryColor","gen","pickerColor","setColorInFooter","setReduxRingColor","setReduxPrimaryColor","setReduxSecondaryColor","setColorCommand","commandsService","textTransform","DesktopColorRectangle","DesktopFooterColors","isPrimary","setPrimary","isSecondary","setSecondary","isRing","setRing","cancelColorChange","hide","DesktopCustomizationSlider","setSliderItemWidth","xxl","sliderItemWidth","currIndex","setCurrIndex","pressAddonItem","setAddonCommand","maxRendered","postion","sliderArrowLeft","imagePath","sliderArrowRight","DesktopCustomizationButton","circle","isColor","afterInjection","svg","DesktopName","inputHeight","setInputHeight","tapTextHeight","setTapTextHeight","inputName","tapText","inputCompanion","inputNameState","setInputNameState","inputCompanionState","setInputCompanionState","inputStyle","disabled","setUserName","DesktopCustomization","onCustomization","onExitCustomizationClick","colorToRectangles","setColorToRectangles","sliderType","setSliderType","colorsSelect","setColorsSelect","colorPickerState","setColorPickerState","nameChange","setNameChange","colorPickerType","setColorPickerType","exitCustomization","colorPicker","lineHeight","right","someColor","getColorChange","MessagesTable","fromMessages","nick","textOverflow","whiteSpace","overflow","onRow","DesktopheaderMessages","onExitMassagesClick","MassagesWithoutBackground","CloseButton","DesktopMessages","onMassagesClick","bottom","HeaderOfChat","backToMessages","arrowLeft","userNickName","onExitChat","ChatMessages","testMessages","m","usernameFrom","MessageFromME","usernameMe","classNameMessage","renderMessage","DesktopChat","useLocation","setText","ChangeText","DesktopPageLayout","onFriendsClick","onCustomizationClick","path","MobileFriendsPanel","isHide","setIsHide","MobileUsersForMessages","MobileMassages","MobileColorChange","MobileFooterColors","MobileCustomizationSlider","MobileCustomizationButton","MobileName","MobileCustomization","verticalAlign","setVerticalAlign","faceSelected","backpack","backpackSelected","leftHandSelected","rightHandSelected","companionSelected","colorPickerSelected","MobileHeaderOfChat","MobileChat","setTestMessages","MobileAccountTab","input","MobileSettingsPanel","MobilePageLayout","AppUIContainer","useRouteMatch","loader","GuardedRoute","Component","auth","redirect","rest","getDevicePermission","getAllDevices","audioInputDevices","audioOutputDevices","device","UIContainer","dataChannelInited","InitialSetup","selectedVideoSetting","selectedAudioSetting","useDevices","localSelectedAudioDevice","ResetPassword","inputValue","setInputValue","App","handleResize","vh","setProperty","accountService","isSuper","useWhoami","useAgora","getNeonItems","reducedItems","slot","useNeonItems","setDataChannelInited","localGetIntance","getGiveMyServer","instanceAddress","persistConfig","storage","stateReconciler","autoMergeLevel2","blacklist","rootReducer","combineReducers","appSlice","accountSlice","customizationSlice","searchSlice","reportSlice","persistedReducer","persistReducer","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","store","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.25ddd687.chunk.js","sourcesContent":["// Copyright Epic Games, Inc. All Rights Reserved.\r\n// universal module definition - read https://www.davidbcalhoun.com/2014/what-is-amd-commonjs-and-umd/\r\n/* eslint-disable */\r\n\r\n(function (root, factory) {\r\n  if (typeof define === \"function\" && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define([\"./adapter\"], factory);\r\n  } else if (typeof exports === \"object\") {\r\n    // Node. Does not work with strict CommonJS, but\r\n    // only CommonJS-like environments that support module.exports,\r\n    // like Node.\r\n    module.exports = factory(require(\"./adapter\"));\r\n  } else {\r\n    // Browser globals (root is window)\r\n    root.webRtcPlayer = factory(root.adapter);\r\n  }\r\n})(this, function (adapter) {\r\n  function webRtcPlayer(parOptions) {\r\n    parOptions = parOptions || {};\r\n\r\n    var self = this;\r\n\r\n    //**********************\r\n    //Config setup\r\n    //**********************;\r\n    this.cfg = parOptions.peerConnectionOptions || {};\r\n    this.cfg.sdpSemantics = \"unified-plan\";\r\n    this.pcClient = null;\r\n    this.dcClient = null;\r\n    this.tnClient = null;\r\n\r\n    this.sdpConstraints = {\r\n      offerToReceiveAudio: 1,\r\n      offerToReceiveVideo: 1,\r\n    };\r\n\r\n    // See https://www.w3.org/TR/webrtc/#dom-rtcdatachannelinit for values\r\n    this.dataChannelOptions = { ordered: true };\r\n\r\n    //**********************\r\n    //Functions\r\n    //**********************\r\n\r\n    //Create Video element and expose that as a parameter\r\n    createWebRtcVideo = function () {\r\n      var video = document.createElement(\"video\");\r\n\r\n      video.id = \"streamingVideo\";\r\n      video.playsInline = true;\r\n      video.addEventListener(\r\n        \"loadedmetadata\",\r\n        function (e) {\r\n          if (self.onVideoInitialised) {\r\n            self.onVideoInitialised();\r\n          }\r\n        },\r\n        true\r\n      );\r\n      return video;\r\n    };\r\n\r\n    this.video = createWebRtcVideo();\r\n\r\n    this.cfg.offerExtmapAllowMixed = false;\r\n\r\n    onsignalingstatechange = function (state) {\r\n      console.info(\"signaling state change:\", state);\r\n    };\r\n\r\n    oniceconnectionstatechange = function (state) {\r\n      console.info(\"ice connection state change:\", state);\r\n    };\r\n\r\n    onicegatheringstatechange = function (state) {\r\n      console.info(\"ice gathering state change:\", state);\r\n    };\r\n\r\n    handleOnTrack = function (e) {\r\n      console.log(\"handleOnTrack\", e.streams);\r\n      if (self.video.srcObject !== e.streams[0]) {\r\n        console.log(\"setting video stream from ontrack\");\r\n        self.video.srcObject = e.streams[0];\r\n      }\r\n    };\r\n\r\n    setupDataChannel = function (pc, label, options) {\r\n      try {\r\n        var datachannel = pc.createDataChannel(label, options);\r\n        datachannel.binaryType = \"arraybuffer\";\r\n\r\n        console.log(`Created datachannel (${label})`);\r\n\r\n        datachannel.onopen = function (e) {\r\n          console.log(`data channel (${label}) connect`);\r\n          if (self.onDataChannelConnected) {\r\n            self.onDataChannelConnected();\r\n          }\r\n        };\r\n\r\n        datachannel.onclose = function (e) {\r\n          console.log(`data channel (${label}) closed`);\r\n        };\r\n\r\n        datachannel.onmessage = function (e) {\r\n          console.log(`Got message (${label})`, e.data);\r\n          if (self.onDataChannelMessage) self.onDataChannelMessage(e.data);\r\n        };\r\n\r\n        return datachannel;\r\n      } catch (e) {\r\n        console.warn(\"No data channel\", e);\r\n        return null;\r\n      }\r\n    };\r\n\r\n    onicecandidate = function (e) {\r\n      console.log(\"ICE candidate\", e);\r\n      if (e.candidate && e.candidate.candidate) {\r\n        self.onWebRtcCandidate(e.candidate);\r\n      }\r\n    };\r\n\r\n    handleCreateOffer = function (pc) {\r\n      pc.createOffer(self.sdpConstraints).then(\r\n        function (offer) {\r\n          pc.setLocalDescription(offer);\r\n          if (self.onWebRtcOffer) {\r\n            // (andriy): increase start bitrate from 300 kbps to 20 mbps and max bitrate from 2.5 mbps to 100 mbps\r\n            // (100 mbps means we don't restrict encoder at all)\r\n            // after we `setLocalDescription` because other browsers are not c happy to see google-specific config\r\n            offer.sdp = offer.sdp.replace(\r\n              /(a=fmtp:\\d+ .*level-asymmetry-allowed=.*)\\r\\n/gm,\r\n              \"$1;x-google-start-bitrate=10000;x-google-max-bitrate=20000\\r\\n\"\r\n            );\r\n            self.onWebRtcOffer(offer);\r\n          }\r\n        },\r\n        function () {\r\n          console.warn(\"Couldn't create offer\");\r\n        }\r\n      );\r\n    };\r\n\r\n    setupPeerConnection = function (pc) {\r\n      if (pc.SetBitrate)\r\n        console.log(\"Hurray! there's RTCPeerConnection.SetBitrate function\");\r\n\r\n      //Setup peerConnection events\r\n      pc.onsignalingstatechange = onsignalingstatechange;\r\n      pc.oniceconnectionstatechange = oniceconnectionstatechange;\r\n      pc.onicegatheringstatechange = onicegatheringstatechange;\r\n\r\n      pc.ontrack = handleOnTrack;\r\n      pc.onicecandidate = onicecandidate;\r\n    };\r\n\r\n    generateAggregatedStatsFunction = function () {\r\n      if (!self.aggregatedStats) self.aggregatedStats = {};\r\n\r\n      return function (stats) {\r\n        //console.log('Printing Stats');\r\n\r\n        let newStat = {};\r\n        console.log(\r\n          \"----------------------------- Stats start -----------------------------\"\r\n        );\r\n        stats.forEach((stat) => {\r\n          //                    console.log(JSON.stringify(stat, undefined, 4));\r\n          if (\r\n            stat.type == \"inbound-rtp\" &&\r\n            !stat.isRemote &&\r\n            (stat.mediaType == \"video\" ||\r\n              stat.id.toLowerCase().includes(\"video\"))\r\n          ) {\r\n            newStat.timestamp = stat.timestamp;\r\n            newStat.bytesReceived = stat.bytesReceived;\r\n            newStat.framesDecoded = stat.framesDecoded;\r\n            newStat.packetsLost = stat.packetsLost;\r\n            newStat.bytesReceivedStart =\r\n              self.aggregatedStats && self.aggregatedStats.bytesReceivedStart\r\n                ? self.aggregatedStats.bytesReceivedStart\r\n                : stat.bytesReceived;\r\n            newStat.framesDecodedStart =\r\n              self.aggregatedStats && self.aggregatedStats.framesDecodedStart\r\n                ? self.aggregatedStats.framesDecodedStart\r\n                : stat.framesDecoded;\r\n            newStat.timestampStart =\r\n              self.aggregatedStats && self.aggregatedStats.timestampStart\r\n                ? self.aggregatedStats.timestampStart\r\n                : stat.timestamp;\r\n\r\n            if (self.aggregatedStats && self.aggregatedStats.timestamp) {\r\n              if (self.aggregatedStats.bytesReceived) {\r\n                // bitrate = bits received since last time / number of ms since last time\r\n                //This is automatically in kbits (where k=1000) since time is in ms and stat we want is in seconds (so a '* 1000' then a '/ 1000' would negate each other)\r\n                newStat.bitrate =\r\n                  (8 *\r\n                    (newStat.bytesReceived -\r\n                      self.aggregatedStats.bytesReceived)) /\r\n                  (newStat.timestamp - self.aggregatedStats.timestamp);\r\n                newStat.bitrate = Math.floor(newStat.bitrate);\r\n                newStat.lowBitrate =\r\n                  self.aggregatedStats.lowBitrate &&\r\n                  self.aggregatedStats.lowBitrate < newStat.bitrate\r\n                    ? self.aggregatedStats.lowBitrate\r\n                    : newStat.bitrate;\r\n                newStat.highBitrate =\r\n                  self.aggregatedStats.highBitrate &&\r\n                  self.aggregatedStats.highBitrate > newStat.bitrate\r\n                    ? self.aggregatedStats.highBitrate\r\n                    : newStat.bitrate;\r\n              }\r\n\r\n              if (self.aggregatedStats.bytesReceivedStart) {\r\n                newStat.avgBitrate =\r\n                  (8 *\r\n                    (newStat.bytesReceived -\r\n                      self.aggregatedStats.bytesReceivedStart)) /\r\n                  (newStat.timestamp - self.aggregatedStats.timestampStart);\r\n                newStat.avgBitrate = Math.floor(newStat.avgBitrate);\r\n              }\r\n\r\n              if (self.aggregatedStats.framesDecoded) {\r\n                // framerate = frames decoded since last time / number of seconds since last time\r\n                newStat.framerate =\r\n                  (newStat.framesDecoded - self.aggregatedStats.framesDecoded) /\r\n                  ((newStat.timestamp - self.aggregatedStats.timestamp) / 1000);\r\n                newStat.framerate = Math.floor(newStat.framerate);\r\n                newStat.lowFramerate =\r\n                  self.aggregatedStats.lowFramerate &&\r\n                  self.aggregatedStats.lowFramerate < newStat.framerate\r\n                    ? self.aggregatedStats.lowFramerate\r\n                    : newStat.framerate;\r\n                newStat.highFramerate =\r\n                  self.aggregatedStats.highFramerate &&\r\n                  self.aggregatedStats.highFramerate > newStat.framerate\r\n                    ? self.aggregatedStats.highFramerate\r\n                    : newStat.framerate;\r\n              }\r\n\r\n              if (self.aggregatedStats.framesDecodedStart) {\r\n                newStat.avgframerate =\r\n                  (newStat.framesDecoded -\r\n                    self.aggregatedStats.framesDecodedStart) /\r\n                  ((newStat.timestamp - self.aggregatedStats.timestampStart) /\r\n                    1000);\r\n                newStat.avgframerate = Math.floor(newStat.avgframerate);\r\n              }\r\n            }\r\n          }\r\n\r\n          //Read video track stats\r\n          if (\r\n            stat.type == \"track\" &&\r\n            (stat.trackIdentifier == \"video_label\" || stat.kind == \"video\")\r\n          ) {\r\n            newStat.framesDropped = stat.framesDropped;\r\n            newStat.framesReceived = stat.framesReceived;\r\n            newStat.framesDroppedPercentage =\r\n              (stat.framesDropped / stat.framesReceived) * 100;\r\n            newStat.frameHeight = stat.frameHeight;\r\n            newStat.frameWidth = stat.frameWidth;\r\n            newStat.frameHeightStart =\r\n              self.aggregatedStats && self.aggregatedStats.frameHeightStart\r\n                ? self.aggregatedStats.frameHeightStart\r\n                : stat.frameHeight;\r\n            newStat.frameWidthStart =\r\n              self.aggregatedStats && self.aggregatedStats.frameWidthStart\r\n                ? self.aggregatedStats.frameWidthStart\r\n                : stat.frameWidth;\r\n          }\r\n\r\n          if (\r\n            stat.type == \"candidate-pair\" &&\r\n            stat.hasOwnProperty(\"currentRoundTripTime\") &&\r\n            stat.currentRoundTripTime != 0\r\n          ) {\r\n            newStat.currentRoundTripTime = stat.currentRoundTripTime;\r\n          }\r\n        });\r\n\r\n        //console.log(JSON.stringify(newStat));\r\n        self.aggregatedStats = newStat;\r\n\r\n        if (self.onAggregatedStats) self.onAggregatedStats(newStat);\r\n      };\r\n    };\r\n\r\n    //**********************\r\n    //Public functions\r\n    //**********************\r\n\r\n    //This is called when revceiving new ice candidates individually instead of part of the offer\r\n    //This is currently not used but would be called externally from this class\r\n    this.handleCandidateFromServer = function (iceCandidate) {\r\n      console.log(\"ICE candidate: \", iceCandidate);\r\n      let candidate = new RTCIceCandidate(iceCandidate);\r\n      self.pcClient.addIceCandidate(candidate).then((_) => {\r\n        console.log(\"ICE candidate successfully added\");\r\n      });\r\n    };\r\n\r\n    //Called externaly to create an offer for the server\r\n    this.createOffer = function () {\r\n      if (self.pcClient) {\r\n        console.log(\"Closing existing PeerConnection\");\r\n        self.pcClient.close();\r\n        self.pcClient = null;\r\n      }\r\n      self.pcClient = new RTCPeerConnection(self.cfg);\r\n      setupPeerConnection(self.pcClient);\r\n      self.dcClient = setupDataChannel(\r\n        self.pcClient,\r\n        \"cirrus\",\r\n        self.dataChannelOptions\r\n      );\r\n      handleCreateOffer(self.pcClient);\r\n    };\r\n\r\n    //Called externaly when an answer is received from the server\r\n    this.receiveAnswer = function (answer) {\r\n      console.log(`Received answer:\\n${answer}`);\r\n      var answerDesc = new RTCSessionDescription(answer);\r\n      self.pcClient.setRemoteDescription(answerDesc);\r\n    };\r\n\r\n    this.close = function () {\r\n      if (self.pcClient) {\r\n        console.log(\"Closing existing peerClient\");\r\n        self.pcClient.close();\r\n        self.pcClient = null;\r\n      }\r\n      if (self.aggregateStatsIntervalId)\r\n        clearInterval(self.aggregateStatsIntervalId);\r\n    };\r\n\r\n    //Sends data across the datachannel\r\n    this.send = function (data) {\r\n      if (self.dcClient && self.dcClient.readyState == \"open\") {\r\n        //console.log('Sending data on dataconnection', self.dcClient)\r\n        self.dcClient.send(data);\r\n      }\r\n    };\r\n\r\n    this.getStats = function (onStats) {\r\n      if (self.pcClient && onStats) {\r\n        self.pcClient.getStats(null).then((stats) => {\r\n          onStats(stats);\r\n        });\r\n      }\r\n    };\r\n\r\n    this.aggregateStats = function (checkInterval) {\r\n      let calcAggregatedStats = generateAggregatedStatsFunction();\r\n      let printAggregatedStats = () => {\r\n        self.getStats(calcAggregatedStats);\r\n      };\r\n      self.aggregateStatsIntervalId = setInterval(\r\n        printAggregatedStats,\r\n        checkInterval\r\n      );\r\n    };\r\n  }\r\n\r\n  return webRtcPlayer;\r\n});\r\n"," /* eslint-disable */\r\n (function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  \r\n  \r\n  'use strict';\r\n  \r\n  var _adapter_factory = require('./adapter_factory.js');\r\n  \r\n  var adapter = (0, _adapter_factory.adapterFactory)({ window: typeof window === 'undefined' ? undefined : window });\r\n  module.exports = adapter; // this is the difference from adapter_core.\r\n  \r\n  },{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.adapterFactory = adapterFactory;\r\n  \r\n  var _utils = require('./utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  var _chrome_shim = require('./chrome/chrome_shim');\r\n  \r\n  var chromeShim = _interopRequireWildcard(_chrome_shim);\r\n  \r\n  var _edge_shim = require('./edge/edge_shim');\r\n  \r\n  var edgeShim = _interopRequireWildcard(_edge_shim);\r\n  \r\n  var _firefox_shim = require('./firefox/firefox_shim');\r\n  \r\n  var firefoxShim = _interopRequireWildcard(_firefox_shim);\r\n  \r\n  var _safari_shim = require('./safari/safari_shim');\r\n  \r\n  var safariShim = _interopRequireWildcard(_safari_shim);\r\n  \r\n  var _common_shim = require('./common_shim');\r\n  \r\n  var commonShim = _interopRequireWildcard(_common_shim);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  // Shimming starts here.\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  function adapterFactory() {\r\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n        window = _ref.window;\r\n  \r\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\r\n      shimChrome: true,\r\n      shimFirefox: true,\r\n      shimEdge: true,\r\n      shimSafari: true\r\n    };\r\n  \r\n    // Utils.\r\n    var logging = utils.log;\r\n    var browserDetails = utils.detectBrowser(window);\r\n  \r\n    var adapter = {\r\n      browserDetails: browserDetails,\r\n      commonShim: commonShim,\r\n      extractVersion: utils.extractVersion,\r\n      disableLog: utils.disableLog,\r\n      disableWarnings: utils.disableWarnings\r\n    };\r\n  \r\n    // Shim browser if found.\r\n    switch (browserDetails.browser) {\r\n      case 'chrome':\r\n        if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\r\n          logging('Chrome shim is not included in this adapter release.');\r\n          return adapter;\r\n        }\r\n        if (browserDetails.version === null) {\r\n          logging('Chrome shim can not determine version, not shimming.');\r\n          return adapter;\r\n        }\r\n        logging('adapter.js shimming chrome.');\r\n        // Export to the adapter global object visible in the browser.\r\n        adapter.browserShim = chromeShim;\r\n  \r\n        chromeShim.shimGetUserMedia(window);\r\n        chromeShim.shimMediaStream(window);\r\n        chromeShim.shimPeerConnection(window);\r\n        chromeShim.shimOnTrack(window);\r\n        chromeShim.shimAddTrackRemoveTrack(window);\r\n        chromeShim.shimGetSendersWithDtmf(window);\r\n        chromeShim.shimGetStats(window);\r\n        chromeShim.shimSenderReceiverGetStats(window);\r\n        chromeShim.fixNegotiationNeeded(window);\r\n  \r\n        commonShim.shimRTCIceCandidate(window);\r\n        commonShim.shimConnectionState(window);\r\n        commonShim.shimMaxMessageSize(window);\r\n        commonShim.shimSendThrowTypeError(window);\r\n        commonShim.removeAllowExtmapMixed(window);\r\n        break;\r\n      case 'firefox':\r\n        if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\r\n          logging('Firefox shim is not included in this adapter release.');\r\n          return adapter;\r\n        }\r\n        logging('adapter.js shimming firefox.');\r\n        // Export to the adapter global object visible in the browser.\r\n        adapter.browserShim = firefoxShim;\r\n  \r\n        firefoxShim.shimGetUserMedia(window);\r\n        firefoxShim.shimPeerConnection(window);\r\n        firefoxShim.shimOnTrack(window);\r\n        firefoxShim.shimRemoveStream(window);\r\n        firefoxShim.shimSenderGetStats(window);\r\n        firefoxShim.shimReceiverGetStats(window);\r\n        firefoxShim.shimRTCDataChannel(window);\r\n        firefoxShim.shimAddTransceiver(window);\r\n        firefoxShim.shimGetParameters(window);\r\n        firefoxShim.shimCreateOffer(window);\r\n        firefoxShim.shimCreateAnswer(window);\r\n  \r\n        commonShim.shimRTCIceCandidate(window);\r\n        commonShim.shimConnectionState(window);\r\n        commonShim.shimMaxMessageSize(window);\r\n        commonShim.shimSendThrowTypeError(window);\r\n        break;\r\n      case 'edge':\r\n        if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\r\n          logging('MS edge shim is not included in this adapter release.');\r\n          return adapter;\r\n        }\r\n        logging('adapter.js shimming edge.');\r\n        // Export to the adapter global object visible in the browser.\r\n        adapter.browserShim = edgeShim;\r\n  \r\n        edgeShim.shimGetUserMedia(window);\r\n        edgeShim.shimGetDisplayMedia(window);\r\n        edgeShim.shimPeerConnection(window);\r\n        edgeShim.shimReplaceTrack(window);\r\n  \r\n        // the edge shim implements the full RTCIceCandidate object.\r\n  \r\n        commonShim.shimMaxMessageSize(window);\r\n        commonShim.shimSendThrowTypeError(window);\r\n        break;\r\n      case 'safari':\r\n        if (!safariShim || !options.shimSafari) {\r\n          logging('Safari shim is not included in this adapter release.');\r\n          return adapter;\r\n        }\r\n        logging('adapter.js shimming safari.');\r\n        // Export to the adapter global object visible in the browser.\r\n        adapter.browserShim = safariShim;\r\n  \r\n        safariShim.shimRTCIceServerUrls(window);\r\n        safariShim.shimCreateOfferLegacy(window);\r\n        safariShim.shimCallbacksAPI(window);\r\n        safariShim.shimLocalStreamsAPI(window);\r\n        safariShim.shimRemoteStreamsAPI(window);\r\n        safariShim.shimTrackEventTransceiver(window);\r\n        safariShim.shimGetUserMedia(window);\r\n        safariShim.shimAudioContext(window);\r\n  \r\n        commonShim.shimRTCIceCandidate(window);\r\n        commonShim.shimMaxMessageSize(window);\r\n        commonShim.shimSendThrowTypeError(window);\r\n        commonShim.removeAllowExtmapMixed(window);\r\n        break;\r\n      default:\r\n        logging('Unsupported browser!');\r\n        break;\r\n    }\r\n  \r\n    return adapter;\r\n  }\r\n  \r\n  // Browser shims.\r\n  \r\n  },{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./edge/edge_shim\":7,\"./firefox/firefox_shim\":11,\"./safari/safari_shim\":14,\"./utils\":15}],3:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  var _getusermedia = require('./getusermedia');\r\n  \r\n  Object.defineProperty(exports, 'shimGetUserMedia', {\r\n    enumerable: true,\r\n    get: function get() {\r\n      return _getusermedia.shimGetUserMedia;\r\n    }\r\n  });\r\n  \r\n  var _getdisplaymedia = require('./getdisplaymedia');\r\n  \r\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\r\n    enumerable: true,\r\n    get: function get() {\r\n      return _getdisplaymedia.shimGetDisplayMedia;\r\n    }\r\n  });\r\n  exports.shimMediaStream = shimMediaStream;\r\n  exports.shimOnTrack = shimOnTrack;\r\n  exports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\r\n  exports.shimGetStats = shimGetStats;\r\n  exports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\r\n  exports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\r\n  exports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\r\n  exports.shimPeerConnection = shimPeerConnection;\r\n  exports.fixNegotiationNeeded = fixNegotiationNeeded;\r\n  \r\n  var _utils = require('../utils.js');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n  \r\n  function shimMediaStream(window) {\r\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\r\n  }\r\n  \r\n  function shimOnTrack(window) {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\r\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\r\n        get: function get() {\r\n          return this._ontrack;\r\n        },\r\n        set: function set(f) {\r\n          if (this._ontrack) {\r\n            this.removeEventListener('track', this._ontrack);\r\n          }\r\n          this.addEventListener('track', this._ontrack = f);\r\n        },\r\n  \r\n        enumerable: true,\r\n        configurable: true\r\n      });\r\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\r\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\r\n        var _this = this;\r\n  \r\n        if (!this._ontrackpoly) {\r\n          this._ontrackpoly = function (e) {\r\n            // onaddstream does not fire when a track is added to an existing\r\n            // stream. But stream.onaddtrack is implemented so we use that.\r\n            e.stream.addEventListener('addtrack', function (te) {\r\n              var receiver = void 0;\r\n              if (window.RTCPeerConnection.prototype.getReceivers) {\r\n                receiver = _this.getReceivers().find(function (r) {\r\n                  return r.track && r.track.id === te.track.id;\r\n                });\r\n              } else {\r\n                receiver = { track: te.track };\r\n              }\r\n  \r\n              var event = new Event('track');\r\n              event.track = te.track;\r\n              event.receiver = receiver;\r\n              event.transceiver = { receiver: receiver };\r\n              event.streams = [e.stream];\r\n              _this.dispatchEvent(event);\r\n            });\r\n            e.stream.getTracks().forEach(function (track) {\r\n              var receiver = void 0;\r\n              if (window.RTCPeerConnection.prototype.getReceivers) {\r\n                receiver = _this.getReceivers().find(function (r) {\r\n                  return r.track && r.track.id === track.id;\r\n                });\r\n              } else {\r\n                receiver = { track: track };\r\n              }\r\n              var event = new Event('track');\r\n              event.track = track;\r\n              event.receiver = receiver;\r\n              event.transceiver = { receiver: receiver };\r\n              event.streams = [e.stream];\r\n              _this.dispatchEvent(event);\r\n            });\r\n          };\r\n          this.addEventListener('addstream', this._ontrackpoly);\r\n        }\r\n        return origSetRemoteDescription.apply(this, arguments);\r\n      };\r\n    } else {\r\n      // even if RTCRtpTransceiver is in window, it is only used and\r\n      // emitted in unified-plan. Unfortunately this means we need\r\n      // to unconditionally wrap the event.\r\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\r\n        if (!e.transceiver) {\r\n          Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\r\n        }\r\n        return e;\r\n      });\r\n    }\r\n  }\r\n  \r\n  function shimGetSendersWithDtmf(window) {\r\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\r\n      var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\r\n        return {\r\n          track: track,\r\n          get dtmf() {\r\n            if (this._dtmf === undefined) {\r\n              if (track.kind === 'audio') {\r\n                this._dtmf = pc.createDTMFSender(track);\r\n              } else {\r\n                this._dtmf = null;\r\n              }\r\n            }\r\n            return this._dtmf;\r\n          },\r\n          _pc: pc\r\n        };\r\n      };\r\n  \r\n      // augment addTrack when getSenders is not available.\r\n      if (!window.RTCPeerConnection.prototype.getSenders) {\r\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\r\n          this._senders = this._senders || [];\r\n          return this._senders.slice(); // return a copy of the internal state.\r\n        };\r\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\r\n        window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\r\n          var sender = origAddTrack.apply(this, arguments);\r\n          if (!sender) {\r\n            sender = shimSenderWithDtmf(this, track);\r\n            this._senders.push(sender);\r\n          }\r\n          return sender;\r\n        };\r\n  \r\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\r\n        window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\r\n          origRemoveTrack.apply(this, arguments);\r\n          var idx = this._senders.indexOf(sender);\r\n          if (idx !== -1) {\r\n            this._senders.splice(idx, 1);\r\n          }\r\n        };\r\n      }\r\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\r\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\r\n        var _this2 = this;\r\n  \r\n        this._senders = this._senders || [];\r\n        origAddStream.apply(this, [stream]);\r\n        stream.getTracks().forEach(function (track) {\r\n          _this2._senders.push(shimSenderWithDtmf(_this2, track));\r\n        });\r\n      };\r\n  \r\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\r\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\r\n        var _this3 = this;\r\n  \r\n        this._senders = this._senders || [];\r\n        origRemoveStream.apply(this, [stream]);\r\n  \r\n        stream.getTracks().forEach(function (track) {\r\n          var sender = _this3._senders.find(function (s) {\r\n            return s.track === track;\r\n          });\r\n          if (sender) {\r\n            // remove sender\r\n            _this3._senders.splice(_this3._senders.indexOf(sender), 1);\r\n          }\r\n        });\r\n      };\r\n    } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\r\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\r\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\r\n        var _this4 = this;\r\n  \r\n        var senders = origGetSenders.apply(this, []);\r\n        senders.forEach(function (sender) {\r\n          return sender._pc = _this4;\r\n        });\r\n        return senders;\r\n      };\r\n  \r\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\r\n        get: function get() {\r\n          if (this._dtmf === undefined) {\r\n            if (this.track.kind === 'audio') {\r\n              this._dtmf = this._pc.createDTMFSender(this.track);\r\n            } else {\r\n              this._dtmf = null;\r\n            }\r\n          }\r\n          return this._dtmf;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  function shimGetStats(window) {\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n  \r\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\r\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\r\n      var _this5 = this;\r\n  \r\n      var _arguments = Array.prototype.slice.call(arguments),\r\n          selector = _arguments[0],\r\n          onSucc = _arguments[1],\r\n          onErr = _arguments[2];\r\n  \r\n      // If selector is a function then we are in the old style stats so just\r\n      // pass back the original getStats format to avoid breaking old users.\r\n  \r\n  \r\n      if (arguments.length > 0 && typeof selector === 'function') {\r\n        return origGetStats.apply(this, arguments);\r\n      }\r\n  \r\n      // When spec-style getStats is supported, return those when called with\r\n      // either no arguments or the selector argument is null.\r\n      if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\r\n        return origGetStats.apply(this, []);\r\n      }\r\n  \r\n      var fixChromeStats_ = function fixChromeStats_(response) {\r\n        var standardReport = {};\r\n        var reports = response.result();\r\n        reports.forEach(function (report) {\r\n          var standardStats = {\r\n            id: report.id,\r\n            timestamp: report.timestamp,\r\n            type: {\r\n              localcandidate: 'local-candidate',\r\n              remotecandidate: 'remote-candidate'\r\n            }[report.type] || report.type\r\n          };\r\n          report.names().forEach(function (name) {\r\n            standardStats[name] = report.stat(name);\r\n          });\r\n          standardReport[standardStats.id] = standardStats;\r\n        });\r\n  \r\n        return standardReport;\r\n      };\r\n  \r\n      // shim getStats with maplike support\r\n      var makeMapStats = function makeMapStats(stats) {\r\n        return new Map(Object.keys(stats).map(function (key) {\r\n          return [key, stats[key]];\r\n        }));\r\n      };\r\n  \r\n      if (arguments.length >= 2) {\r\n        var successCallbackWrapper_ = function successCallbackWrapper_(response) {\r\n          onSucc(makeMapStats(fixChromeStats_(response)));\r\n        };\r\n  \r\n        return origGetStats.apply(this, [successCallbackWrapper_, selector]);\r\n      }\r\n  \r\n      // promise-support\r\n      return new Promise(function (resolve, reject) {\r\n        origGetStats.apply(_this5, [function (response) {\r\n          resolve(makeMapStats(fixChromeStats_(response)));\r\n        }, reject]);\r\n      }).then(onSucc, onErr);\r\n    };\r\n  }\r\n  \r\n  function shimSenderReceiverGetStats(window) {\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\r\n      return;\r\n    }\r\n  \r\n    // shim sender stats.\r\n    if (!('getStats' in window.RTCRtpSender.prototype)) {\r\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\r\n      if (origGetSenders) {\r\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\r\n          var _this6 = this;\r\n  \r\n          var senders = origGetSenders.apply(this, []);\r\n          senders.forEach(function (sender) {\r\n            return sender._pc = _this6;\r\n          });\r\n          return senders;\r\n        };\r\n      }\r\n  \r\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\r\n      if (origAddTrack) {\r\n        window.RTCPeerConnection.prototype.addTrack = function addTrack() {\r\n          var sender = origAddTrack.apply(this, arguments);\r\n          sender._pc = this;\r\n          return sender;\r\n        };\r\n      }\r\n      window.RTCRtpSender.prototype.getStats = function getStats() {\r\n        var sender = this;\r\n        return this._pc.getStats().then(function (result) {\r\n          return (\r\n            /* Note: this will include stats of all senders that\r\n             *   send a track with the same id as sender.track as\r\n             *   it is not possible to identify the RTCRtpSender.\r\n             */\r\n            utils.filterStats(result, sender.track, true)\r\n          );\r\n        });\r\n      };\r\n    }\r\n  \r\n    // shim receiver stats.\r\n    if (!('getStats' in window.RTCRtpReceiver.prototype)) {\r\n      var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\r\n      if (origGetReceivers) {\r\n        window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\r\n          var _this7 = this;\r\n  \r\n          var receivers = origGetReceivers.apply(this, []);\r\n          receivers.forEach(function (receiver) {\r\n            return receiver._pc = _this7;\r\n          });\r\n          return receivers;\r\n        };\r\n      }\r\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\r\n        e.receiver._pc = e.srcElement;\r\n        return e;\r\n      });\r\n      window.RTCRtpReceiver.prototype.getStats = function getStats() {\r\n        var receiver = this;\r\n        return this._pc.getStats().then(function (result) {\r\n          return utils.filterStats(result, receiver.track, false);\r\n        });\r\n      };\r\n    }\r\n  \r\n    if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\r\n      return;\r\n    }\r\n  \r\n    // shim RTCPeerConnection.getStats(track).\r\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\r\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\r\n      if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\r\n        var track = arguments[0];\r\n        var sender = void 0;\r\n        var receiver = void 0;\r\n        var err = void 0;\r\n        this.getSenders().forEach(function (s) {\r\n          if (s.track === track) {\r\n            if (sender) {\r\n              err = true;\r\n            } else {\r\n              sender = s;\r\n            }\r\n          }\r\n        });\r\n        this.getReceivers().forEach(function (r) {\r\n          if (r.track === track) {\r\n            if (receiver) {\r\n              err = true;\r\n            } else {\r\n              receiver = r;\r\n            }\r\n          }\r\n          return r.track === track;\r\n        });\r\n        if (err || sender && receiver) {\r\n          return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\r\n        } else if (sender) {\r\n          return sender.getStats();\r\n        } else if (receiver) {\r\n          return receiver.getStats();\r\n        }\r\n        return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\r\n      }\r\n      return origGetStats.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  function shimAddTrackRemoveTrackWithNative(window) {\r\n    // shim addTrack/removeTrack with native variants in order to make\r\n    // the interactions with legacy getLocalStreams behave as in other browsers.\r\n    // Keeps a mapping stream.id => [stream, rtpsenders...]\r\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\r\n      var _this8 = this;\r\n  \r\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\r\n      return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\r\n        return _this8._shimmedLocalStreams[streamId][0];\r\n      });\r\n    };\r\n  \r\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\r\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\r\n      if (!stream) {\r\n        return origAddTrack.apply(this, arguments);\r\n      }\r\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\r\n  \r\n      var sender = origAddTrack.apply(this, arguments);\r\n      if (!this._shimmedLocalStreams[stream.id]) {\r\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\r\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\r\n        this._shimmedLocalStreams[stream.id].push(sender);\r\n      }\r\n      return sender;\r\n    };\r\n  \r\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\r\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\r\n      var _this9 = this;\r\n  \r\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\r\n  \r\n      stream.getTracks().forEach(function (track) {\r\n        var alreadyExists = _this9.getSenders().find(function (s) {\r\n          return s.track === track;\r\n        });\r\n        if (alreadyExists) {\r\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\r\n        }\r\n      });\r\n      var existingSenders = this.getSenders();\r\n      origAddStream.apply(this, arguments);\r\n      var newSenders = this.getSenders().filter(function (newSender) {\r\n        return existingSenders.indexOf(newSender) === -1;\r\n      });\r\n      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\r\n    };\r\n  \r\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\r\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\r\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\r\n      delete this._shimmedLocalStreams[stream.id];\r\n      return origRemoveStream.apply(this, arguments);\r\n    };\r\n  \r\n    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\r\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\r\n      var _this10 = this;\r\n  \r\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\r\n      if (sender) {\r\n        Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\r\n          var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\r\n          if (idx !== -1) {\r\n            _this10._shimmedLocalStreams[streamId].splice(idx, 1);\r\n          }\r\n          if (_this10._shimmedLocalStreams[streamId].length === 1) {\r\n            delete _this10._shimmedLocalStreams[streamId];\r\n          }\r\n        });\r\n      }\r\n      return origRemoveTrack.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  function shimAddTrackRemoveTrack(window) {\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    var browserDetails = utils.detectBrowser(window);\r\n    // shim addTrack and removeTrack.\r\n    if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\r\n      return shimAddTrackRemoveTrackWithNative(window);\r\n    }\r\n  \r\n    // also shim pc.getLocalStreams when addTrack is shimmed\r\n    // to return the original streams.\r\n    var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\r\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\r\n      var _this11 = this;\r\n  \r\n      var nativeStreams = origGetLocalStreams.apply(this);\r\n      this._reverseStreams = this._reverseStreams || {};\r\n      return nativeStreams.map(function (stream) {\r\n        return _this11._reverseStreams[stream.id];\r\n      });\r\n    };\r\n  \r\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\r\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\r\n      var _this12 = this;\r\n  \r\n      this._streams = this._streams || {};\r\n      this._reverseStreams = this._reverseStreams || {};\r\n  \r\n      stream.getTracks().forEach(function (track) {\r\n        var alreadyExists = _this12.getSenders().find(function (s) {\r\n          return s.track === track;\r\n        });\r\n        if (alreadyExists) {\r\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\r\n        }\r\n      });\r\n      // Add identity mapping for consistency with addTrack.\r\n      // Unless this is being used with a stream from addTrack.\r\n      if (!this._reverseStreams[stream.id]) {\r\n        var newStream = new window.MediaStream(stream.getTracks());\r\n        this._streams[stream.id] = newStream;\r\n        this._reverseStreams[newStream.id] = stream;\r\n        stream = newStream;\r\n      }\r\n      origAddStream.apply(this, [stream]);\r\n    };\r\n  \r\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\r\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\r\n      this._streams = this._streams || {};\r\n      this._reverseStreams = this._reverseStreams || {};\r\n  \r\n      origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\r\n      delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\r\n      delete this._streams[stream.id];\r\n    };\r\n  \r\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\r\n      var _this13 = this;\r\n  \r\n      if (this.signalingState === 'closed') {\r\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\r\n      }\r\n      var streams = [].slice.call(arguments, 1);\r\n      if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\r\n        return t === track;\r\n      })) {\r\n        // this is not fully correct but all we can manage without\r\n        // [[associated MediaStreams]] internal slot.\r\n        throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\r\n      }\r\n  \r\n      var alreadyExists = this.getSenders().find(function (s) {\r\n        return s.track === track;\r\n      });\r\n      if (alreadyExists) {\r\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\r\n      }\r\n  \r\n      this._streams = this._streams || {};\r\n      this._reverseStreams = this._reverseStreams || {};\r\n      var oldStream = this._streams[stream.id];\r\n      if (oldStream) {\r\n        // this is using odd Chrome behaviour, use with caution:\r\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\r\n        // Note: we rely on the high-level addTrack/dtmf shim to\r\n        // create the sender with a dtmf sender.\r\n        oldStream.addTrack(track);\r\n  \r\n        // Trigger ONN async.\r\n        Promise.resolve().then(function () {\r\n          _this13.dispatchEvent(new Event('negotiationneeded'));\r\n        });\r\n      } else {\r\n        var newStream = new window.MediaStream([track]);\r\n        this._streams[stream.id] = newStream;\r\n        this._reverseStreams[newStream.id] = stream;\r\n        this.addStream(newStream);\r\n      }\r\n      return this.getSenders().find(function (s) {\r\n        return s.track === track;\r\n      });\r\n    };\r\n  \r\n    // replace the internal stream id with the external one and\r\n    // vice versa.\r\n    function replaceInternalStreamId(pc, description) {\r\n      var sdp = description.sdp;\r\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\r\n        var externalStream = pc._reverseStreams[internalId];\r\n        var internalStream = pc._streams[externalStream.id];\r\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\r\n      });\r\n      return new RTCSessionDescription({\r\n        type: description.type,\r\n        sdp: sdp\r\n      });\r\n    }\r\n    function replaceExternalStreamId(pc, description) {\r\n      var sdp = description.sdp;\r\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\r\n        var externalStream = pc._reverseStreams[internalId];\r\n        var internalStream = pc._streams[externalStream.id];\r\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\r\n      });\r\n      return new RTCSessionDescription({\r\n        type: description.type,\r\n        sdp: sdp\r\n      });\r\n    }\r\n    ['createOffer', 'createAnswer'].forEach(function (method) {\r\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n      var methodObj = _defineProperty({}, method, function () {\r\n        var _this14 = this;\r\n  \r\n        var args = arguments;\r\n        var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\r\n        if (isLegacyCall) {\r\n          return nativeMethod.apply(this, [function (description) {\r\n            var desc = replaceInternalStreamId(_this14, description);\r\n            args[0].apply(null, [desc]);\r\n          }, function (err) {\r\n            if (args[1]) {\r\n              args[1].apply(null, err);\r\n            }\r\n          }, arguments[2]]);\r\n        }\r\n        return nativeMethod.apply(this, arguments).then(function (description) {\r\n          return replaceInternalStreamId(_this14, description);\r\n        });\r\n      });\r\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\r\n    });\r\n  \r\n    var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\r\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\r\n      if (!arguments.length || !arguments[0].type) {\r\n        return origSetLocalDescription.apply(this, arguments);\r\n      }\r\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\r\n      return origSetLocalDescription.apply(this, arguments);\r\n    };\r\n  \r\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\r\n  \r\n    var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\r\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\r\n      get: function get() {\r\n        var description = origLocalDescription.get.apply(this);\r\n        if (description.type === '') {\r\n          return description;\r\n        }\r\n        return replaceInternalStreamId(this, description);\r\n      }\r\n    });\r\n  \r\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\r\n      var _this15 = this;\r\n  \r\n      if (this.signalingState === 'closed') {\r\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\r\n      }\r\n      // We can not yet check for sender instanceof RTCRtpSender\r\n      // since we shim RTPSender. So we check if sender._pc is set.\r\n      if (!sender._pc) {\r\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\r\n      }\r\n      var isLocal = sender._pc === this;\r\n      if (!isLocal) {\r\n        throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\r\n      }\r\n  \r\n      // Search for the native stream the senders track belongs to.\r\n      this._streams = this._streams || {};\r\n      var stream = void 0;\r\n      Object.keys(this._streams).forEach(function (streamid) {\r\n        var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\r\n          return sender.track === track;\r\n        });\r\n        if (hasTrack) {\r\n          stream = _this15._streams[streamid];\r\n        }\r\n      });\r\n  \r\n      if (stream) {\r\n        if (stream.getTracks().length === 1) {\r\n          // if this is the last track of the stream, remove the stream. This\r\n          // takes care of any shimmed _senders.\r\n          this.removeStream(this._reverseStreams[stream.id]);\r\n        } else {\r\n          // relying on the same odd chrome behaviour as above.\r\n          stream.removeTrack(sender.track);\r\n        }\r\n        this.dispatchEvent(new Event('negotiationneeded'));\r\n      }\r\n    };\r\n  }\r\n  \r\n  function shimPeerConnection(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n  \r\n    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\r\n      // very basic support for old versions.\r\n      window.RTCPeerConnection = window.webkitRTCPeerConnection;\r\n    }\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n  \r\n    var addIceCandidateNullSupported = window.RTCPeerConnection.prototype.addIceCandidate.length === 0;\r\n  \r\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\r\n    if (browserDetails.version < 53) {\r\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\r\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n        var methodObj = _defineProperty({}, method, function () {\r\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\r\n          return nativeMethod.apply(this, arguments);\r\n        });\r\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\r\n      });\r\n    }\r\n  \r\n    // support for addIceCandidate(null or undefined)\r\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\r\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\r\n      if (!addIceCandidateNullSupported && !arguments[0]) {\r\n        if (arguments[1]) {\r\n          arguments[1].apply(null);\r\n        }\r\n        return Promise.resolve();\r\n      }\r\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\r\n      // in older versions. Native support planned for Chrome M77.\r\n      if (browserDetails.version < 78 && arguments[0] && arguments[0].candidate === '') {\r\n        return Promise.resolve();\r\n      }\r\n      return nativeAddIceCandidate.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  // Attempt to fix ONN in plan-b mode.\r\n  function fixNegotiationNeeded(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n    utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\r\n      var pc = e.target;\r\n      if (browserDetails.version < 72 || pc.getConfiguration && pc.getConfiguration().sdpSemantics === 'plan-b') {\r\n        if (pc.signalingState !== 'stable') {\r\n          return;\r\n        }\r\n      }\r\n      return e;\r\n    });\r\n  }\r\n  \r\n  },{\"../utils.js\":15,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\r\n  function shimGetDisplayMedia(window, getSourceId) {\r\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\r\n      return;\r\n    }\r\n    if (!window.navigator.mediaDevices) {\r\n      return;\r\n    }\r\n    // getSourceId is a function that returns a promise resolving with\r\n    // the sourceId of the screen/window/tab to be shared.\r\n    if (typeof getSourceId !== 'function') {\r\n      console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\r\n      return;\r\n    }\r\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\r\n      return getSourceId(constraints).then(function (sourceId) {\r\n        var widthSpecified = constraints.video && constraints.video.width;\r\n        var heightSpecified = constraints.video && constraints.video.height;\r\n        var frameRateSpecified = constraints.video && constraints.video.frameRate;\r\n        constraints.video = {\r\n          mandatory: {\r\n            chromeMediaSource: 'desktop',\r\n            chromeMediaSourceId: sourceId,\r\n            maxFrameRate: frameRateSpecified || 3\r\n          }\r\n        };\r\n        if (widthSpecified) {\r\n          constraints.video.mandatory.maxWidth = widthSpecified;\r\n        }\r\n        if (heightSpecified) {\r\n          constraints.video.mandatory.maxHeight = heightSpecified;\r\n        }\r\n        return window.navigator.mediaDevices.getUserMedia(constraints);\r\n      });\r\n    };\r\n  }\r\n  \r\n  },{}],5:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  exports.shimGetUserMedia = shimGetUserMedia;\r\n  \r\n  var _utils = require('../utils.js');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  var logging = utils.log;\r\n  \r\n  function shimGetUserMedia(window) {\r\n    var navigator = window && window.navigator;\r\n  \r\n    if (!navigator.mediaDevices) {\r\n      return;\r\n    }\r\n  \r\n    var browserDetails = utils.detectBrowser(window);\r\n  \r\n    var constraintsToChrome_ = function constraintsToChrome_(c) {\r\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\r\n        return c;\r\n      }\r\n      var cc = {};\r\n      Object.keys(c).forEach(function (key) {\r\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\r\n          return;\r\n        }\r\n        var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\r\n        if (r.exact !== undefined && typeof r.exact === 'number') {\r\n          r.min = r.max = r.exact;\r\n        }\r\n        var oldname_ = function oldname_(prefix, name) {\r\n          if (prefix) {\r\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\r\n          }\r\n          return name === 'deviceId' ? 'sourceId' : name;\r\n        };\r\n        if (r.ideal !== undefined) {\r\n          cc.optional = cc.optional || [];\r\n          var oc = {};\r\n          if (typeof r.ideal === 'number') {\r\n            oc[oldname_('min', key)] = r.ideal;\r\n            cc.optional.push(oc);\r\n            oc = {};\r\n            oc[oldname_('max', key)] = r.ideal;\r\n            cc.optional.push(oc);\r\n          } else {\r\n            oc[oldname_('', key)] = r.ideal;\r\n            cc.optional.push(oc);\r\n          }\r\n        }\r\n        if (r.exact !== undefined && typeof r.exact !== 'number') {\r\n          cc.mandatory = cc.mandatory || {};\r\n          cc.mandatory[oldname_('', key)] = r.exact;\r\n        } else {\r\n          ['min', 'max'].forEach(function (mix) {\r\n            if (r[mix] !== undefined) {\r\n              cc.mandatory = cc.mandatory || {};\r\n              cc.mandatory[oldname_(mix, key)] = r[mix];\r\n            }\r\n          });\r\n        }\r\n      });\r\n      if (c.advanced) {\r\n        cc.optional = (cc.optional || []).concat(c.advanced);\r\n      }\r\n      return cc;\r\n    };\r\n  \r\n    var shimConstraints_ = function shimConstraints_(constraints, func) {\r\n      if (browserDetails.version >= 61) {\r\n        return func(constraints);\r\n      }\r\n      constraints = JSON.parse(JSON.stringify(constraints));\r\n      if (constraints && _typeof(constraints.audio) === 'object') {\r\n        var remap = function remap(obj, a, b) {\r\n          if (a in obj && !(b in obj)) {\r\n            obj[b] = obj[a];\r\n            delete obj[a];\r\n          }\r\n        };\r\n        constraints = JSON.parse(JSON.stringify(constraints));\r\n        remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\r\n        remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\r\n        constraints.audio = constraintsToChrome_(constraints.audio);\r\n      }\r\n      if (constraints && _typeof(constraints.video) === 'object') {\r\n        // Shim facingMode for mobile & surface pro.\r\n        var face = constraints.video.facingMode;\r\n        face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\r\n        var getSupportedFacingModeLies = browserDetails.version < 66;\r\n  \r\n        if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\r\n          delete constraints.video.facingMode;\r\n          var matches = void 0;\r\n          if (face.exact === 'environment' || face.ideal === 'environment') {\r\n            matches = ['back', 'rear'];\r\n          } else if (face.exact === 'user' || face.ideal === 'user') {\r\n            matches = ['front'];\r\n          }\r\n          if (matches) {\r\n            // Look for matches in label, or use last cam for back (typical).\r\n            return navigator.mediaDevices.enumerateDevices().then(function (devices) {\r\n              devices = devices.filter(function (d) {\r\n                return d.kind === 'videoinput';\r\n              });\r\n              var dev = devices.find(function (d) {\r\n                return matches.some(function (match) {\r\n                  return d.label.toLowerCase().includes(match);\r\n                });\r\n              });\r\n              if (!dev && devices.length && matches.includes('back')) {\r\n                dev = devices[devices.length - 1]; // more likely the back cam\r\n              }\r\n              if (dev) {\r\n                constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\r\n              }\r\n              constraints.video = constraintsToChrome_(constraints.video);\r\n              logging('chrome: ' + JSON.stringify(constraints));\r\n              return func(constraints);\r\n            });\r\n          }\r\n        }\r\n        constraints.video = constraintsToChrome_(constraints.video);\r\n      }\r\n      logging('chrome: ' + JSON.stringify(constraints));\r\n      return func(constraints);\r\n    };\r\n  \r\n    var shimError_ = function shimError_(e) {\r\n      if (browserDetails.version >= 64) {\r\n        return e;\r\n      }\r\n      return {\r\n        name: {\r\n          PermissionDeniedError: 'NotAllowedError',\r\n          PermissionDismissedError: 'NotAllowedError',\r\n          InvalidStateError: 'NotAllowedError',\r\n          DevicesNotFoundError: 'NotFoundError',\r\n          ConstraintNotSatisfiedError: 'OverconstrainedError',\r\n          TrackStartError: 'NotReadableError',\r\n          MediaDeviceFailedDueToShutdown: 'NotAllowedError',\r\n          MediaDeviceKillSwitchOn: 'NotAllowedError',\r\n          TabCaptureError: 'AbortError',\r\n          ScreenCaptureError: 'AbortError',\r\n          DeviceCaptureError: 'AbortError'\r\n        }[e.name] || e.name,\r\n        message: e.message,\r\n        constraint: e.constraint || e.constraintName,\r\n        toString: function toString() {\r\n          return this.name + (this.message && ': ') + this.message;\r\n        }\r\n      };\r\n    };\r\n  \r\n    var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\r\n      shimConstraints_(constraints, function (c) {\r\n        navigator.webkitGetUserMedia(c, onSuccess, function (e) {\r\n          if (onError) {\r\n            onError(shimError_(e));\r\n          }\r\n        });\r\n      });\r\n    };\r\n    navigator.getUserMedia = getUserMedia_.bind(navigator);\r\n  \r\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\r\n    // function which returns a Promise, it does not accept spec-style\r\n    // constraints.\r\n    if (navigator.mediaDevices.getUserMedia) {\r\n      var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\r\n      navigator.mediaDevices.getUserMedia = function (cs) {\r\n        return shimConstraints_(cs, function (c) {\r\n          return origGetUserMedia(c).then(function (stream) {\r\n            if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\r\n              stream.getTracks().forEach(function (track) {\r\n                track.stop();\r\n              });\r\n              throw new DOMException('', 'NotFoundError');\r\n            }\r\n            return stream;\r\n          }, function (e) {\r\n            return Promise.reject(shimError_(e));\r\n          });\r\n        });\r\n      };\r\n    }\r\n  }\r\n  \r\n  },{\"../utils.js\":15}],6:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  exports.shimRTCIceCandidate = shimRTCIceCandidate;\r\n  exports.shimMaxMessageSize = shimMaxMessageSize;\r\n  exports.shimSendThrowTypeError = shimSendThrowTypeError;\r\n  exports.shimConnectionState = shimConnectionState;\r\n  exports.removeAllowExtmapMixed = removeAllowExtmapMixed;\r\n  \r\n  var _sdp = require('sdp');\r\n  \r\n  var _sdp2 = _interopRequireDefault(_sdp);\r\n  \r\n  var _utils = require('./utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n  \r\n  function shimRTCIceCandidate(window) {\r\n    // foundation is arbitrarily chosen as an indicator for full support for\r\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\r\n    if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\r\n      return;\r\n    }\r\n  \r\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\r\n    window.RTCIceCandidate = function RTCIceCandidate(args) {\r\n      // Remove the a= which shouldn't be part of the candidate string.\r\n      if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\r\n        args = JSON.parse(JSON.stringify(args));\r\n        args.candidate = args.candidate.substr(2);\r\n      }\r\n  \r\n      if (args.candidate && args.candidate.length) {\r\n        // Augment the native candidate with the parsed fields.\r\n        var nativeCandidate = new NativeRTCIceCandidate(args);\r\n        var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\r\n        var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\r\n  \r\n        // Add a serializer that does not serialize the extra attributes.\r\n        augmentedCandidate.toJSON = function toJSON() {\r\n          return {\r\n            candidate: augmentedCandidate.candidate,\r\n            sdpMid: augmentedCandidate.sdpMid,\r\n            sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\r\n            usernameFragment: augmentedCandidate.usernameFragment\r\n          };\r\n        };\r\n        return augmentedCandidate;\r\n      }\r\n      return new NativeRTCIceCandidate(args);\r\n    };\r\n    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\r\n  \r\n    // Hook up the augmented candidate in onicecandidate and\r\n    // addEventListener('icecandidate', ...)\r\n    utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\r\n      if (e.candidate) {\r\n        Object.defineProperty(e, 'candidate', {\r\n          value: new window.RTCIceCandidate(e.candidate),\r\n          writable: 'false'\r\n        });\r\n      }\r\n      return e;\r\n    });\r\n  }\r\n  \r\n  function shimMaxMessageSize(window) {\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    var browserDetails = utils.detectBrowser(window);\r\n  \r\n    if (!('sctp' in window.RTCPeerConnection.prototype)) {\r\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\r\n        get: function get() {\r\n          return typeof this._sctp === 'undefined' ? null : this._sctp;\r\n        }\r\n      });\r\n    }\r\n  \r\n    var sctpInDescription = function sctpInDescription(description) {\r\n      if (!description || !description.sdp) {\r\n        return false;\r\n      }\r\n      var sections = _sdp2.default.splitSections(description.sdp);\r\n      sections.shift();\r\n      return sections.some(function (mediaSection) {\r\n        var mLine = _sdp2.default.parseMLine(mediaSection);\r\n        return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\r\n      });\r\n    };\r\n  \r\n    var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\r\n      // TODO: Is there a better solution for detecting Firefox?\r\n      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\r\n      if (match === null || match.length < 2) {\r\n        return -1;\r\n      }\r\n      var version = parseInt(match[1], 10);\r\n      // Test for NaN (yes, this is ugly)\r\n      return version !== version ? -1 : version;\r\n    };\r\n  \r\n    var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\r\n      // Every implementation we know can send at least 64 KiB.\r\n      // Note: Although Chrome is technically able to send up to 256 KiB, the\r\n      //       data does not reach the other peer reliably.\r\n      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\r\n      var canSendMaxMessageSize = 65536;\r\n      if (browserDetails.browser === 'firefox') {\r\n        if (browserDetails.version < 57) {\r\n          if (remoteIsFirefox === -1) {\r\n            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\r\n            // fragmentation.\r\n            canSendMaxMessageSize = 16384;\r\n          } else {\r\n            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\r\n            // messages. Thus, supporting ~2 GiB when sending.\r\n            canSendMaxMessageSize = 2147483637;\r\n          }\r\n        } else if (browserDetails.version < 60) {\r\n          // Currently, all FF >= 57 will reset the remote maximum message size\r\n          // to the default value when a data channel is created at a later\r\n          // stage. :(\r\n          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\r\n          canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\r\n        } else {\r\n          // FF >= 60 supports sending ~2 GiB\r\n          canSendMaxMessageSize = 2147483637;\r\n        }\r\n      }\r\n      return canSendMaxMessageSize;\r\n    };\r\n  \r\n    var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\r\n      // Note: 65536 bytes is the default value from the SDP spec. Also,\r\n      //       every implementation we know supports receiving 65536 bytes.\r\n      var maxMessageSize = 65536;\r\n  \r\n      // FF 57 has a slightly incorrect default remote max message size, so\r\n      // we need to adjust it here to avoid a failure when sending.\r\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\r\n      if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\r\n        maxMessageSize = 65535;\r\n      }\r\n  \r\n      var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\r\n      if (match.length > 0) {\r\n        maxMessageSize = parseInt(match[0].substr(19), 10);\r\n      } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\r\n        // If the maximum message size is not present in the remote SDP and\r\n        // both local and remote are Firefox, the remote peer can receive\r\n        // ~2 GiB.\r\n        maxMessageSize = 2147483637;\r\n      }\r\n      return maxMessageSize;\r\n    };\r\n  \r\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\r\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\r\n      this._sctp = null;\r\n      // Chrome decided to not expose .sctp in plan-b mode.\r\n      // As usual, adapter.js has to do an 'ugly worakaround'\r\n      // to cover up the mess.\r\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\r\n        var _getConfiguration = this.getConfiguration(),\r\n            sdpSemantics = _getConfiguration.sdpSemantics;\r\n  \r\n        if (sdpSemantics === 'plan-b') {\r\n          Object.defineProperty(this, 'sctp', {\r\n            get: function get() {\r\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\r\n            },\r\n  \r\n            enumerable: true,\r\n            configurable: true\r\n          });\r\n        }\r\n      }\r\n  \r\n      if (sctpInDescription(arguments[0])) {\r\n        // Check if the remote is FF.\r\n        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\r\n  \r\n        // Get the maximum message size the local peer is capable of sending\r\n        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\r\n  \r\n        // Get the maximum message size of the remote peer.\r\n        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\r\n  \r\n        // Determine final maximum message size\r\n        var maxMessageSize = void 0;\r\n        if (canSendMMS === 0 && remoteMMS === 0) {\r\n          maxMessageSize = Number.POSITIVE_INFINITY;\r\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\r\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\r\n        } else {\r\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\r\n        }\r\n  \r\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\r\n        // attribute.\r\n        var sctp = {};\r\n        Object.defineProperty(sctp, 'maxMessageSize', {\r\n          get: function get() {\r\n            return maxMessageSize;\r\n          }\r\n        });\r\n        this._sctp = sctp;\r\n      }\r\n  \r\n      return origSetRemoteDescription.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  function shimSendThrowTypeError(window) {\r\n    if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\r\n      return;\r\n    }\r\n  \r\n    // Note: Although Firefox >= 57 has a native implementation, the maximum\r\n    //       message size can be reset for all data channels at a later stage.\r\n    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\r\n  \r\n    function wrapDcSend(dc, pc) {\r\n      var origDataChannelSend = dc.send;\r\n      dc.send = function send() {\r\n        var data = arguments[0];\r\n        var length = data.length || data.size || data.byteLength;\r\n        if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\r\n          throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\r\n        }\r\n        return origDataChannelSend.apply(dc, arguments);\r\n      };\r\n    }\r\n    var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\r\n    window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\r\n      var dataChannel = origCreateDataChannel.apply(this, arguments);\r\n      wrapDcSend(dataChannel, this);\r\n      return dataChannel;\r\n    };\r\n    utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\r\n      wrapDcSend(e.channel, e.target);\r\n      return e;\r\n    });\r\n  }\r\n  \r\n  /* shims RTCConnectionState by pretending it is the same as iceConnectionState.\r\n   * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\r\n   * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\r\n   * since DTLS failures would be hidden. See\r\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\r\n   * for the Firefox tracking bug.\r\n   */\r\n  function shimConnectionState(window) {\r\n    if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\r\n      return;\r\n    }\r\n    var proto = window.RTCPeerConnection.prototype;\r\n    Object.defineProperty(proto, 'connectionState', {\r\n      get: function get() {\r\n        return {\r\n          completed: 'connected',\r\n          checking: 'connecting'\r\n        }[this.iceConnectionState] || this.iceConnectionState;\r\n      },\r\n  \r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n    Object.defineProperty(proto, 'onconnectionstatechange', {\r\n      get: function get() {\r\n        return this._onconnectionstatechange || null;\r\n      },\r\n      set: function set(cb) {\r\n        if (this._onconnectionstatechange) {\r\n          this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\r\n          delete this._onconnectionstatechange;\r\n        }\r\n        if (cb) {\r\n          this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\r\n        }\r\n      },\r\n  \r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n  \r\n    ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\r\n      var origMethod = proto[method];\r\n      proto[method] = function () {\r\n        if (!this._connectionstatechangepoly) {\r\n          this._connectionstatechangepoly = function (e) {\r\n            var pc = e.target;\r\n            if (pc._lastConnectionState !== pc.connectionState) {\r\n              pc._lastConnectionState = pc.connectionState;\r\n              var newEvent = new Event('connectionstatechange', e);\r\n              pc.dispatchEvent(newEvent);\r\n            }\r\n            return e;\r\n          };\r\n          this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\r\n        }\r\n        return origMethod.apply(this, arguments);\r\n      };\r\n    });\r\n  }\r\n  \r\n  function removeAllowExtmapMixed(window) {\r\n    /* remove a=extmap-allow-mixed for webrtc.org < M71 */\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    var browserDetails = utils.detectBrowser(window);\r\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\r\n      return;\r\n    }\r\n    if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\r\n      return;\r\n    }\r\n    var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\r\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\r\n      if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\r\n        desc.sdp = desc.sdp.split('\\n').filter(function (line) {\r\n          return line.trim() !== 'a=extmap-allow-mixed';\r\n        }).join('\\n');\r\n      }\r\n      return nativeSRD.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  },{\"./utils\":15,\"sdp\":17}],7:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\r\n  \r\n  var _getusermedia = require('./getusermedia');\r\n  \r\n  Object.defineProperty(exports, 'shimGetUserMedia', {\r\n    enumerable: true,\r\n    get: function get() {\r\n      return _getusermedia.shimGetUserMedia;\r\n    }\r\n  });\r\n  \r\n  var _getdisplaymedia = require('./getdisplaymedia');\r\n  \r\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\r\n    enumerable: true,\r\n    get: function get() {\r\n      return _getdisplaymedia.shimGetDisplayMedia;\r\n    }\r\n  });\r\n  exports.shimPeerConnection = shimPeerConnection;\r\n  exports.shimReplaceTrack = shimReplaceTrack;\r\n  \r\n  var _utils = require('../utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  var _filtericeservers = require('./filtericeservers');\r\n  \r\n  var _rtcpeerconnectionShim = require('rtcpeerconnection-shim');\r\n  \r\n  var _rtcpeerconnectionShim2 = _interopRequireDefault(_rtcpeerconnectionShim);\r\n  \r\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  function shimPeerConnection(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n  \r\n    if (window.RTCIceGatherer) {\r\n      if (!window.RTCIceCandidate) {\r\n        window.RTCIceCandidate = function RTCIceCandidate(args) {\r\n          return args;\r\n        };\r\n      }\r\n      if (!window.RTCSessionDescription) {\r\n        window.RTCSessionDescription = function RTCSessionDescription(args) {\r\n          return args;\r\n        };\r\n      }\r\n      // this adds an additional event listener to MediaStrackTrack that signals\r\n      // when a tracks enabled property was changed. Workaround for a bug in\r\n      // addStream, see below. No longer required in 15025+\r\n      if (browserDetails.version < 15025) {\r\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\r\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\r\n          set: function set(value) {\r\n            origMSTEnabled.set.call(this, value);\r\n            var ev = new Event('enabled');\r\n            ev.enabled = value;\r\n            this.dispatchEvent(ev);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  \r\n    // ORTC defines the DTMF sender a bit different.\r\n    // https://github.com/w3c/ortc/issues/714\r\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\r\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\r\n        get: function get() {\r\n          if (this._dtmf === undefined) {\r\n            if (this.track.kind === 'audio') {\r\n              this._dtmf = new window.RTCDtmfSender(this);\r\n            } else if (this.track.kind === 'video') {\r\n              this._dtmf = null;\r\n            }\r\n          }\r\n          return this._dtmf;\r\n        }\r\n      });\r\n    }\r\n    // Edge currently only implements the RTCDtmfSender, not the\r\n    // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\r\n    if (window.RTCDtmfSender && !window.RTCDTMFSender) {\r\n      window.RTCDTMFSender = window.RTCDtmfSender;\r\n    }\r\n  \r\n    var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim2.default)(window, browserDetails.version);\r\n    window.RTCPeerConnection = function RTCPeerConnection(config) {\r\n      if (config && config.iceServers) {\r\n        config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\r\n        utils.log('ICE servers after filtering:', config.iceServers);\r\n      }\r\n      return new RTCPeerConnectionShim(config);\r\n    };\r\n    window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\r\n  }\r\n  \r\n  function shimReplaceTrack(window) {\r\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\r\n    if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\r\n      window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\r\n    }\r\n  }\r\n  \r\n  },{\"../utils\":15,\"./filtericeservers\":8,\"./getdisplaymedia\":9,\"./getusermedia\":10,\"rtcpeerconnection-shim\":16}],8:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.filterIceServers = filterIceServers;\r\n  \r\n  var _utils = require('../utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  // Edge does not like\r\n  // 1) stun: filtered after 14393 unless ?transport=udp is present\r\n  // 2) turn: that does not have all of turn:host:port?transport=udp\r\n  // 3) turn: with ipv6 addresses\r\n  // 4) turn: occurring muliple times\r\n  function filterIceServers(iceServers, edgeVersion) {\r\n    var hasTurn = false;\r\n    iceServers = JSON.parse(JSON.stringify(iceServers));\r\n    return iceServers.filter(function (server) {\r\n      if (server && (server.urls || server.url)) {\r\n        var urls = server.urls || server.url;\r\n        if (server.url && !server.urls) {\r\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\r\n        }\r\n        var isString = typeof urls === 'string';\r\n        if (isString) {\r\n          urls = [urls];\r\n        }\r\n        urls = urls.filter(function (url) {\r\n          // filter STUN unconditionally.\r\n          if (url.indexOf('stun:') === 0) {\r\n            return false;\r\n          }\r\n  \r\n          var validTurn = url.startsWith('turn') && !url.startsWith('turn:[') && url.includes('transport=udp');\r\n          if (validTurn && !hasTurn) {\r\n            hasTurn = true;\r\n            return true;\r\n          }\r\n          return validTurn && !hasTurn;\r\n        });\r\n  \r\n        delete server.url;\r\n        server.urls = isString ? urls[0] : urls;\r\n        return !!urls.length;\r\n      }\r\n    });\r\n  }\r\n  \r\n  },{\"../utils\":15}],9:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\r\n  function shimGetDisplayMedia(window) {\r\n    if (!('getDisplayMedia' in window.navigator)) {\r\n      return;\r\n    }\r\n    if (!window.navigator.mediaDevices) {\r\n      return;\r\n    }\r\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\r\n      return;\r\n    }\r\n    window.navigator.mediaDevices.getDisplayMedia = window.navigator.getDisplayMedia.bind(window.navigator);\r\n  }\r\n  \r\n  },{}],10:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetUserMedia = shimGetUserMedia;\r\n  function shimGetUserMedia(window) {\r\n    var navigator = window && window.navigator;\r\n  \r\n    var shimError_ = function shimError_(e) {\r\n      return {\r\n        name: { PermissionDeniedError: 'NotAllowedError' }[e.name] || e.name,\r\n        message: e.message,\r\n        constraint: e.constraint,\r\n        toString: function toString() {\r\n          return this.name;\r\n        }\r\n      };\r\n    };\r\n  \r\n    // getUserMedia error shim.\r\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\r\n    navigator.mediaDevices.getUserMedia = function (c) {\r\n      return origGetUserMedia(c).catch(function (e) {\r\n        return Promise.reject(shimError_(e));\r\n      });\r\n    };\r\n  }\r\n  \r\n  },{}],11:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  var _getusermedia = require('./getusermedia');\r\n  \r\n  Object.defineProperty(exports, 'shimGetUserMedia', {\r\n    enumerable: true,\r\n    get: function get() {\r\n      return _getusermedia.shimGetUserMedia;\r\n    }\r\n  });\r\n  \r\n  var _getdisplaymedia = require('./getdisplaymedia');\r\n  \r\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\r\n    enumerable: true,\r\n    get: function get() {\r\n      return _getdisplaymedia.shimGetDisplayMedia;\r\n    }\r\n  });\r\n  exports.shimOnTrack = shimOnTrack;\r\n  exports.shimPeerConnection = shimPeerConnection;\r\n  exports.shimSenderGetStats = shimSenderGetStats;\r\n  exports.shimReceiverGetStats = shimReceiverGetStats;\r\n  exports.shimRemoveStream = shimRemoveStream;\r\n  exports.shimRTCDataChannel = shimRTCDataChannel;\r\n  exports.shimAddTransceiver = shimAddTransceiver;\r\n  exports.shimGetParameters = shimGetParameters;\r\n  exports.shimCreateOffer = shimCreateOffer;\r\n  exports.shimCreateAnswer = shimCreateAnswer;\r\n  \r\n  var _utils = require('../utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n  \r\n  function shimOnTrack(window) {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\r\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\r\n        get: function get() {\r\n          return { receiver: this.receiver };\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  function shimPeerConnection(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n  \r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\r\n      return; // probably media.peerconnection.enabled=false in about:config\r\n    }\r\n    if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\r\n      // very basic support for old versions.\r\n      window.RTCPeerConnection = window.mozRTCPeerConnection;\r\n    }\r\n  \r\n    if (browserDetails.version < 53) {\r\n      // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\r\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\r\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n        var methodObj = _defineProperty({}, method, function () {\r\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\r\n          return nativeMethod.apply(this, arguments);\r\n        });\r\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\r\n      });\r\n    }\r\n  \r\n    // support for addIceCandidate(null or undefined)\r\n    // as well as ignoring {sdpMid, candidate: \"\"}\r\n    if (browserDetails.version < 68) {\r\n      var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\r\n      window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\r\n        if (!arguments[0]) {\r\n          if (arguments[1]) {\r\n            arguments[1].apply(null);\r\n          }\r\n          return Promise.resolve();\r\n        }\r\n        // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\r\n        // in older versions.\r\n        if (arguments[0] && arguments[0].candidate === '') {\r\n          return Promise.resolve();\r\n        }\r\n        return nativeAddIceCandidate.apply(this, arguments);\r\n      };\r\n    }\r\n  \r\n    var modernStatsTypes = {\r\n      inboundrtp: 'inbound-rtp',\r\n      outboundrtp: 'outbound-rtp',\r\n      candidatepair: 'candidate-pair',\r\n      localcandidate: 'local-candidate',\r\n      remotecandidate: 'remote-candidate'\r\n    };\r\n  \r\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\r\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\r\n      var _arguments = Array.prototype.slice.call(arguments),\r\n          selector = _arguments[0],\r\n          onSucc = _arguments[1],\r\n          onErr = _arguments[2];\r\n  \r\n      return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\r\n        if (browserDetails.version < 53 && !onSucc) {\r\n          // Shim only promise getStats with spec-hyphens in type names\r\n          // Leave callback version alone; misc old uses of forEach before Map\r\n          try {\r\n            stats.forEach(function (stat) {\r\n              stat.type = modernStatsTypes[stat.type] || stat.type;\r\n            });\r\n          } catch (e) {\r\n            if (e.name !== 'TypeError') {\r\n              throw e;\r\n            }\r\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\r\n            stats.forEach(function (stat, i) {\r\n              stats.set(i, Object.assign({}, stat, {\r\n                type: modernStatsTypes[stat.type] || stat.type\r\n              }));\r\n            });\r\n          }\r\n        }\r\n        return stats;\r\n      }).then(onSucc, onErr);\r\n    };\r\n  }\r\n  \r\n  function shimSenderGetStats(window) {\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\r\n      return;\r\n    }\r\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\r\n      return;\r\n    }\r\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\r\n    if (origGetSenders) {\r\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\r\n        var _this = this;\r\n  \r\n        var senders = origGetSenders.apply(this, []);\r\n        senders.forEach(function (sender) {\r\n          return sender._pc = _this;\r\n        });\r\n        return senders;\r\n      };\r\n    }\r\n  \r\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\r\n    if (origAddTrack) {\r\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\r\n        var sender = origAddTrack.apply(this, arguments);\r\n        sender._pc = this;\r\n        return sender;\r\n      };\r\n    }\r\n    window.RTCRtpSender.prototype.getStats = function getStats() {\r\n      return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\r\n    };\r\n  }\r\n  \r\n  function shimReceiverGetStats(window) {\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\r\n      return;\r\n    }\r\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\r\n      return;\r\n    }\r\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\r\n    if (origGetReceivers) {\r\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\r\n        var _this2 = this;\r\n  \r\n        var receivers = origGetReceivers.apply(this, []);\r\n        receivers.forEach(function (receiver) {\r\n          return receiver._pc = _this2;\r\n        });\r\n        return receivers;\r\n      };\r\n    }\r\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\r\n      e.receiver._pc = e.srcElement;\r\n      return e;\r\n    });\r\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\r\n      return this._pc.getStats(this.track);\r\n    };\r\n  }\r\n  \r\n  function shimRemoveStream(window) {\r\n    if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\r\n      return;\r\n    }\r\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\r\n      var _this3 = this;\r\n  \r\n      utils.deprecated('removeStream', 'removeTrack');\r\n      this.getSenders().forEach(function (sender) {\r\n        if (sender.track && stream.getTracks().includes(sender.track)) {\r\n          _this3.removeTrack(sender);\r\n        }\r\n      });\r\n    };\r\n  }\r\n  \r\n  function shimRTCDataChannel(window) {\r\n    // rename DataChannel to RTCDataChannel (native fix in FF60):\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\r\n    if (window.DataChannel && !window.RTCDataChannel) {\r\n      window.RTCDataChannel = window.DataChannel;\r\n    }\r\n  }\r\n  \r\n  function shimAddTransceiver(window) {\r\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\r\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\r\n      return;\r\n    }\r\n    var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\r\n    if (origAddTransceiver) {\r\n      window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\r\n        this.setParametersPromises = [];\r\n        var initParameters = arguments[1];\r\n        var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\r\n        if (shouldPerformCheck) {\r\n          // If sendEncodings params are provided, validate grammar\r\n          initParameters.sendEncodings.forEach(function (encodingParam) {\r\n            if ('rid' in encodingParam) {\r\n              var ridRegex = /^[a-z0-9]{0,16}$/i;\r\n              if (!ridRegex.test(encodingParam.rid)) {\r\n                throw new TypeError('Invalid RID value provided.');\r\n              }\r\n            }\r\n            if ('scaleResolutionDownBy' in encodingParam) {\r\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\r\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\r\n              }\r\n            }\r\n            if ('maxFramerate' in encodingParam) {\r\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\r\n                throw new RangeError('max_framerate must be >= 0.0');\r\n              }\r\n            }\r\n          });\r\n        }\r\n        var transceiver = origAddTransceiver.apply(this, arguments);\r\n        if (shouldPerformCheck) {\r\n          // Check if the init options were applied. If not we do this in an\r\n          // asynchronous way and save the promise reference in a global object.\r\n          // This is an ugly hack, but at the same time is way more robust than\r\n          // checking the sender parameters before and after the createOffer\r\n          // Also note that after the createoffer we are not 100% sure that\r\n          // the params were asynchronously applied so we might miss the\r\n          // opportunity to recreate offer.\r\n          var sender = transceiver.sender;\r\n  \r\n          var params = sender.getParameters();\r\n          if (!('encodings' in params) ||\r\n          // Avoid being fooled by patched getParameters() below.\r\n          params.encodings.length === 1 && Object.keys(params.encodings[0]).length === 0) {\r\n            params.encodings = initParameters.sendEncodings;\r\n            sender.sendEncodings = initParameters.sendEncodings;\r\n            this.setParametersPromises.push(sender.setParameters(params).then(function () {\r\n              delete sender.sendEncodings;\r\n            }).catch(function () {\r\n              delete sender.sendEncodings;\r\n            }));\r\n          }\r\n        }\r\n        return transceiver;\r\n      };\r\n    }\r\n  }\r\n  \r\n  function shimGetParameters(window) {\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCRtpSender)) {\r\n      return;\r\n    }\r\n    var origGetParameters = window.RTCRtpSender.prototype.getParameters;\r\n    if (origGetParameters) {\r\n      window.RTCRtpSender.prototype.getParameters = function getParameters() {\r\n        var params = origGetParameters.apply(this, arguments);\r\n        if (!('encodings' in params)) {\r\n          params.encodings = [].concat(this.sendEncodings || [{}]);\r\n        }\r\n        return params;\r\n      };\r\n    }\r\n  }\r\n  \r\n  function shimCreateOffer(window) {\r\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\r\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\r\n      return;\r\n    }\r\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\r\n    window.RTCPeerConnection.prototype.createOffer = function createOffer() {\r\n      var _this4 = this,\r\n          _arguments2 = arguments;\r\n  \r\n      if (this.setParametersPromises && this.setParametersPromises.length) {\r\n        return Promise.all(this.setParametersPromises).then(function () {\r\n          return origCreateOffer.apply(_this4, _arguments2);\r\n        }).finally(function () {\r\n          _this4.setParametersPromises = [];\r\n        });\r\n      }\r\n      return origCreateOffer.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  function shimCreateAnswer(window) {\r\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\r\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\r\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\r\n      return;\r\n    }\r\n    var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\r\n    window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\r\n      var _this5 = this,\r\n          _arguments3 = arguments;\r\n  \r\n      if (this.setParametersPromises && this.setParametersPromises.length) {\r\n        return Promise.all(this.setParametersPromises).then(function () {\r\n          return origCreateAnswer.apply(_this5, _arguments3);\r\n        }).finally(function () {\r\n          _this5.setParametersPromises = [];\r\n        });\r\n      }\r\n      return origCreateAnswer.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  },{\"../utils\":15,\"./getdisplaymedia\":12,\"./getusermedia\":13}],12:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\r\n  function shimGetDisplayMedia(window, preferredMediaSource) {\r\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\r\n      return;\r\n    }\r\n    if (!window.navigator.mediaDevices) {\r\n      return;\r\n    }\r\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\r\n      if (!(constraints && constraints.video)) {\r\n        var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\r\n        err.name = 'NotFoundError';\r\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\r\n        err.code = 8;\r\n        return Promise.reject(err);\r\n      }\r\n      if (constraints.video === true) {\r\n        constraints.video = { mediaSource: preferredMediaSource };\r\n      } else {\r\n        constraints.video.mediaSource = preferredMediaSource;\r\n      }\r\n      return window.navigator.mediaDevices.getUserMedia(constraints);\r\n    };\r\n  }\r\n  \r\n  },{}],13:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  exports.shimGetUserMedia = shimGetUserMedia;\r\n  \r\n  var _utils = require('../utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  function shimGetUserMedia(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n    var navigator = window && window.navigator;\r\n    var MediaStreamTrack = window && window.MediaStreamTrack;\r\n  \r\n    navigator.getUserMedia = function (constraints, onSuccess, onError) {\r\n      // Replace Firefox 44+'s deprecation warning with unprefixed version.\r\n      utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\r\n      navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\r\n    };\r\n  \r\n    if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\r\n      var remap = function remap(obj, a, b) {\r\n        if (a in obj && !(b in obj)) {\r\n          obj[b] = obj[a];\r\n          delete obj[a];\r\n        }\r\n      };\r\n  \r\n      var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\r\n      navigator.mediaDevices.getUserMedia = function (c) {\r\n        if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\r\n          c = JSON.parse(JSON.stringify(c));\r\n          remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\r\n          remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\r\n        }\r\n        return nativeGetUserMedia(c);\r\n      };\r\n  \r\n      if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\r\n        var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\r\n        MediaStreamTrack.prototype.getSettings = function () {\r\n          var obj = nativeGetSettings.apply(this, arguments);\r\n          remap(obj, 'mozAutoGainControl', 'autoGainControl');\r\n          remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\r\n          return obj;\r\n        };\r\n      }\r\n  \r\n      if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\r\n        var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\r\n        MediaStreamTrack.prototype.applyConstraints = function (c) {\r\n          if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\r\n            c = JSON.parse(JSON.stringify(c));\r\n            remap(c, 'autoGainControl', 'mozAutoGainControl');\r\n            remap(c, 'noiseSuppression', 'mozNoiseSuppression');\r\n          }\r\n          return nativeApplyConstraints.apply(this, [c]);\r\n        };\r\n      }\r\n    }\r\n  }\r\n  \r\n  },{\"../utils\":15}],14:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  exports.shimLocalStreamsAPI = shimLocalStreamsAPI;\r\n  exports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\r\n  exports.shimCallbacksAPI = shimCallbacksAPI;\r\n  exports.shimGetUserMedia = shimGetUserMedia;\r\n  exports.shimConstraints = shimConstraints;\r\n  exports.shimRTCIceServerUrls = shimRTCIceServerUrls;\r\n  exports.shimTrackEventTransceiver = shimTrackEventTransceiver;\r\n  exports.shimCreateOfferLegacy = shimCreateOfferLegacy;\r\n  exports.shimAudioContext = shimAudioContext;\r\n  \r\n  var _utils = require('../utils');\r\n  \r\n  var utils = _interopRequireWildcard(_utils);\r\n  \r\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n  \r\n  function shimLocalStreamsAPI(window) {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        return this._localStreams;\r\n      };\r\n    }\r\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\r\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\r\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\r\n        var _this = this;\r\n  \r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        if (!this._localStreams.includes(stream)) {\r\n          this._localStreams.push(stream);\r\n        }\r\n        // Try to emulate Chrome's behaviour of adding in audio-video order.\r\n        // Safari orders by track id.\r\n        stream.getAudioTracks().forEach(function (track) {\r\n          return _addTrack.call(_this, track, stream);\r\n        });\r\n        stream.getVideoTracks().forEach(function (track) {\r\n          return _addTrack.call(_this, track, stream);\r\n        });\r\n      };\r\n  \r\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\r\n        var _this2 = this;\r\n  \r\n        for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n          streams[_key - 1] = arguments[_key];\r\n        }\r\n  \r\n        if (streams) {\r\n          streams.forEach(function (stream) {\r\n            if (!_this2._localStreams) {\r\n              _this2._localStreams = [stream];\r\n            } else if (!_this2._localStreams.includes(stream)) {\r\n              _this2._localStreams.push(stream);\r\n            }\r\n          });\r\n        }\r\n        return _addTrack.apply(this, arguments);\r\n      };\r\n    }\r\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\r\n        var _this3 = this;\r\n  \r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        var index = this._localStreams.indexOf(stream);\r\n        if (index === -1) {\r\n          return;\r\n        }\r\n        this._localStreams.splice(index, 1);\r\n        var tracks = stream.getTracks();\r\n        this.getSenders().forEach(function (sender) {\r\n          if (tracks.includes(sender.track)) {\r\n            _this3.removeTrack(sender);\r\n          }\r\n        });\r\n      };\r\n    }\r\n  }\r\n  \r\n  function shimRemoteStreamsAPI(window) {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\r\n        return this._remoteStreams ? this._remoteStreams : [];\r\n      };\r\n    }\r\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\r\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\r\n        get: function get() {\r\n          return this._onaddstream;\r\n        },\r\n        set: function set(f) {\r\n          var _this4 = this;\r\n  \r\n          if (this._onaddstream) {\r\n            this.removeEventListener('addstream', this._onaddstream);\r\n            this.removeEventListener('track', this._onaddstreampoly);\r\n          }\r\n          this.addEventListener('addstream', this._onaddstream = f);\r\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\r\n            e.streams.forEach(function (stream) {\r\n              if (!_this4._remoteStreams) {\r\n                _this4._remoteStreams = [];\r\n              }\r\n              if (_this4._remoteStreams.includes(stream)) {\r\n                return;\r\n              }\r\n              _this4._remoteStreams.push(stream);\r\n              var event = new Event('addstream');\r\n              event.stream = stream;\r\n              _this4.dispatchEvent(event);\r\n            });\r\n          });\r\n        }\r\n      });\r\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\r\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\r\n        var pc = this;\r\n        if (!this._onaddstreampoly) {\r\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\r\n            e.streams.forEach(function (stream) {\r\n              if (!pc._remoteStreams) {\r\n                pc._remoteStreams = [];\r\n              }\r\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\r\n                return;\r\n              }\r\n              pc._remoteStreams.push(stream);\r\n              var event = new Event('addstream');\r\n              event.stream = stream;\r\n              pc.dispatchEvent(event);\r\n            });\r\n          });\r\n        }\r\n        return origSetRemoteDescription.apply(pc, arguments);\r\n      };\r\n    }\r\n  }\r\n  \r\n  function shimCallbacksAPI(window) {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    var prototype = window.RTCPeerConnection.prototype;\r\n    var origCreateOffer = prototype.createOffer;\r\n    var origCreateAnswer = prototype.createAnswer;\r\n    var setLocalDescription = prototype.setLocalDescription;\r\n    var setRemoteDescription = prototype.setRemoteDescription;\r\n    var addIceCandidate = prototype.addIceCandidate;\r\n  \r\n    prototype.createOffer = function createOffer(successCallback, failureCallback) {\r\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\r\n      var promise = origCreateOffer.apply(this, [options]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n  \r\n    prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\r\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\r\n      var promise = origCreateAnswer.apply(this, [options]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n  \r\n    var withCallback = function withCallback(description, successCallback, failureCallback) {\r\n      var promise = setLocalDescription.apply(this, [description]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n    prototype.setLocalDescription = withCallback;\r\n  \r\n    withCallback = function withCallback(description, successCallback, failureCallback) {\r\n      var promise = setRemoteDescription.apply(this, [description]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n    prototype.setRemoteDescription = withCallback;\r\n  \r\n    withCallback = function withCallback(candidate, successCallback, failureCallback) {\r\n      var promise = addIceCandidate.apply(this, [candidate]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n    prototype.addIceCandidate = withCallback;\r\n  }\r\n  \r\n  function shimGetUserMedia(window) {\r\n    var navigator = window && window.navigator;\r\n  \r\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n      // shim not needed in Safari 12.1\r\n      var mediaDevices = navigator.mediaDevices;\r\n      var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\r\n      navigator.mediaDevices.getUserMedia = function (constraints) {\r\n        return _getUserMedia(shimConstraints(constraints));\r\n      };\r\n    }\r\n  \r\n    if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n      navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\r\n        navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\r\n      }.bind(navigator);\r\n    }\r\n  }\r\n  \r\n  function shimConstraints(constraints) {\r\n    if (constraints && constraints.video !== undefined) {\r\n      return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\r\n    }\r\n  \r\n    return constraints;\r\n  }\r\n  \r\n  function shimRTCIceServerUrls(window) {\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\r\n    var OrigPeerConnection = window.RTCPeerConnection;\r\n    window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\r\n      if (pcConfig && pcConfig.iceServers) {\r\n        var newIceServers = [];\r\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\r\n          var server = pcConfig.iceServers[i];\r\n          if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\r\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\r\n            server = JSON.parse(JSON.stringify(server));\r\n            server.urls = server.url;\r\n            delete server.url;\r\n            newIceServers.push(server);\r\n          } else {\r\n            newIceServers.push(pcConfig.iceServers[i]);\r\n          }\r\n        }\r\n        pcConfig.iceServers = newIceServers;\r\n      }\r\n      return new OrigPeerConnection(pcConfig, pcConstraints);\r\n    };\r\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\r\n    // wrap static methods. Currently just generateCertificate.\r\n    if ('generateCertificate' in OrigPeerConnection) {\r\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\r\n        get: function get() {\r\n          return OrigPeerConnection.generateCertificate;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  function shimTrackEventTransceiver(window) {\r\n    // Add event.transceiver member over deprecated event.receiver\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\r\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\r\n        get: function get() {\r\n          return { receiver: this.receiver };\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  function shimCreateOfferLegacy(window) {\r\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\r\n    window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\r\n      if (offerOptions) {\r\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\r\n          // support bit values\r\n          offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\r\n        }\r\n        var audioTransceiver = this.getTransceivers().find(function (transceiver) {\r\n          return transceiver.receiver.track.kind === 'audio';\r\n        });\r\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\r\n          if (audioTransceiver.direction === 'sendrecv') {\r\n            if (audioTransceiver.setDirection) {\r\n              audioTransceiver.setDirection('sendonly');\r\n            } else {\r\n              audioTransceiver.direction = 'sendonly';\r\n            }\r\n          } else if (audioTransceiver.direction === 'recvonly') {\r\n            if (audioTransceiver.setDirection) {\r\n              audioTransceiver.setDirection('inactive');\r\n            } else {\r\n              audioTransceiver.direction = 'inactive';\r\n            }\r\n          }\r\n        } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\r\n          this.addTransceiver('audio');\r\n        }\r\n  \r\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\r\n          // support bit values\r\n          offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\r\n        }\r\n        var videoTransceiver = this.getTransceivers().find(function (transceiver) {\r\n          return transceiver.receiver.track.kind === 'video';\r\n        });\r\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\r\n          if (videoTransceiver.direction === 'sendrecv') {\r\n            if (videoTransceiver.setDirection) {\r\n              videoTransceiver.setDirection('sendonly');\r\n            } else {\r\n              videoTransceiver.direction = 'sendonly';\r\n            }\r\n          } else if (videoTransceiver.direction === 'recvonly') {\r\n            if (videoTransceiver.setDirection) {\r\n              videoTransceiver.setDirection('inactive');\r\n            } else {\r\n              videoTransceiver.direction = 'inactive';\r\n            }\r\n          }\r\n        } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\r\n          this.addTransceiver('video');\r\n        }\r\n      }\r\n      return origCreateOffer.apply(this, arguments);\r\n    };\r\n  }\r\n  \r\n  function shimAudioContext(window) {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\r\n      return;\r\n    }\r\n    window.AudioContext = window.webkitAudioContext;\r\n  }\r\n  \r\n  },{\"../utils\":15}],15:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  \r\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n  \r\n  exports.extractVersion = extractVersion;\r\n  exports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\r\n  exports.disableLog = disableLog;\r\n  exports.disableWarnings = disableWarnings;\r\n  exports.log = log;\r\n  exports.deprecated = deprecated;\r\n  exports.detectBrowser = detectBrowser;\r\n  exports.compactObject = compactObject;\r\n  exports.walkStats = walkStats;\r\n  exports.filterStats = filterStats;\r\n  \r\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n  \r\n  var logDisabled_ = true;\r\n  var deprecationWarnings_ = true;\r\n  \r\n  /**\r\n   * Extract browser version out of the provided user agent string.\r\n   *\r\n   * @param {!string} uastring userAgent string.\r\n   * @param {!string} expr Regular expression used as match criteria.\r\n   * @param {!number} pos position in the version string to be returned.\r\n   * @return {!number} browser version.\r\n   */\r\n  function extractVersion(uastring, expr, pos) {\r\n    var match = uastring.match(expr);\r\n    return match && match.length >= pos && parseInt(match[pos], 10);\r\n  }\r\n  \r\n  // Wraps the peerconnection event eventNameToWrap in a function\r\n  // which returns the modified event object (or false to prevent\r\n  // the event).\r\n  function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\r\n    if (!window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    var proto = window.RTCPeerConnection.prototype;\r\n    var nativeAddEventListener = proto.addEventListener;\r\n    proto.addEventListener = function (nativeEventName, cb) {\r\n      if (nativeEventName !== eventNameToWrap) {\r\n        return nativeAddEventListener.apply(this, arguments);\r\n      }\r\n      var wrappedCallback = function wrappedCallback(e) {\r\n        var modifiedEvent = wrapper(e);\r\n        if (modifiedEvent) {\r\n          if (cb.handleEvent) {\r\n            cb.handleEvent(modifiedEvent);\r\n          } else {\r\n            cb(modifiedEvent);\r\n          }\r\n        }\r\n      };\r\n      this._eventMap = this._eventMap || {};\r\n      if (!this._eventMap[eventNameToWrap]) {\r\n        this._eventMap[eventNameToWrap] = new Map();\r\n      }\r\n      this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\r\n      return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\r\n    };\r\n  \r\n    var nativeRemoveEventListener = proto.removeEventListener;\r\n    proto.removeEventListener = function (nativeEventName, cb) {\r\n      if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[eventNameToWrap]) {\r\n        return nativeRemoveEventListener.apply(this, arguments);\r\n      }\r\n      if (!this._eventMap[eventNameToWrap].has(cb)) {\r\n        return nativeRemoveEventListener.apply(this, arguments);\r\n      }\r\n      var unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\r\n      this._eventMap[eventNameToWrap].delete(cb);\r\n      if (this._eventMap[eventNameToWrap].size === 0) {\r\n        delete this._eventMap[eventNameToWrap];\r\n      }\r\n      if (Object.keys(this._eventMap).length === 0) {\r\n        delete this._eventMap;\r\n      }\r\n      return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\r\n    };\r\n  \r\n    Object.defineProperty(proto, 'on' + eventNameToWrap, {\r\n      get: function get() {\r\n        return this['_on' + eventNameToWrap];\r\n      },\r\n      set: function set(cb) {\r\n        if (this['_on' + eventNameToWrap]) {\r\n          this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\r\n          delete this['_on' + eventNameToWrap];\r\n        }\r\n        if (cb) {\r\n          this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\r\n        }\r\n      },\r\n  \r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n  }\r\n  \r\n  function disableLog(bool) {\r\n    if (typeof bool !== 'boolean') {\r\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\r\n    }\r\n    logDisabled_ = bool;\r\n    return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\r\n  }\r\n  \r\n  /**\r\n   * Disable or enable deprecation warnings\r\n   * @param {!boolean} bool set to true to disable warnings.\r\n   */\r\n  function disableWarnings(bool) {\r\n    if (typeof bool !== 'boolean') {\r\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\r\n    }\r\n    deprecationWarnings_ = !bool;\r\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\r\n  }\r\n  \r\n  function log() {\r\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\r\n      if (logDisabled_) {\r\n        return;\r\n      }\r\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\r\n        console.log.apply(console, arguments);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\r\n   */\r\n  function deprecated(oldMethod, newMethod) {\r\n    if (!deprecationWarnings_) {\r\n      return;\r\n    }\r\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\r\n  }\r\n  \r\n  /**\r\n   * Browser detector.\r\n   *\r\n   * @return {object} result containing browser and version\r\n   *     properties.\r\n   */\r\n  function detectBrowser(window) {\r\n    // Returned result object.\r\n    var result = { browser: null, version: null };\r\n  \r\n    // Fail early if it's not a browser\r\n    if (typeof window === 'undefined' || !window.navigator) {\r\n      result.browser = 'Not a browser.';\r\n      return result;\r\n    }\r\n  \r\n    var navigator = window.navigator;\r\n  \r\n  \r\n    if (navigator.mozGetUserMedia) {\r\n      // Firefox.\r\n      result.browser = 'firefox';\r\n      result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\r\n    } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\r\n      // Chrome, Chromium, Webview, Opera.\r\n      // Version matches Chrome/WebRTC version.\r\n      // Chrome 74 removed webkitGetUserMedia on http as well so we need the\r\n      // more complicated fallback to webkitRTCPeerConnection.\r\n      result.browser = 'chrome';\r\n      result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\r\n    } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\r\n      // Edge.\r\n      result.browser = 'edge';\r\n      result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\r\n    } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\r\n      // Safari.\r\n      result.browser = 'safari';\r\n      result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\r\n      result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\r\n    } else {\r\n      // Default fallthrough: not supported.\r\n      result.browser = 'Not a supported browser.';\r\n      return result;\r\n    }\r\n  \r\n    return result;\r\n  }\r\n  \r\n  /**\r\n   * Checks if something is an object.\r\n   *\r\n   * @param {*} val The something you want to check.\r\n   * @return true if val is an object, false otherwise.\r\n   */\r\n  function isObject(val) {\r\n    return Object.prototype.toString.call(val) === '[object Object]';\r\n  }\r\n  \r\n  /**\r\n   * Remove all empty objects and undefined values\r\n   * from a nested object -- an enhanced and vanilla version\r\n   * of Lodash's `compact`.\r\n   */\r\n  function compactObject(data) {\r\n    if (!isObject(data)) {\r\n      return data;\r\n    }\r\n  \r\n    return Object.keys(data).reduce(function (accumulator, key) {\r\n      var isObj = isObject(data[key]);\r\n      var value = isObj ? compactObject(data[key]) : data[key];\r\n      var isEmptyObject = isObj && !Object.keys(value).length;\r\n      if (value === undefined || isEmptyObject) {\r\n        return accumulator;\r\n      }\r\n      return Object.assign(accumulator, _defineProperty({}, key, value));\r\n    }, {});\r\n  }\r\n  \r\n  /* iterates the stats graph recursively. */\r\n  function walkStats(stats, base, resultSet) {\r\n    if (!base || resultSet.has(base.id)) {\r\n      return;\r\n    }\r\n    resultSet.set(base.id, base);\r\n    Object.keys(base).forEach(function (name) {\r\n      if (name.endsWith('Id')) {\r\n        walkStats(stats, stats.get(base[name]), resultSet);\r\n      } else if (name.endsWith('Ids')) {\r\n        base[name].forEach(function (id) {\r\n          walkStats(stats, stats.get(id), resultSet);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  \r\n  /* filter getStats for a sender/receiver track. */\r\n  function filterStats(result, track, outbound) {\r\n    var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\r\n    var filteredResult = new Map();\r\n    if (track === null) {\r\n      return filteredResult;\r\n    }\r\n    var trackStats = [];\r\n    result.forEach(function (value) {\r\n      if (value.type === 'track' && value.trackIdentifier === track.id) {\r\n        trackStats.push(value);\r\n      }\r\n    });\r\n    trackStats.forEach(function (trackStat) {\r\n      result.forEach(function (stats) {\r\n        if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\r\n          walkStats(result, stats, filteredResult);\r\n        }\r\n      });\r\n    });\r\n    return filteredResult;\r\n  }\r\n  \r\n  },{}],16:[function(require,module,exports){\r\n  /*\r\n   *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\r\n   *\r\n   *  Use of this source code is governed by a BSD-style license\r\n   *  that can be found in the LICENSE file in the root of the source\r\n   *  tree.\r\n   */\r\n   /* eslint-env node */\r\n  'use strict';\r\n  \r\n  var SDPUtils = require('sdp');\r\n  \r\n  function fixStatsType(stat) {\r\n    return {\r\n      inboundrtp: 'inbound-rtp',\r\n      outboundrtp: 'outbound-rtp',\r\n      candidatepair: 'candidate-pair',\r\n      localcandidate: 'local-candidate',\r\n      remotecandidate: 'remote-candidate'\r\n    }[stat.type] || stat.type;\r\n  }\r\n  \r\n  function writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\r\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\r\n  \r\n    // Map ICE parameters (ufrag, pwd) to SDP.\r\n    sdp += SDPUtils.writeIceParameters(\r\n        transceiver.iceGatherer.getLocalParameters());\r\n  \r\n    // Map DTLS parameters to SDP.\r\n    sdp += SDPUtils.writeDtlsParameters(\r\n        transceiver.dtlsTransport.getLocalParameters(),\r\n        type === 'offer' ? 'actpass' : dtlsRole || 'active');\r\n  \r\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\r\n  \r\n    if (transceiver.rtpSender && transceiver.rtpReceiver) {\r\n      sdp += 'a=sendrecv\\r\\n';\r\n    } else if (transceiver.rtpSender) {\r\n      sdp += 'a=sendonly\\r\\n';\r\n    } else if (transceiver.rtpReceiver) {\r\n      sdp += 'a=recvonly\\r\\n';\r\n    } else {\r\n      sdp += 'a=inactive\\r\\n';\r\n    }\r\n  \r\n    if (transceiver.rtpSender) {\r\n      var trackId = transceiver.rtpSender._initialTrackId ||\r\n          transceiver.rtpSender.track.id;\r\n      transceiver.rtpSender._initialTrackId = trackId;\r\n      // spec.\r\n      var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\r\n          trackId + '\\r\\n';\r\n      sdp += 'a=' + msid;\r\n      // for Chrome. Legacy should no longer be required.\r\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n          ' ' + msid;\r\n  \r\n      // RTX\r\n      if (transceiver.sendEncodingParameters[0].rtx) {\r\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n            ' ' + msid;\r\n        sdp += 'a=ssrc-group:FID ' +\r\n            transceiver.sendEncodingParameters[0].ssrc + ' ' +\r\n            transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n            '\\r\\n';\r\n      }\r\n    }\r\n    // FIXME: this should be written by writeRtpDescription.\r\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n    if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\r\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n          ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n    }\r\n    return sdp;\r\n  }\r\n  \r\n  // Edge does not like\r\n  // 1) stun: filtered after 14393 unless ?transport=udp is present\r\n  // 2) turn: that does not have all of turn:host:port?transport=udp\r\n  // 3) turn: with ipv6 addresses\r\n  // 4) turn: occurring muliple times\r\n  function filterIceServers(iceServers, edgeVersion) {\r\n    var hasTurn = false;\r\n    iceServers = JSON.parse(JSON.stringify(iceServers));\r\n    return iceServers.filter(function(server) {\r\n      if (server && (server.urls || server.url)) {\r\n        var urls = server.urls || server.url;\r\n        if (server.url && !server.urls) {\r\n          console.warn('RTCIceServer.url is deprecated! Use urls instead.');\r\n        }\r\n        var isString = typeof urls === 'string';\r\n        if (isString) {\r\n          urls = [urls];\r\n        }\r\n        urls = urls.filter(function(url) {\r\n          var validTurn = url.indexOf('turn:') === 0 &&\r\n              url.indexOf('transport=udp') !== -1 &&\r\n              url.indexOf('turn:[') === -1 &&\r\n              !hasTurn;\r\n  \r\n          if (validTurn) {\r\n            hasTurn = true;\r\n            return true;\r\n          }\r\n          return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\r\n              url.indexOf('?transport=udp') === -1;\r\n        });\r\n  \r\n        delete server.url;\r\n        server.urls = isString ? urls[0] : urls;\r\n        return !!urls.length;\r\n      }\r\n    });\r\n  }\r\n  \r\n  // Determines the intersection of local and remote capabilities.\r\n  function getCommonCapabilities(localCapabilities, remoteCapabilities) {\r\n    var commonCapabilities = {\r\n      codecs: [],\r\n      headerExtensions: [],\r\n      fecMechanisms: []\r\n    };\r\n  \r\n    var findCodecByPayloadType = function(pt, codecs) {\r\n      pt = parseInt(pt, 10);\r\n      for (var i = 0; i < codecs.length; i++) {\r\n        if (codecs[i].payloadType === pt ||\r\n            codecs[i].preferredPayloadType === pt) {\r\n          return codecs[i];\r\n        }\r\n      }\r\n    };\r\n  \r\n    var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\r\n      var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\r\n      var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\r\n      return lCodec && rCodec &&\r\n          lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\r\n    };\r\n  \r\n    localCapabilities.codecs.forEach(function(lCodec) {\r\n      for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\r\n        var rCodec = remoteCapabilities.codecs[i];\r\n        if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\r\n            lCodec.clockRate === rCodec.clockRate) {\r\n          if (lCodec.name.toLowerCase() === 'rtx' &&\r\n              lCodec.parameters && rCodec.parameters.apt) {\r\n            // for RTX we need to find the local rtx that has a apt\r\n            // which points to the same local codec as the remote one.\r\n            if (!rtxCapabilityMatches(lCodec, rCodec,\r\n                localCapabilities.codecs, remoteCapabilities.codecs)) {\r\n              continue;\r\n            }\r\n          }\r\n          rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\r\n          // number of channels is the highest common number of channels\r\n          rCodec.numChannels = Math.min(lCodec.numChannels,\r\n              rCodec.numChannels);\r\n          // push rCodec so we reply with offerer payload type\r\n          commonCapabilities.codecs.push(rCodec);\r\n  \r\n          // determine common feedback mechanisms\r\n          rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\r\n            for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\r\n              if (lCodec.rtcpFeedback[j].type === fb.type &&\r\n                  lCodec.rtcpFeedback[j].parameter === fb.parameter) {\r\n                return true;\r\n              }\r\n            }\r\n            return false;\r\n          });\r\n          // FIXME: also need to determine .parameters\r\n          //  see https://github.com/openpeer/ortc/issues/569\r\n          break;\r\n        }\r\n      }\r\n    });\r\n  \r\n    localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\r\n      for (var i = 0; i < remoteCapabilities.headerExtensions.length;\r\n           i++) {\r\n        var rHeaderExtension = remoteCapabilities.headerExtensions[i];\r\n        if (lHeaderExtension.uri === rHeaderExtension.uri) {\r\n          commonCapabilities.headerExtensions.push(rHeaderExtension);\r\n          break;\r\n        }\r\n      }\r\n    });\r\n  \r\n    // FIXME: fecMechanisms\r\n    return commonCapabilities;\r\n  }\r\n  \r\n  // is action=setLocalDescription with type allowed in signalingState\r\n  function isActionAllowedInSignalingState(action, type, signalingState) {\r\n    return {\r\n      offer: {\r\n        setLocalDescription: ['stable', 'have-local-offer'],\r\n        setRemoteDescription: ['stable', 'have-remote-offer']\r\n      },\r\n      answer: {\r\n        setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\r\n        setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\r\n      }\r\n    }[type][action].indexOf(signalingState) !== -1;\r\n  }\r\n  \r\n  function maybeAddCandidate(iceTransport, candidate) {\r\n    // Edge's internal representation adds some fields therefore\r\n    // not all fieldѕ are taken into account.\r\n    var alreadyAdded = iceTransport.getRemoteCandidates()\r\n        .find(function(remoteCandidate) {\r\n          return candidate.foundation === remoteCandidate.foundation &&\r\n              candidate.ip === remoteCandidate.ip &&\r\n              candidate.port === remoteCandidate.port &&\r\n              candidate.priority === remoteCandidate.priority &&\r\n              candidate.protocol === remoteCandidate.protocol &&\r\n              candidate.type === remoteCandidate.type;\r\n        });\r\n    if (!alreadyAdded) {\r\n      iceTransport.addRemoteCandidate(candidate);\r\n    }\r\n    return !alreadyAdded;\r\n  }\r\n  \r\n  \r\n  function makeError(name, description) {\r\n    var e = new Error(description);\r\n    e.name = name;\r\n    // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\r\n    e.code = {\r\n      NotSupportedError: 9,\r\n      InvalidStateError: 11,\r\n      InvalidAccessError: 15,\r\n      TypeError: undefined,\r\n      OperationError: undefined\r\n    }[name];\r\n    return e;\r\n  }\r\n  \r\n  module.exports = function(window, edgeVersion) {\r\n    // https://w3c.github.io/mediacapture-main/#mediastream\r\n    // Helper function to add the track to the stream and\r\n    // dispatch the event ourselves.\r\n    function addTrackToStreamAndFireEvent(track, stream) {\r\n      stream.addTrack(track);\r\n      stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\r\n          {track: track}));\r\n    }\r\n  \r\n    function removeTrackFromStreamAndFireEvent(track, stream) {\r\n      stream.removeTrack(track);\r\n      stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\r\n          {track: track}));\r\n    }\r\n  \r\n    function fireAddTrack(pc, track, receiver, streams) {\r\n      var trackEvent = new Event('track');\r\n      trackEvent.track = track;\r\n      trackEvent.receiver = receiver;\r\n      trackEvent.transceiver = {receiver: receiver};\r\n      trackEvent.streams = streams;\r\n      window.setTimeout(function() {\r\n        pc._dispatchEvent('track', trackEvent);\r\n      });\r\n    }\r\n  \r\n    var RTCPeerConnection = function(config) {\r\n      var pc = this;\r\n  \r\n      var _eventTarget = document.createDocumentFragment();\r\n      ['addEventListener', 'removeEventListener', 'dispatchEvent']\r\n          .forEach(function(method) {\r\n            pc[method] = _eventTarget[method].bind(_eventTarget);\r\n          });\r\n  \r\n      this.canTrickleIceCandidates = null;\r\n  \r\n      this.needNegotiation = false;\r\n  \r\n      this.localStreams = [];\r\n      this.remoteStreams = [];\r\n  \r\n      this._localDescription = null;\r\n      this._remoteDescription = null;\r\n  \r\n      this.signalingState = 'stable';\r\n      this.iceConnectionState = 'new';\r\n      this.connectionState = 'new';\r\n      this.iceGatheringState = 'new';\r\n  \r\n      config = JSON.parse(JSON.stringify(config || {}));\r\n  \r\n      this.usingBundle = config.bundlePolicy === 'max-bundle';\r\n      if (config.rtcpMuxPolicy === 'negotiate') {\r\n        throw(makeError('NotSupportedError',\r\n            'rtcpMuxPolicy \\'negotiate\\' is not supported'));\r\n      } else if (!config.rtcpMuxPolicy) {\r\n        config.rtcpMuxPolicy = 'require';\r\n      }\r\n  \r\n      switch (config.iceTransportPolicy) {\r\n        case 'all':\r\n        case 'relay':\r\n          break;\r\n        default:\r\n          config.iceTransportPolicy = 'all';\r\n          break;\r\n      }\r\n  \r\n      switch (config.bundlePolicy) {\r\n        case 'balanced':\r\n        case 'max-compat':\r\n        case 'max-bundle':\r\n          break;\r\n        default:\r\n          config.bundlePolicy = 'balanced';\r\n          break;\r\n      }\r\n  \r\n      config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\r\n  \r\n      this._iceGatherers = [];\r\n      if (config.iceCandidatePoolSize) {\r\n        for (var i = config.iceCandidatePoolSize; i > 0; i--) {\r\n          this._iceGatherers.push(new window.RTCIceGatherer({\r\n            iceServers: config.iceServers,\r\n            gatherPolicy: config.iceTransportPolicy\r\n          }));\r\n        }\r\n      } else {\r\n        config.iceCandidatePoolSize = 0;\r\n      }\r\n  \r\n      this._config = config;\r\n  \r\n      // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\r\n      // everything that is needed to describe a SDP m-line.\r\n      this.transceivers = [];\r\n  \r\n      this._sdpSessionId = SDPUtils.generateSessionId();\r\n      this._sdpSessionVersion = 0;\r\n  \r\n      this._dtlsRole = undefined; // role for a=setup to use in answers.\r\n  \r\n      this._isClosed = false;\r\n    };\r\n  \r\n    Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\r\n      configurable: true,\r\n      get: function() {\r\n        return this._localDescription;\r\n      }\r\n    });\r\n    Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\r\n      configurable: true,\r\n      get: function() {\r\n        return this._remoteDescription;\r\n      }\r\n    });\r\n  \r\n    // set up event handlers on prototype\r\n    RTCPeerConnection.prototype.onicecandidate = null;\r\n    RTCPeerConnection.prototype.onaddstream = null;\r\n    RTCPeerConnection.prototype.ontrack = null;\r\n    RTCPeerConnection.prototype.onremovestream = null;\r\n    RTCPeerConnection.prototype.onsignalingstatechange = null;\r\n    RTCPeerConnection.prototype.oniceconnectionstatechange = null;\r\n    RTCPeerConnection.prototype.onconnectionstatechange = null;\r\n    RTCPeerConnection.prototype.onicegatheringstatechange = null;\r\n    RTCPeerConnection.prototype.onnegotiationneeded = null;\r\n    RTCPeerConnection.prototype.ondatachannel = null;\r\n  \r\n    RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\r\n      if (this._isClosed) {\r\n        return;\r\n      }\r\n      this.dispatchEvent(event);\r\n      if (typeof this['on' + name] === 'function') {\r\n        this['on' + name](event);\r\n      }\r\n    };\r\n  \r\n    RTCPeerConnection.prototype._emitGatheringStateChange = function() {\r\n      var event = new Event('icegatheringstatechange');\r\n      this._dispatchEvent('icegatheringstatechange', event);\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.getConfiguration = function() {\r\n      return this._config;\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.getLocalStreams = function() {\r\n      return this.localStreams;\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.getRemoteStreams = function() {\r\n      return this.remoteStreams;\r\n    };\r\n  \r\n    // internal helper to create a transceiver object.\r\n    // (which is not yet the same as the WebRTC 1.0 transceiver)\r\n    RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\r\n      var hasBundleTransport = this.transceivers.length > 0;\r\n      var transceiver = {\r\n        track: null,\r\n        iceGatherer: null,\r\n        iceTransport: null,\r\n        dtlsTransport: null,\r\n        localCapabilities: null,\r\n        remoteCapabilities: null,\r\n        rtpSender: null,\r\n        rtpReceiver: null,\r\n        kind: kind,\r\n        mid: null,\r\n        sendEncodingParameters: null,\r\n        recvEncodingParameters: null,\r\n        stream: null,\r\n        associatedRemoteMediaStreams: [],\r\n        wantReceive: true\r\n      };\r\n      if (this.usingBundle && hasBundleTransport) {\r\n        transceiver.iceTransport = this.transceivers[0].iceTransport;\r\n        transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\r\n      } else {\r\n        var transports = this._createIceAndDtlsTransports();\r\n        transceiver.iceTransport = transports.iceTransport;\r\n        transceiver.dtlsTransport = transports.dtlsTransport;\r\n      }\r\n      if (!doNotAdd) {\r\n        this.transceivers.push(transceiver);\r\n      }\r\n      return transceiver;\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.addTrack = function(track, stream) {\r\n      if (this._isClosed) {\r\n        throw makeError('InvalidStateError',\r\n            'Attempted to call addTrack on a closed peerconnection.');\r\n      }\r\n  \r\n      var alreadyExists = this.transceivers.find(function(s) {\r\n        return s.track === track;\r\n      });\r\n  \r\n      if (alreadyExists) {\r\n        throw makeError('InvalidAccessError', 'Track already exists.');\r\n      }\r\n  \r\n      var transceiver;\r\n      for (var i = 0; i < this.transceivers.length; i++) {\r\n        if (!this.transceivers[i].track &&\r\n            this.transceivers[i].kind === track.kind) {\r\n          transceiver = this.transceivers[i];\r\n        }\r\n      }\r\n      if (!transceiver) {\r\n        transceiver = this._createTransceiver(track.kind);\r\n      }\r\n  \r\n      this._maybeFireNegotiationNeeded();\r\n  \r\n      if (this.localStreams.indexOf(stream) === -1) {\r\n        this.localStreams.push(stream);\r\n      }\r\n  \r\n      transceiver.track = track;\r\n      transceiver.stream = stream;\r\n      transceiver.rtpSender = new window.RTCRtpSender(track,\r\n          transceiver.dtlsTransport);\r\n      return transceiver.rtpSender;\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.addStream = function(stream) {\r\n      var pc = this;\r\n      if (edgeVersion >= 15025) {\r\n        stream.getTracks().forEach(function(track) {\r\n          pc.addTrack(track, stream);\r\n        });\r\n      } else {\r\n        // Clone is necessary for local demos mostly, attaching directly\r\n        // to two different senders does not work (build 10547).\r\n        // Fixed in 15025 (or earlier)\r\n        var clonedStream = stream.clone();\r\n        stream.getTracks().forEach(function(track, idx) {\r\n          var clonedTrack = clonedStream.getTracks()[idx];\r\n          track.addEventListener('enabled', function(event) {\r\n            clonedTrack.enabled = event.enabled;\r\n          });\r\n        });\r\n        clonedStream.getTracks().forEach(function(track) {\r\n          pc.addTrack(track, clonedStream);\r\n        });\r\n      }\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.removeTrack = function(sender) {\r\n      if (this._isClosed) {\r\n        throw makeError('InvalidStateError',\r\n            'Attempted to call removeTrack on a closed peerconnection.');\r\n      }\r\n  \r\n      if (!(sender instanceof window.RTCRtpSender)) {\r\n        throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\r\n            'does not implement interface RTCRtpSender.');\r\n      }\r\n  \r\n      var transceiver = this.transceivers.find(function(t) {\r\n        return t.rtpSender === sender;\r\n      });\r\n  \r\n      if (!transceiver) {\r\n        throw makeError('InvalidAccessError',\r\n            'Sender was not created by this connection.');\r\n      }\r\n      var stream = transceiver.stream;\r\n  \r\n      transceiver.rtpSender.stop();\r\n      transceiver.rtpSender = null;\r\n      transceiver.track = null;\r\n      transceiver.stream = null;\r\n  \r\n      // remove the stream from the set of local streams\r\n      var localStreams = this.transceivers.map(function(t) {\r\n        return t.stream;\r\n      });\r\n      if (localStreams.indexOf(stream) === -1 &&\r\n          this.localStreams.indexOf(stream) > -1) {\r\n        this.localStreams.splice(this.localStreams.indexOf(stream), 1);\r\n      }\r\n  \r\n      this._maybeFireNegotiationNeeded();\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.removeStream = function(stream) {\r\n      var pc = this;\r\n      stream.getTracks().forEach(function(track) {\r\n        var sender = pc.getSenders().find(function(s) {\r\n          return s.track === track;\r\n        });\r\n        if (sender) {\r\n          pc.removeTrack(sender);\r\n        }\r\n      });\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.getSenders = function() {\r\n      return this.transceivers.filter(function(transceiver) {\r\n        return !!transceiver.rtpSender;\r\n      })\r\n      .map(function(transceiver) {\r\n        return transceiver.rtpSender;\r\n      });\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.getReceivers = function() {\r\n      return this.transceivers.filter(function(transceiver) {\r\n        return !!transceiver.rtpReceiver;\r\n      })\r\n      .map(function(transceiver) {\r\n        return transceiver.rtpReceiver;\r\n      });\r\n    };\r\n  \r\n  \r\n    RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\r\n        usingBundle) {\r\n      var pc = this;\r\n      if (usingBundle && sdpMLineIndex > 0) {\r\n        return this.transceivers[0].iceGatherer;\r\n      } else if (this._iceGatherers.length) {\r\n        return this._iceGatherers.shift();\r\n      }\r\n      var iceGatherer = new window.RTCIceGatherer({\r\n        iceServers: this._config.iceServers,\r\n        gatherPolicy: this._config.iceTransportPolicy\r\n      });\r\n      Object.defineProperty(iceGatherer, 'state',\r\n          {value: 'new', writable: true}\r\n      );\r\n  \r\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\r\n      this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\r\n        var end = !event.candidate || Object.keys(event.candidate).length === 0;\r\n        // polyfill since RTCIceGatherer.state is not implemented in\r\n        // Edge 10547 yet.\r\n        iceGatherer.state = end ? 'completed' : 'gathering';\r\n        if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\r\n          pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\r\n        }\r\n      };\r\n      iceGatherer.addEventListener('localcandidate',\r\n        this.transceivers[sdpMLineIndex].bufferCandidates);\r\n      return iceGatherer;\r\n    };\r\n  \r\n    // start gathering from an RTCIceGatherer.\r\n    RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\r\n      var pc = this;\r\n      var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\r\n      if (iceGatherer.onlocalcandidate) {\r\n        return;\r\n      }\r\n      var bufferedCandidateEvents =\r\n        this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\r\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\r\n      iceGatherer.removeEventListener('localcandidate',\r\n        this.transceivers[sdpMLineIndex].bufferCandidates);\r\n      iceGatherer.onlocalcandidate = function(evt) {\r\n        if (pc.usingBundle && sdpMLineIndex > 0) {\r\n          // if we know that we use bundle we can drop candidates with\r\n          // ѕdpMLineIndex > 0. If we don't do this then our state gets\r\n          // confused since we dispose the extra ice gatherer.\r\n          return;\r\n        }\r\n        var event = new Event('icecandidate');\r\n        event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\r\n  \r\n        var cand = evt.candidate;\r\n        // Edge emits an empty object for RTCIceCandidateComplete‥\r\n        var end = !cand || Object.keys(cand).length === 0;\r\n        if (end) {\r\n          // polyfill since RTCIceGatherer.state is not implemented in\r\n          // Edge 10547 yet.\r\n          if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\r\n            iceGatherer.state = 'completed';\r\n          }\r\n        } else {\r\n          if (iceGatherer.state === 'new') {\r\n            iceGatherer.state = 'gathering';\r\n          }\r\n          // RTCIceCandidate doesn't have a component, needs to be added\r\n          cand.component = 1;\r\n          // also the usernameFragment. TODO: update SDP to take both variants.\r\n          cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\r\n  \r\n          var serializedCandidate = SDPUtils.writeCandidate(cand);\r\n          event.candidate = Object.assign(event.candidate,\r\n              SDPUtils.parseCandidate(serializedCandidate));\r\n  \r\n          event.candidate.candidate = serializedCandidate;\r\n          event.candidate.toJSON = function() {\r\n            return {\r\n              candidate: event.candidate.candidate,\r\n              sdpMid: event.candidate.sdpMid,\r\n              sdpMLineIndex: event.candidate.sdpMLineIndex,\r\n              usernameFragment: event.candidate.usernameFragment\r\n            };\r\n          };\r\n        }\r\n  \r\n        // update local description.\r\n        var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\r\n        if (!end) {\r\n          sections[event.candidate.sdpMLineIndex] +=\r\n              'a=' + event.candidate.candidate + '\\r\\n';\r\n        } else {\r\n          sections[event.candidate.sdpMLineIndex] +=\r\n              'a=end-of-candidates\\r\\n';\r\n        }\r\n        pc._localDescription.sdp =\r\n            SDPUtils.getDescription(pc._localDescription.sdp) +\r\n            sections.join('');\r\n        var complete = pc.transceivers.every(function(transceiver) {\r\n          return transceiver.iceGatherer &&\r\n              transceiver.iceGatherer.state === 'completed';\r\n        });\r\n  \r\n        if (pc.iceGatheringState !== 'gathering') {\r\n          pc.iceGatheringState = 'gathering';\r\n          pc._emitGatheringStateChange();\r\n        }\r\n  \r\n        // Emit candidate. Also emit null candidate when all gatherers are\r\n        // complete.\r\n        if (!end) {\r\n          pc._dispatchEvent('icecandidate', event);\r\n        }\r\n        if (complete) {\r\n          pc._dispatchEvent('icecandidate', new Event('icecandidate'));\r\n          pc.iceGatheringState = 'complete';\r\n          pc._emitGatheringStateChange();\r\n        }\r\n      };\r\n  \r\n      // emit already gathered candidates.\r\n      window.setTimeout(function() {\r\n        bufferedCandidateEvents.forEach(function(e) {\r\n          iceGatherer.onlocalcandidate(e);\r\n        });\r\n      }, 0);\r\n    };\r\n  \r\n    // Create ICE transport and DTLS transport.\r\n    RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\r\n      var pc = this;\r\n      var iceTransport = new window.RTCIceTransport(null);\r\n      iceTransport.onicestatechange = function() {\r\n        pc._updateIceConnectionState();\r\n        pc._updateConnectionState();\r\n      };\r\n  \r\n      var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\r\n      dtlsTransport.ondtlsstatechange = function() {\r\n        pc._updateConnectionState();\r\n      };\r\n      dtlsTransport.onerror = function() {\r\n        // onerror does not set state to failed by itself.\r\n        Object.defineProperty(dtlsTransport, 'state',\r\n            {value: 'failed', writable: true});\r\n        pc._updateConnectionState();\r\n      };\r\n  \r\n      return {\r\n        iceTransport: iceTransport,\r\n        dtlsTransport: dtlsTransport\r\n      };\r\n    };\r\n  \r\n    // Destroy ICE gatherer, ICE transport and DTLS transport.\r\n    // Without triggering the callbacks.\r\n    RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\r\n        sdpMLineIndex) {\r\n      var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\r\n      if (iceGatherer) {\r\n        delete iceGatherer.onlocalcandidate;\r\n        delete this.transceivers[sdpMLineIndex].iceGatherer;\r\n      }\r\n      var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\r\n      if (iceTransport) {\r\n        delete iceTransport.onicestatechange;\r\n        delete this.transceivers[sdpMLineIndex].iceTransport;\r\n      }\r\n      var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\r\n      if (dtlsTransport) {\r\n        delete dtlsTransport.ondtlsstatechange;\r\n        delete dtlsTransport.onerror;\r\n        delete this.transceivers[sdpMLineIndex].dtlsTransport;\r\n      }\r\n    };\r\n  \r\n    // Start the RTP Sender and Receiver for a transceiver.\r\n    RTCPeerConnection.prototype._transceive = function(transceiver,\r\n        send, recv) {\r\n      var params = getCommonCapabilities(transceiver.localCapabilities,\r\n          transceiver.remoteCapabilities);\r\n      if (send && transceiver.rtpSender) {\r\n        params.encodings = transceiver.sendEncodingParameters;\r\n        params.rtcp = {\r\n          cname: SDPUtils.localCName,\r\n          compound: transceiver.rtcpParameters.compound\r\n        };\r\n        if (transceiver.recvEncodingParameters.length) {\r\n          params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\r\n        }\r\n        transceiver.rtpSender.send(params);\r\n      }\r\n      if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\r\n        // remove RTX field in Edge 14942\r\n        if (transceiver.kind === 'video'\r\n            && transceiver.recvEncodingParameters\r\n            && edgeVersion < 15019) {\r\n          transceiver.recvEncodingParameters.forEach(function(p) {\r\n            delete p.rtx;\r\n          });\r\n        }\r\n        if (transceiver.recvEncodingParameters.length) {\r\n          params.encodings = transceiver.recvEncodingParameters;\r\n        } else {\r\n          params.encodings = [{}];\r\n        }\r\n        params.rtcp = {\r\n          compound: transceiver.rtcpParameters.compound\r\n        };\r\n        if (transceiver.rtcpParameters.cname) {\r\n          params.rtcp.cname = transceiver.rtcpParameters.cname;\r\n        }\r\n        if (transceiver.sendEncodingParameters.length) {\r\n          params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\r\n        }\r\n        transceiver.rtpReceiver.receive(params);\r\n      }\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.setLocalDescription = function(description) {\r\n      var pc = this;\r\n  \r\n      // Note: pranswer is not supported.\r\n      if (['offer', 'answer'].indexOf(description.type) === -1) {\r\n        return Promise.reject(makeError('TypeError',\r\n            'Unsupported type \"' + description.type + '\"'));\r\n      }\r\n  \r\n      if (!isActionAllowedInSignalingState('setLocalDescription',\r\n          description.type, pc.signalingState) || pc._isClosed) {\r\n        return Promise.reject(makeError('InvalidStateError',\r\n            'Can not set local ' + description.type +\r\n            ' in state ' + pc.signalingState));\r\n      }\r\n  \r\n      var sections;\r\n      var sessionpart;\r\n      if (description.type === 'offer') {\r\n        // VERY limited support for SDP munging. Limited to:\r\n        // * changing the order of codecs\r\n        sections = SDPUtils.splitSections(description.sdp);\r\n        sessionpart = sections.shift();\r\n        sections.forEach(function(mediaSection, sdpMLineIndex) {\r\n          var caps = SDPUtils.parseRtpParameters(mediaSection);\r\n          pc.transceivers[sdpMLineIndex].localCapabilities = caps;\r\n        });\r\n  \r\n        pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n          pc._gather(transceiver.mid, sdpMLineIndex);\r\n        });\r\n      } else if (description.type === 'answer') {\r\n        sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\r\n        sessionpart = sections.shift();\r\n        var isIceLite = SDPUtils.matchPrefix(sessionpart,\r\n            'a=ice-lite').length > 0;\r\n        sections.forEach(function(mediaSection, sdpMLineIndex) {\r\n          var transceiver = pc.transceivers[sdpMLineIndex];\r\n          var iceGatherer = transceiver.iceGatherer;\r\n          var iceTransport = transceiver.iceTransport;\r\n          var dtlsTransport = transceiver.dtlsTransport;\r\n          var localCapabilities = transceiver.localCapabilities;\r\n          var remoteCapabilities = transceiver.remoteCapabilities;\r\n  \r\n          // treat bundle-only as not-rejected.\r\n          var rejected = SDPUtils.isRejected(mediaSection) &&\r\n              SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\r\n  \r\n          if (!rejected && !transceiver.rejected) {\r\n            var remoteIceParameters = SDPUtils.getIceParameters(\r\n                mediaSection, sessionpart);\r\n            var remoteDtlsParameters = SDPUtils.getDtlsParameters(\r\n                mediaSection, sessionpart);\r\n            if (isIceLite) {\r\n              remoteDtlsParameters.role = 'server';\r\n            }\r\n  \r\n            if (!pc.usingBundle || sdpMLineIndex === 0) {\r\n              pc._gather(transceiver.mid, sdpMLineIndex);\r\n              if (iceTransport.state === 'new') {\r\n                iceTransport.start(iceGatherer, remoteIceParameters,\r\n                    isIceLite ? 'controlling' : 'controlled');\r\n              }\r\n              if (dtlsTransport.state === 'new') {\r\n                dtlsTransport.start(remoteDtlsParameters);\r\n              }\r\n            }\r\n  \r\n            // Calculate intersection of capabilities.\r\n            var params = getCommonCapabilities(localCapabilities,\r\n                remoteCapabilities);\r\n  \r\n            // Start the RTCRtpSender. The RTCRtpReceiver for this\r\n            // transceiver has already been started in setRemoteDescription.\r\n            pc._transceive(transceiver,\r\n                params.codecs.length > 0,\r\n                false);\r\n          }\r\n        });\r\n      }\r\n  \r\n      pc._localDescription = {\r\n        type: description.type,\r\n        sdp: description.sdp\r\n      };\r\n      if (description.type === 'offer') {\r\n        pc._updateSignalingState('have-local-offer');\r\n      } else {\r\n        pc._updateSignalingState('stable');\r\n      }\r\n  \r\n      return Promise.resolve();\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.setRemoteDescription = function(description) {\r\n      var pc = this;\r\n  \r\n      // Note: pranswer is not supported.\r\n      if (['offer', 'answer'].indexOf(description.type) === -1) {\r\n        return Promise.reject(makeError('TypeError',\r\n            'Unsupported type \"' + description.type + '\"'));\r\n      }\r\n  \r\n      if (!isActionAllowedInSignalingState('setRemoteDescription',\r\n          description.type, pc.signalingState) || pc._isClosed) {\r\n        return Promise.reject(makeError('InvalidStateError',\r\n            'Can not set remote ' + description.type +\r\n            ' in state ' + pc.signalingState));\r\n      }\r\n  \r\n      var streams = {};\r\n      pc.remoteStreams.forEach(function(stream) {\r\n        streams[stream.id] = stream;\r\n      });\r\n      var receiverList = [];\r\n      var sections = SDPUtils.splitSections(description.sdp);\r\n      var sessionpart = sections.shift();\r\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\r\n          'a=ice-lite').length > 0;\r\n      var usingBundle = SDPUtils.matchPrefix(sessionpart,\r\n          'a=group:BUNDLE ').length > 0;\r\n      pc.usingBundle = usingBundle;\r\n      var iceOptions = SDPUtils.matchPrefix(sessionpart,\r\n          'a=ice-options:')[0];\r\n      if (iceOptions) {\r\n        pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\r\n            .indexOf('trickle') >= 0;\r\n      } else {\r\n        pc.canTrickleIceCandidates = false;\r\n      }\r\n  \r\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\r\n        var lines = SDPUtils.splitLines(mediaSection);\r\n        var kind = SDPUtils.getKind(mediaSection);\r\n        // treat bundle-only as not-rejected.\r\n        var rejected = SDPUtils.isRejected(mediaSection) &&\r\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\r\n        var protocol = lines[0].substr(2).split(' ')[2];\r\n  \r\n        var direction = SDPUtils.getDirection(mediaSection, sessionpart);\r\n        var remoteMsid = SDPUtils.parseMsid(mediaSection);\r\n  \r\n        var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\r\n  \r\n        // Reject datachannels which are not implemented yet.\r\n        if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\r\n            protocol === 'UDP/DTLS/SCTP'))) {\r\n          // TODO: this is dangerous in the case where a non-rejected m-line\r\n          //     becomes rejected.\r\n          pc.transceivers[sdpMLineIndex] = {\r\n            mid: mid,\r\n            kind: kind,\r\n            protocol: protocol,\r\n            rejected: true\r\n          };\r\n          return;\r\n        }\r\n  \r\n        if (!rejected && pc.transceivers[sdpMLineIndex] &&\r\n            pc.transceivers[sdpMLineIndex].rejected) {\r\n          // recycle a rejected transceiver.\r\n          pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\r\n        }\r\n  \r\n        var transceiver;\r\n        var iceGatherer;\r\n        var iceTransport;\r\n        var dtlsTransport;\r\n        var rtpReceiver;\r\n        var sendEncodingParameters;\r\n        var recvEncodingParameters;\r\n        var localCapabilities;\r\n  \r\n        var track;\r\n        // FIXME: ensure the mediaSection has rtcp-mux set.\r\n        var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\r\n        var remoteIceParameters;\r\n        var remoteDtlsParameters;\r\n        if (!rejected) {\r\n          remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\r\n              sessionpart);\r\n          remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\r\n              sessionpart);\r\n          remoteDtlsParameters.role = 'client';\r\n        }\r\n        recvEncodingParameters =\r\n            SDPUtils.parseRtpEncodingParameters(mediaSection);\r\n  \r\n        var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\r\n  \r\n        var isComplete = SDPUtils.matchPrefix(mediaSection,\r\n            'a=end-of-candidates', sessionpart).length > 0;\r\n        var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\r\n            .map(function(cand) {\r\n              return SDPUtils.parseCandidate(cand);\r\n            })\r\n            .filter(function(cand) {\r\n              return cand.component === 1;\r\n            });\r\n  \r\n        // Check if we can use BUNDLE and dispose transports.\r\n        if ((description.type === 'offer' || description.type === 'answer') &&\r\n            !rejected && usingBundle && sdpMLineIndex > 0 &&\r\n            pc.transceivers[sdpMLineIndex]) {\r\n          pc._disposeIceAndDtlsTransports(sdpMLineIndex);\r\n          pc.transceivers[sdpMLineIndex].iceGatherer =\r\n              pc.transceivers[0].iceGatherer;\r\n          pc.transceivers[sdpMLineIndex].iceTransport =\r\n              pc.transceivers[0].iceTransport;\r\n          pc.transceivers[sdpMLineIndex].dtlsTransport =\r\n              pc.transceivers[0].dtlsTransport;\r\n          if (pc.transceivers[sdpMLineIndex].rtpSender) {\r\n            pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\r\n                pc.transceivers[0].dtlsTransport);\r\n          }\r\n          if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\r\n            pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\r\n                pc.transceivers[0].dtlsTransport);\r\n          }\r\n        }\r\n        if (description.type === 'offer' && !rejected) {\r\n          transceiver = pc.transceivers[sdpMLineIndex] ||\r\n              pc._createTransceiver(kind);\r\n          transceiver.mid = mid;\r\n  \r\n          if (!transceiver.iceGatherer) {\r\n            transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\r\n                usingBundle);\r\n          }\r\n  \r\n          if (cands.length && transceiver.iceTransport.state === 'new') {\r\n            if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\r\n              transceiver.iceTransport.setRemoteCandidates(cands);\r\n            } else {\r\n              cands.forEach(function(candidate) {\r\n                maybeAddCandidate(transceiver.iceTransport, candidate);\r\n              });\r\n            }\r\n          }\r\n  \r\n          localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\r\n  \r\n          // filter RTX until additional stuff needed for RTX is implemented\r\n          // in adapter.js\r\n          if (edgeVersion < 15019) {\r\n            localCapabilities.codecs = localCapabilities.codecs.filter(\r\n                function(codec) {\r\n                  return codec.name !== 'rtx';\r\n                });\r\n          }\r\n  \r\n          sendEncodingParameters = transceiver.sendEncodingParameters || [{\r\n            ssrc: (2 * sdpMLineIndex + 2) * 1001\r\n          }];\r\n  \r\n          // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\r\n          var isNewTrack = false;\r\n          if (direction === 'sendrecv' || direction === 'sendonly') {\r\n            isNewTrack = !transceiver.rtpReceiver;\r\n            rtpReceiver = transceiver.rtpReceiver ||\r\n                new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\r\n  \r\n            if (isNewTrack) {\r\n              var stream;\r\n              track = rtpReceiver.track;\r\n              // FIXME: does not work with Plan B.\r\n              if (remoteMsid && remoteMsid.stream === '-') {\r\n                // no-op. a stream id of '-' means: no associated stream.\r\n              } else if (remoteMsid) {\r\n                if (!streams[remoteMsid.stream]) {\r\n                  streams[remoteMsid.stream] = new window.MediaStream();\r\n                  Object.defineProperty(streams[remoteMsid.stream], 'id', {\r\n                    get: function() {\r\n                      return remoteMsid.stream;\r\n                    }\r\n                  });\r\n                }\r\n                Object.defineProperty(track, 'id', {\r\n                  get: function() {\r\n                    return remoteMsid.track;\r\n                  }\r\n                });\r\n                stream = streams[remoteMsid.stream];\r\n              } else {\r\n                if (!streams.default) {\r\n                  streams.default = new window.MediaStream();\r\n                }\r\n                stream = streams.default;\r\n              }\r\n              if (stream) {\r\n                addTrackToStreamAndFireEvent(track, stream);\r\n                transceiver.associatedRemoteMediaStreams.push(stream);\r\n              }\r\n              receiverList.push([track, rtpReceiver, stream]);\r\n            }\r\n          } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\r\n            transceiver.associatedRemoteMediaStreams.forEach(function(s) {\r\n              var nativeTrack = s.getTracks().find(function(t) {\r\n                return t.id === transceiver.rtpReceiver.track.id;\r\n              });\r\n              if (nativeTrack) {\r\n                removeTrackFromStreamAndFireEvent(nativeTrack, s);\r\n              }\r\n            });\r\n            transceiver.associatedRemoteMediaStreams = [];\r\n          }\r\n  \r\n          transceiver.localCapabilities = localCapabilities;\r\n          transceiver.remoteCapabilities = remoteCapabilities;\r\n          transceiver.rtpReceiver = rtpReceiver;\r\n          transceiver.rtcpParameters = rtcpParameters;\r\n          transceiver.sendEncodingParameters = sendEncodingParameters;\r\n          transceiver.recvEncodingParameters = recvEncodingParameters;\r\n  \r\n          // Start the RTCRtpReceiver now. The RTPSender is started in\r\n          // setLocalDescription.\r\n          pc._transceive(pc.transceivers[sdpMLineIndex],\r\n              false,\r\n              isNewTrack);\r\n        } else if (description.type === 'answer' && !rejected) {\r\n          transceiver = pc.transceivers[sdpMLineIndex];\r\n          iceGatherer = transceiver.iceGatherer;\r\n          iceTransport = transceiver.iceTransport;\r\n          dtlsTransport = transceiver.dtlsTransport;\r\n          rtpReceiver = transceiver.rtpReceiver;\r\n          sendEncodingParameters = transceiver.sendEncodingParameters;\r\n          localCapabilities = transceiver.localCapabilities;\r\n  \r\n          pc.transceivers[sdpMLineIndex].recvEncodingParameters =\r\n              recvEncodingParameters;\r\n          pc.transceivers[sdpMLineIndex].remoteCapabilities =\r\n              remoteCapabilities;\r\n          pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\r\n  \r\n          if (cands.length && iceTransport.state === 'new') {\r\n            if ((isIceLite || isComplete) &&\r\n                (!usingBundle || sdpMLineIndex === 0)) {\r\n              iceTransport.setRemoteCandidates(cands);\r\n            } else {\r\n              cands.forEach(function(candidate) {\r\n                maybeAddCandidate(transceiver.iceTransport, candidate);\r\n              });\r\n            }\r\n          }\r\n  \r\n          if (!usingBundle || sdpMLineIndex === 0) {\r\n            if (iceTransport.state === 'new') {\r\n              iceTransport.start(iceGatherer, remoteIceParameters,\r\n                  'controlling');\r\n            }\r\n            if (dtlsTransport.state === 'new') {\r\n              dtlsTransport.start(remoteDtlsParameters);\r\n            }\r\n          }\r\n  \r\n          // If the offer contained RTX but the answer did not,\r\n          // remove RTX from sendEncodingParameters.\r\n          var commonCapabilities = getCommonCapabilities(\r\n            transceiver.localCapabilities,\r\n            transceiver.remoteCapabilities);\r\n  \r\n          var hasRtx = commonCapabilities.codecs.filter(function(c) {\r\n            return c.name.toLowerCase() === 'rtx';\r\n          }).length;\r\n          if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\r\n            delete transceiver.sendEncodingParameters[0].rtx;\r\n          }\r\n  \r\n          pc._transceive(transceiver,\r\n              direction === 'sendrecv' || direction === 'recvonly',\r\n              direction === 'sendrecv' || direction === 'sendonly');\r\n  \r\n          // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\r\n          if (rtpReceiver &&\r\n              (direction === 'sendrecv' || direction === 'sendonly')) {\r\n            track = rtpReceiver.track;\r\n            if (remoteMsid) {\r\n              if (!streams[remoteMsid.stream]) {\r\n                streams[remoteMsid.stream] = new window.MediaStream();\r\n              }\r\n              addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\r\n              receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\r\n            } else {\r\n              if (!streams.default) {\r\n                streams.default = new window.MediaStream();\r\n              }\r\n              addTrackToStreamAndFireEvent(track, streams.default);\r\n              receiverList.push([track, rtpReceiver, streams.default]);\r\n            }\r\n          } else {\r\n            // FIXME: actually the receiver should be created later.\r\n            delete transceiver.rtpReceiver;\r\n          }\r\n        }\r\n      });\r\n  \r\n      if (pc._dtlsRole === undefined) {\r\n        pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\r\n      }\r\n  \r\n      pc._remoteDescription = {\r\n        type: description.type,\r\n        sdp: description.sdp\r\n      };\r\n      if (description.type === 'offer') {\r\n        pc._updateSignalingState('have-remote-offer');\r\n      } else {\r\n        pc._updateSignalingState('stable');\r\n      }\r\n      Object.keys(streams).forEach(function(sid) {\r\n        var stream = streams[sid];\r\n        if (stream.getTracks().length) {\r\n          if (pc.remoteStreams.indexOf(stream) === -1) {\r\n            pc.remoteStreams.push(stream);\r\n            var event = new Event('addstream');\r\n            event.stream = stream;\r\n            window.setTimeout(function() {\r\n              pc._dispatchEvent('addstream', event);\r\n            });\r\n          }\r\n  \r\n          receiverList.forEach(function(item) {\r\n            var track = item[0];\r\n            var receiver = item[1];\r\n            if (stream.id !== item[2].id) {\r\n              return;\r\n            }\r\n            fireAddTrack(pc, track, receiver, [stream]);\r\n          });\r\n        }\r\n      });\r\n      receiverList.forEach(function(item) {\r\n        if (item[2]) {\r\n          return;\r\n        }\r\n        fireAddTrack(pc, item[0], item[1], []);\r\n      });\r\n  \r\n      // check whether addIceCandidate({}) was called within four seconds after\r\n      // setRemoteDescription.\r\n      window.setTimeout(function() {\r\n        if (!(pc && pc.transceivers)) {\r\n          return;\r\n        }\r\n        pc.transceivers.forEach(function(transceiver) {\r\n          if (transceiver.iceTransport &&\r\n              transceiver.iceTransport.state === 'new' &&\r\n              transceiver.iceTransport.getRemoteCandidates().length > 0) {\r\n            console.warn('Timeout for addRemoteCandidate. Consider sending ' +\r\n                'an end-of-candidates notification');\r\n            transceiver.iceTransport.addRemoteCandidate({});\r\n          }\r\n        });\r\n      }, 4000);\r\n  \r\n      return Promise.resolve();\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.close = function() {\r\n      this.transceivers.forEach(function(transceiver) {\r\n        /* not yet\r\n        if (transceiver.iceGatherer) {\r\n          transceiver.iceGatherer.close();\r\n        }\r\n        */\r\n        if (transceiver.iceTransport) {\r\n          transceiver.iceTransport.stop();\r\n        }\r\n        if (transceiver.dtlsTransport) {\r\n          transceiver.dtlsTransport.stop();\r\n        }\r\n        if (transceiver.rtpSender) {\r\n          transceiver.rtpSender.stop();\r\n        }\r\n        if (transceiver.rtpReceiver) {\r\n          transceiver.rtpReceiver.stop();\r\n        }\r\n      });\r\n      // FIXME: clean up tracks, local streams, remote streams, etc\r\n      this._isClosed = true;\r\n      this._updateSignalingState('closed');\r\n    };\r\n  \r\n    // Update the signaling state.\r\n    RTCPeerConnection.prototype._updateSignalingState = function(newState) {\r\n      this.signalingState = newState;\r\n      var event = new Event('signalingstatechange');\r\n      this._dispatchEvent('signalingstatechange', event);\r\n    };\r\n  \r\n    // Determine whether to fire the negotiationneeded event.\r\n    RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\r\n      var pc = this;\r\n      if (this.signalingState !== 'stable' || this.needNegotiation === true) {\r\n        return;\r\n      }\r\n      this.needNegotiation = true;\r\n      window.setTimeout(function() {\r\n        if (pc.needNegotiation) {\r\n          pc.needNegotiation = false;\r\n          var event = new Event('negotiationneeded');\r\n          pc._dispatchEvent('negotiationneeded', event);\r\n        }\r\n      }, 0);\r\n    };\r\n  \r\n    // Update the ice connection state.\r\n    RTCPeerConnection.prototype._updateIceConnectionState = function() {\r\n      var newState;\r\n      var states = {\r\n        'new': 0,\r\n        closed: 0,\r\n        checking: 0,\r\n        connected: 0,\r\n        completed: 0,\r\n        disconnected: 0,\r\n        failed: 0\r\n      };\r\n      this.transceivers.forEach(function(transceiver) {\r\n        if (transceiver.iceTransport && !transceiver.rejected) {\r\n          states[transceiver.iceTransport.state]++;\r\n        }\r\n      });\r\n  \r\n      newState = 'new';\r\n      if (states.failed > 0) {\r\n        newState = 'failed';\r\n      } else if (states.checking > 0) {\r\n        newState = 'checking';\r\n      } else if (states.disconnected > 0) {\r\n        newState = 'disconnected';\r\n      } else if (states.new > 0) {\r\n        newState = 'new';\r\n      } else if (states.connected > 0) {\r\n        newState = 'connected';\r\n      } else if (states.completed > 0) {\r\n        newState = 'completed';\r\n      }\r\n  \r\n      if (newState !== this.iceConnectionState) {\r\n        this.iceConnectionState = newState;\r\n        var event = new Event('iceconnectionstatechange');\r\n        this._dispatchEvent('iceconnectionstatechange', event);\r\n      }\r\n    };\r\n  \r\n    // Update the connection state.\r\n    RTCPeerConnection.prototype._updateConnectionState = function() {\r\n      var newState;\r\n      var states = {\r\n        'new': 0,\r\n        closed: 0,\r\n        connecting: 0,\r\n        connected: 0,\r\n        completed: 0,\r\n        disconnected: 0,\r\n        failed: 0\r\n      };\r\n      this.transceivers.forEach(function(transceiver) {\r\n        if (transceiver.iceTransport && transceiver.dtlsTransport &&\r\n            !transceiver.rejected) {\r\n          states[transceiver.iceTransport.state]++;\r\n          states[transceiver.dtlsTransport.state]++;\r\n        }\r\n      });\r\n      // ICETransport.completed and connected are the same for this purpose.\r\n      states.connected += states.completed;\r\n  \r\n      newState = 'new';\r\n      if (states.failed > 0) {\r\n        newState = 'failed';\r\n      } else if (states.connecting > 0) {\r\n        newState = 'connecting';\r\n      } else if (states.disconnected > 0) {\r\n        newState = 'disconnected';\r\n      } else if (states.new > 0) {\r\n        newState = 'new';\r\n      } else if (states.connected > 0) {\r\n        newState = 'connected';\r\n      }\r\n  \r\n      if (newState !== this.connectionState) {\r\n        this.connectionState = newState;\r\n        var event = new Event('connectionstatechange');\r\n        this._dispatchEvent('connectionstatechange', event);\r\n      }\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.createOffer = function() {\r\n      var pc = this;\r\n  \r\n      if (pc._isClosed) {\r\n        return Promise.reject(makeError('InvalidStateError',\r\n            'Can not call createOffer after close'));\r\n      }\r\n  \r\n      var numAudioTracks = pc.transceivers.filter(function(t) {\r\n        return t.kind === 'audio';\r\n      }).length;\r\n      var numVideoTracks = pc.transceivers.filter(function(t) {\r\n        return t.kind === 'video';\r\n      }).length;\r\n  \r\n      // Determine number of audio and video tracks we need to send/recv.\r\n      var offerOptions = arguments[0];\r\n      if (offerOptions) {\r\n        // Reject Chrome legacy constraints.\r\n        if (offerOptions.mandatory || offerOptions.optional) {\r\n          throw new TypeError(\r\n              'Legacy mandatory/optional constraints not supported.');\r\n        }\r\n        if (offerOptions.offerToReceiveAudio !== undefined) {\r\n          if (offerOptions.offerToReceiveAudio === true) {\r\n            numAudioTracks = 1;\r\n          } else if (offerOptions.offerToReceiveAudio === false) {\r\n            numAudioTracks = 0;\r\n          } else {\r\n            numAudioTracks = offerOptions.offerToReceiveAudio;\r\n          }\r\n        }\r\n        if (offerOptions.offerToReceiveVideo !== undefined) {\r\n          if (offerOptions.offerToReceiveVideo === true) {\r\n            numVideoTracks = 1;\r\n          } else if (offerOptions.offerToReceiveVideo === false) {\r\n            numVideoTracks = 0;\r\n          } else {\r\n            numVideoTracks = offerOptions.offerToReceiveVideo;\r\n          }\r\n        }\r\n      }\r\n  \r\n      pc.transceivers.forEach(function(transceiver) {\r\n        if (transceiver.kind === 'audio') {\r\n          numAudioTracks--;\r\n          if (numAudioTracks < 0) {\r\n            transceiver.wantReceive = false;\r\n          }\r\n        } else if (transceiver.kind === 'video') {\r\n          numVideoTracks--;\r\n          if (numVideoTracks < 0) {\r\n            transceiver.wantReceive = false;\r\n          }\r\n        }\r\n      });\r\n  \r\n      // Create M-lines for recvonly streams.\r\n      while (numAudioTracks > 0 || numVideoTracks > 0) {\r\n        if (numAudioTracks > 0) {\r\n          pc._createTransceiver('audio');\r\n          numAudioTracks--;\r\n        }\r\n        if (numVideoTracks > 0) {\r\n          pc._createTransceiver('video');\r\n          numVideoTracks--;\r\n        }\r\n      }\r\n  \r\n      var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\r\n          pc._sdpSessionVersion++);\r\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n        // For each track, create an ice gatherer, ice transport,\r\n        // dtls transport, potentially rtpsender and rtpreceiver.\r\n        var track = transceiver.track;\r\n        var kind = transceiver.kind;\r\n        var mid = transceiver.mid || SDPUtils.generateIdentifier();\r\n        transceiver.mid = mid;\r\n  \r\n        if (!transceiver.iceGatherer) {\r\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\r\n              pc.usingBundle);\r\n        }\r\n  \r\n        var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\r\n        // filter RTX until additional stuff needed for RTX is implemented\r\n        // in adapter.js\r\n        if (edgeVersion < 15019) {\r\n          localCapabilities.codecs = localCapabilities.codecs.filter(\r\n              function(codec) {\r\n                return codec.name !== 'rtx';\r\n              });\r\n        }\r\n        localCapabilities.codecs.forEach(function(codec) {\r\n          // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\r\n          // by adding level-asymmetry-allowed=1\r\n          if (codec.name === 'H264' &&\r\n              codec.parameters['level-asymmetry-allowed'] === undefined) {\r\n            codec.parameters['level-asymmetry-allowed'] = '1';\r\n          }\r\n  \r\n          // for subsequent offers, we might have to re-use the payload\r\n          // type of the last offer.\r\n          if (transceiver.remoteCapabilities &&\r\n              transceiver.remoteCapabilities.codecs) {\r\n            transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\r\n              if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\r\n                  codec.clockRate === remoteCodec.clockRate) {\r\n                codec.preferredPayloadType = remoteCodec.payloadType;\r\n              }\r\n            });\r\n          }\r\n        });\r\n        localCapabilities.headerExtensions.forEach(function(hdrExt) {\r\n          var remoteExtensions = transceiver.remoteCapabilities &&\r\n              transceiver.remoteCapabilities.headerExtensions || [];\r\n          remoteExtensions.forEach(function(rHdrExt) {\r\n            if (hdrExt.uri === rHdrExt.uri) {\r\n              hdrExt.id = rHdrExt.id;\r\n            }\r\n          });\r\n        });\r\n  \r\n        // generate an ssrc now, to be used later in rtpSender.send\r\n        var sendEncodingParameters = transceiver.sendEncodingParameters || [{\r\n          ssrc: (2 * sdpMLineIndex + 1) * 1001\r\n        }];\r\n        if (track) {\r\n          // add RTX\r\n          if (edgeVersion >= 15019 && kind === 'video' &&\r\n              !sendEncodingParameters[0].rtx) {\r\n            sendEncodingParameters[0].rtx = {\r\n              ssrc: sendEncodingParameters[0].ssrc + 1\r\n            };\r\n          }\r\n        }\r\n  \r\n        if (transceiver.wantReceive) {\r\n          transceiver.rtpReceiver = new window.RTCRtpReceiver(\r\n              transceiver.dtlsTransport, kind);\r\n        }\r\n  \r\n        transceiver.localCapabilities = localCapabilities;\r\n        transceiver.sendEncodingParameters = sendEncodingParameters;\r\n      });\r\n  \r\n      // always offer BUNDLE and dispose on return if not supported.\r\n      if (pc._config.bundlePolicy !== 'max-compat') {\r\n        sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\r\n          return t.mid;\r\n        }).join(' ') + '\\r\\n';\r\n      }\r\n      sdp += 'a=ice-options:trickle\\r\\n';\r\n  \r\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n        sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\r\n            'offer', transceiver.stream, pc._dtlsRole);\r\n        sdp += 'a=rtcp-rsize\\r\\n';\r\n  \r\n        if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\r\n            (sdpMLineIndex === 0 || !pc.usingBundle)) {\r\n          transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\r\n            cand.component = 1;\r\n            sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\r\n          });\r\n  \r\n          if (transceiver.iceGatherer.state === 'completed') {\r\n            sdp += 'a=end-of-candidates\\r\\n';\r\n          }\r\n        }\r\n      });\r\n  \r\n      var desc = new window.RTCSessionDescription({\r\n        type: 'offer',\r\n        sdp: sdp\r\n      });\r\n      return Promise.resolve(desc);\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.createAnswer = function() {\r\n      var pc = this;\r\n  \r\n      if (pc._isClosed) {\r\n        return Promise.reject(makeError('InvalidStateError',\r\n            'Can not call createAnswer after close'));\r\n      }\r\n  \r\n      if (!(pc.signalingState === 'have-remote-offer' ||\r\n          pc.signalingState === 'have-local-pranswer')) {\r\n        return Promise.reject(makeError('InvalidStateError',\r\n            'Can not call createAnswer in signalingState ' + pc.signalingState));\r\n      }\r\n  \r\n      var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\r\n          pc._sdpSessionVersion++);\r\n      if (pc.usingBundle) {\r\n        sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\r\n          return t.mid;\r\n        }).join(' ') + '\\r\\n';\r\n      }\r\n      sdp += 'a=ice-options:trickle\\r\\n';\r\n  \r\n      var mediaSectionsInOffer = SDPUtils.getMediaSections(\r\n          pc._remoteDescription.sdp).length;\r\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n        if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\r\n          return;\r\n        }\r\n        if (transceiver.rejected) {\r\n          if (transceiver.kind === 'application') {\r\n            if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\r\n              sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\r\n            } else {\r\n              sdp += 'm=application 0 ' + transceiver.protocol +\r\n                  ' webrtc-datachannel\\r\\n';\r\n            }\r\n          } else if (transceiver.kind === 'audio') {\r\n            sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\r\n                'a=rtpmap:0 PCMU/8000\\r\\n';\r\n          } else if (transceiver.kind === 'video') {\r\n            sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\r\n                'a=rtpmap:120 VP8/90000\\r\\n';\r\n          }\r\n          sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\r\n              'a=inactive\\r\\n' +\r\n              'a=mid:' + transceiver.mid + '\\r\\n';\r\n          return;\r\n        }\r\n  \r\n        // FIXME: look at direction.\r\n        if (transceiver.stream) {\r\n          var localTrack;\r\n          if (transceiver.kind === 'audio') {\r\n            localTrack = transceiver.stream.getAudioTracks()[0];\r\n          } else if (transceiver.kind === 'video') {\r\n            localTrack = transceiver.stream.getVideoTracks()[0];\r\n          }\r\n          if (localTrack) {\r\n            // add RTX\r\n            if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\r\n                !transceiver.sendEncodingParameters[0].rtx) {\r\n              transceiver.sendEncodingParameters[0].rtx = {\r\n                ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\r\n              };\r\n            }\r\n          }\r\n        }\r\n  \r\n        // Calculate intersection of capabilities.\r\n        var commonCapabilities = getCommonCapabilities(\r\n            transceiver.localCapabilities,\r\n            transceiver.remoteCapabilities);\r\n  \r\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\r\n          return c.name.toLowerCase() === 'rtx';\r\n        }).length;\r\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\r\n          delete transceiver.sendEncodingParameters[0].rtx;\r\n        }\r\n  \r\n        sdp += writeMediaSection(transceiver, commonCapabilities,\r\n            'answer', transceiver.stream, pc._dtlsRole);\r\n        if (transceiver.rtcpParameters &&\r\n            transceiver.rtcpParameters.reducedSize) {\r\n          sdp += 'a=rtcp-rsize\\r\\n';\r\n        }\r\n      });\r\n  \r\n      var desc = new window.RTCSessionDescription({\r\n        type: 'answer',\r\n        sdp: sdp\r\n      });\r\n      return Promise.resolve(desc);\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\r\n      var pc = this;\r\n      var sections;\r\n      if (candidate && !(candidate.sdpMLineIndex !== undefined ||\r\n          candidate.sdpMid)) {\r\n        return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\r\n      }\r\n  \r\n      // TODO: needs to go into ops queue.\r\n      return new Promise(function(resolve, reject) {\r\n        if (!pc._remoteDescription) {\r\n          return reject(makeError('InvalidStateError',\r\n              'Can not add ICE candidate without a remote description'));\r\n        } else if (!candidate || candidate.candidate === '') {\r\n          for (var j = 0; j < pc.transceivers.length; j++) {\r\n            if (pc.transceivers[j].rejected) {\r\n              continue;\r\n            }\r\n            pc.transceivers[j].iceTransport.addRemoteCandidate({});\r\n            sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\r\n            sections[j] += 'a=end-of-candidates\\r\\n';\r\n            pc._remoteDescription.sdp =\r\n                SDPUtils.getDescription(pc._remoteDescription.sdp) +\r\n                sections.join('');\r\n            if (pc.usingBundle) {\r\n              break;\r\n            }\r\n          }\r\n        } else {\r\n          var sdpMLineIndex = candidate.sdpMLineIndex;\r\n          if (candidate.sdpMid) {\r\n            for (var i = 0; i < pc.transceivers.length; i++) {\r\n              if (pc.transceivers[i].mid === candidate.sdpMid) {\r\n                sdpMLineIndex = i;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          var transceiver = pc.transceivers[sdpMLineIndex];\r\n          if (transceiver) {\r\n            if (transceiver.rejected) {\r\n              return resolve();\r\n            }\r\n            var cand = Object.keys(candidate.candidate).length > 0 ?\r\n                SDPUtils.parseCandidate(candidate.candidate) : {};\r\n            // Ignore Chrome's invalid candidates since Edge does not like them.\r\n            if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\r\n              return resolve();\r\n            }\r\n            // Ignore RTCP candidates, we assume RTCP-MUX.\r\n            if (cand.component && cand.component !== 1) {\r\n              return resolve();\r\n            }\r\n            // when using bundle, avoid adding candidates to the wrong\r\n            // ice transport. And avoid adding candidates added in the SDP.\r\n            if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\r\n                transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\r\n              if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\r\n                return reject(makeError('OperationError',\r\n                    'Can not add ICE candidate'));\r\n              }\r\n            }\r\n  \r\n            // update the remoteDescription.\r\n            var candidateString = candidate.candidate.trim();\r\n            if (candidateString.indexOf('a=') === 0) {\r\n              candidateString = candidateString.substr(2);\r\n            }\r\n            sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\r\n            sections[sdpMLineIndex] += 'a=' +\r\n                (cand.type ? candidateString : 'end-of-candidates')\r\n                + '\\r\\n';\r\n            pc._remoteDescription.sdp =\r\n                SDPUtils.getDescription(pc._remoteDescription.sdp) +\r\n                sections.join('');\r\n          } else {\r\n            return reject(makeError('OperationError',\r\n                'Can not add ICE candidate'));\r\n          }\r\n        }\r\n        resolve();\r\n      });\r\n    };\r\n  \r\n    RTCPeerConnection.prototype.getStats = function(selector) {\r\n      if (selector && selector instanceof window.MediaStreamTrack) {\r\n        var senderOrReceiver = null;\r\n        this.transceivers.forEach(function(transceiver) {\r\n          if (transceiver.rtpSender &&\r\n              transceiver.rtpSender.track === selector) {\r\n            senderOrReceiver = transceiver.rtpSender;\r\n          } else if (transceiver.rtpReceiver &&\r\n              transceiver.rtpReceiver.track === selector) {\r\n            senderOrReceiver = transceiver.rtpReceiver;\r\n          }\r\n        });\r\n        if (!senderOrReceiver) {\r\n          throw makeError('InvalidAccessError', 'Invalid selector.');\r\n        }\r\n        return senderOrReceiver.getStats();\r\n      }\r\n  \r\n      var promises = [];\r\n      this.transceivers.forEach(function(transceiver) {\r\n        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\r\n            'dtlsTransport'].forEach(function(method) {\r\n              if (transceiver[method]) {\r\n                promises.push(transceiver[method].getStats());\r\n              }\r\n            });\r\n      });\r\n      return Promise.all(promises).then(function(allStats) {\r\n        var results = new Map();\r\n        allStats.forEach(function(stats) {\r\n          stats.forEach(function(stat) {\r\n            results.set(stat.id, stat);\r\n          });\r\n        });\r\n        return results;\r\n      });\r\n    };\r\n  \r\n    // fix low-level stat names and return Map instead of object.\r\n    var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\r\n      'RTCIceTransport', 'RTCDtlsTransport'];\r\n    ortcObjects.forEach(function(ortcObjectName) {\r\n      var obj = window[ortcObjectName];\r\n      if (obj && obj.prototype && obj.prototype.getStats) {\r\n        var nativeGetstats = obj.prototype.getStats;\r\n        obj.prototype.getStats = function() {\r\n          return nativeGetstats.apply(this)\r\n          .then(function(nativeStats) {\r\n            var mapStats = new Map();\r\n            Object.keys(nativeStats).forEach(function(id) {\r\n              nativeStats[id].type = fixStatsType(nativeStats[id]);\r\n              mapStats.set(id, nativeStats[id]);\r\n            });\r\n            return mapStats;\r\n          });\r\n        };\r\n      }\r\n    });\r\n  \r\n    // legacy callback shims. Should be moved to adapter.js some days.\r\n    var methods = ['createOffer', 'createAnswer'];\r\n    methods.forEach(function(method) {\r\n      var nativeMethod = RTCPeerConnection.prototype[method];\r\n      RTCPeerConnection.prototype[method] = function() {\r\n        var args = arguments;\r\n        if (typeof args[0] === 'function' ||\r\n            typeof args[1] === 'function') { // legacy\r\n          return nativeMethod.apply(this, [arguments[2]])\r\n          .then(function(description) {\r\n            if (typeof args[0] === 'function') {\r\n              args[0].apply(null, [description]);\r\n            }\r\n          }, function(error) {\r\n            if (typeof args[1] === 'function') {\r\n              args[1].apply(null, [error]);\r\n            }\r\n          });\r\n        }\r\n        return nativeMethod.apply(this, arguments);\r\n      };\r\n    });\r\n  \r\n    methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\r\n    methods.forEach(function(method) {\r\n      var nativeMethod = RTCPeerConnection.prototype[method];\r\n      RTCPeerConnection.prototype[method] = function() {\r\n        var args = arguments;\r\n        if (typeof args[1] === 'function' ||\r\n            typeof args[2] === 'function') { // legacy\r\n          return nativeMethod.apply(this, arguments)\r\n          .then(function() {\r\n            if (typeof args[1] === 'function') {\r\n              args[1].apply(null);\r\n            }\r\n          }, function(error) {\r\n            if (typeof args[2] === 'function') {\r\n              args[2].apply(null, [error]);\r\n            }\r\n          });\r\n        }\r\n        return nativeMethod.apply(this, arguments);\r\n      };\r\n    });\r\n  \r\n    // getStats is special. It doesn't have a spec legacy method yet we support\r\n    // getStats(something, cb) without error callbacks.\r\n    ['getStats'].forEach(function(method) {\r\n      var nativeMethod = RTCPeerConnection.prototype[method];\r\n      RTCPeerConnection.prototype[method] = function() {\r\n        var args = arguments;\r\n        if (typeof args[1] === 'function') {\r\n          return nativeMethod.apply(this, arguments)\r\n          .then(function() {\r\n            if (typeof args[1] === 'function') {\r\n              args[1].apply(null);\r\n            }\r\n          });\r\n        }\r\n        return nativeMethod.apply(this, arguments);\r\n      };\r\n    });\r\n  \r\n    return RTCPeerConnection;\r\n  };\r\n  \r\n  },{\"sdp\":17}],17:[function(require,module,exports){\r\n  /* eslint-env node */\r\n  'use strict';\r\n  \r\n  // SDP helpers.\r\n  var SDPUtils = {};\r\n  \r\n  // Generate an alphanumeric identifier for cname or mids.\r\n  // TODO: use UUIDs instead? https://gist.github.com/jed/982883\r\n  SDPUtils.generateIdentifier = function() {\r\n    return Math.random().toString(36).substr(2, 10);\r\n  };\r\n  \r\n  // The RTCP CNAME used by all peerconnections from the same JS.\r\n  SDPUtils.localCName = SDPUtils.generateIdentifier();\r\n  \r\n  // Splits SDP into lines, dealing with both CRLF and LF.\r\n  SDPUtils.splitLines = function(blob) {\r\n    return blob.trim().split('\\n').map(function(line) {\r\n      return line.trim();\r\n    });\r\n  };\r\n  // Splits SDP into sessionpart and mediasections. Ensures CRLF.\r\n  SDPUtils.splitSections = function(blob) {\r\n    var parts = blob.split('\\nm=');\r\n    return parts.map(function(part, index) {\r\n      return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\r\n    });\r\n  };\r\n  \r\n  // returns the session description.\r\n  SDPUtils.getDescription = function(blob) {\r\n    var sections = SDPUtils.splitSections(blob);\r\n    return sections && sections[0];\r\n  };\r\n  \r\n  // returns the individual media sections.\r\n  SDPUtils.getMediaSections = function(blob) {\r\n    var sections = SDPUtils.splitSections(blob);\r\n    sections.shift();\r\n    return sections;\r\n  };\r\n  \r\n  // Returns lines that start with a certain prefix.\r\n  SDPUtils.matchPrefix = function(blob, prefix) {\r\n    return SDPUtils.splitLines(blob).filter(function(line) {\r\n      return line.indexOf(prefix) === 0;\r\n    });\r\n  };\r\n  \r\n  // Parses an ICE candidate line. Sample input:\r\n  // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\r\n  // rport 55996\"\r\n  SDPUtils.parseCandidate = function(line) {\r\n    var parts;\r\n    // Parse both variants.\r\n    if (line.indexOf('a=candidate:') === 0) {\r\n      parts = line.substring(12).split(' ');\r\n    } else {\r\n      parts = line.substring(10).split(' ');\r\n    }\r\n  \r\n    var candidate = {\r\n      foundation: parts[0],\r\n      component: parseInt(parts[1], 10),\r\n      protocol: parts[2].toLowerCase(),\r\n      priority: parseInt(parts[3], 10),\r\n      ip: parts[4],\r\n      address: parts[4], // address is an alias for ip.\r\n      port: parseInt(parts[5], 10),\r\n      // skip parts[6] == 'typ'\r\n      type: parts[7]\r\n    };\r\n  \r\n    for (var i = 8; i < parts.length; i += 2) {\r\n      switch (parts[i]) {\r\n        case 'raddr':\r\n          candidate.relatedAddress = parts[i + 1];\r\n          break;\r\n        case 'rport':\r\n          candidate.relatedPort = parseInt(parts[i + 1], 10);\r\n          break;\r\n        case 'tcptype':\r\n          candidate.tcpType = parts[i + 1];\r\n          break;\r\n        case 'ufrag':\r\n          candidate.ufrag = parts[i + 1]; // for backward compability.\r\n          candidate.usernameFragment = parts[i + 1];\r\n          break;\r\n        default: // extension handling, in particular ufrag\r\n          candidate[parts[i]] = parts[i + 1];\r\n          break;\r\n      }\r\n    }\r\n    return candidate;\r\n  };\r\n  \r\n  // Translates a candidate object into SDP candidate attribute.\r\n  SDPUtils.writeCandidate = function(candidate) {\r\n    var sdp = [];\r\n    sdp.push(candidate.foundation);\r\n    sdp.push(candidate.component);\r\n    sdp.push(candidate.protocol.toUpperCase());\r\n    sdp.push(candidate.priority);\r\n    sdp.push(candidate.address || candidate.ip);\r\n    sdp.push(candidate.port);\r\n  \r\n    var type = candidate.type;\r\n    sdp.push('typ');\r\n    sdp.push(type);\r\n    if (type !== 'host' && candidate.relatedAddress &&\r\n        candidate.relatedPort) {\r\n      sdp.push('raddr');\r\n      sdp.push(candidate.relatedAddress);\r\n      sdp.push('rport');\r\n      sdp.push(candidate.relatedPort);\r\n    }\r\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\r\n      sdp.push('tcptype');\r\n      sdp.push(candidate.tcpType);\r\n    }\r\n    if (candidate.usernameFragment || candidate.ufrag) {\r\n      sdp.push('ufrag');\r\n      sdp.push(candidate.usernameFragment || candidate.ufrag);\r\n    }\r\n    return 'candidate:' + sdp.join(' ');\r\n  };\r\n  \r\n  // Parses an ice-options line, returns an array of option tags.\r\n  // a=ice-options:foo bar\r\n  SDPUtils.parseIceOptions = function(line) {\r\n    return line.substr(14).split(' ');\r\n  };\r\n  \r\n  // Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\r\n  // a=rtpmap:111 opus/48000/2\r\n  SDPUtils.parseRtpMap = function(line) {\r\n    var parts = line.substr(9).split(' ');\r\n    var parsed = {\r\n      payloadType: parseInt(parts.shift(), 10) // was: id\r\n    };\r\n  \r\n    parts = parts[0].split('/');\r\n  \r\n    parsed.name = parts[0];\r\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\r\n    parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\r\n    // legacy alias, got renamed back to channels in ORTC.\r\n    parsed.numChannels = parsed.channels;\r\n    return parsed;\r\n  };\r\n  \r\n  // Generate an a=rtpmap line from RTCRtpCodecCapability or\r\n  // RTCRtpCodecParameters.\r\n  SDPUtils.writeRtpMap = function(codec) {\r\n    var pt = codec.payloadType;\r\n    if (codec.preferredPayloadType !== undefined) {\r\n      pt = codec.preferredPayloadType;\r\n    }\r\n    var channels = codec.channels || codec.numChannels || 1;\r\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\r\n        (channels !== 1 ? '/' + channels : '') + '\\r\\n';\r\n  };\r\n  \r\n  // Parses an a=extmap line (headerextension from RFC 5285). Sample input:\r\n  // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\r\n  // a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\r\n  SDPUtils.parseExtmap = function(line) {\r\n    var parts = line.substr(9).split(' ');\r\n    return {\r\n      id: parseInt(parts[0], 10),\r\n      direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\r\n      uri: parts[1]\r\n    };\r\n  };\r\n  \r\n  // Generates a=extmap line from RTCRtpHeaderExtensionParameters or\r\n  // RTCRtpHeaderExtension.\r\n  SDPUtils.writeExtmap = function(headerExtension) {\r\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\r\n        (headerExtension.direction && headerExtension.direction !== 'sendrecv'\r\n          ? '/' + headerExtension.direction\r\n          : '') +\r\n        ' ' + headerExtension.uri + '\\r\\n';\r\n  };\r\n  \r\n  // Parses an ftmp line, returns dictionary. Sample input:\r\n  // a=fmtp:96 vbr=on;cng=on\r\n  // Also deals with vbr=on; cng=on\r\n  SDPUtils.parseFmtp = function(line) {\r\n    var parsed = {};\r\n    var kv;\r\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\r\n    for (var j = 0; j < parts.length; j++) {\r\n      kv = parts[j].trim().split('=');\r\n      parsed[kv[0].trim()] = kv[1];\r\n    }\r\n    return parsed;\r\n  };\r\n  \r\n  // Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\r\n  SDPUtils.writeFmtp = function(codec) {\r\n    var line = '';\r\n    var pt = codec.payloadType;\r\n    if (codec.preferredPayloadType !== undefined) {\r\n      pt = codec.preferredPayloadType;\r\n    }\r\n    if (codec.parameters && Object.keys(codec.parameters).length) {\r\n      var params = [];\r\n      Object.keys(codec.parameters).forEach(function(param) {\r\n        if (codec.parameters[param]) {\r\n          params.push(param + '=' + codec.parameters[param]);\r\n        } else {\r\n          params.push(param);\r\n        }\r\n      });\r\n      line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\r\n    }\r\n    return line;\r\n  };\r\n  \r\n  // Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\r\n  // a=rtcp-fb:98 nack rpsi\r\n  SDPUtils.parseRtcpFb = function(line) {\r\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\r\n    return {\r\n      type: parts.shift(),\r\n      parameter: parts.join(' ')\r\n    };\r\n  };\r\n  // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\r\n  SDPUtils.writeRtcpFb = function(codec) {\r\n    var lines = '';\r\n    var pt = codec.payloadType;\r\n    if (codec.preferredPayloadType !== undefined) {\r\n      pt = codec.preferredPayloadType;\r\n    }\r\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\r\n      // FIXME: special handling for trr-int?\r\n      codec.rtcpFeedback.forEach(function(fb) {\r\n        lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\r\n        (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\r\n            '\\r\\n';\r\n      });\r\n    }\r\n    return lines;\r\n  };\r\n  \r\n  // Parses an RFC 5576 ssrc media attribute. Sample input:\r\n  // a=ssrc:3735928559 cname:something\r\n  SDPUtils.parseSsrcMedia = function(line) {\r\n    var sp = line.indexOf(' ');\r\n    var parts = {\r\n      ssrc: parseInt(line.substr(7, sp - 7), 10)\r\n    };\r\n    var colon = line.indexOf(':', sp);\r\n    if (colon > -1) {\r\n      parts.attribute = line.substr(sp + 1, colon - sp - 1);\r\n      parts.value = line.substr(colon + 1);\r\n    } else {\r\n      parts.attribute = line.substr(sp + 1);\r\n    }\r\n    return parts;\r\n  };\r\n  \r\n  SDPUtils.parseSsrcGroup = function(line) {\r\n    var parts = line.substr(13).split(' ');\r\n    return {\r\n      semantics: parts.shift(),\r\n      ssrcs: parts.map(function(ssrc) {\r\n        return parseInt(ssrc, 10);\r\n      })\r\n    };\r\n  };\r\n  \r\n  // Extracts the MID (RFC 5888) from a media section.\r\n  // returns the MID or undefined if no mid line was found.\r\n  SDPUtils.getMid = function(mediaSection) {\r\n    var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\r\n    if (mid) {\r\n      return mid.substr(6);\r\n    }\r\n  };\r\n  \r\n  SDPUtils.parseFingerprint = function(line) {\r\n    var parts = line.substr(14).split(' ');\r\n    return {\r\n      algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\r\n      value: parts[1]\r\n    };\r\n  };\r\n  \r\n  // Extracts DTLS parameters from SDP media section or sessionpart.\r\n  // FIXME: for consistency with other functions this should only\r\n  //   get the fingerprint line as input. See also getIceParameters.\r\n  SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\r\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\r\n      'a=fingerprint:');\r\n    // Note: a=setup line is ignored since we use the 'auto' role.\r\n    // Note2: 'algorithm' is not case sensitive except in Edge.\r\n    return {\r\n      role: 'auto',\r\n      fingerprints: lines.map(SDPUtils.parseFingerprint)\r\n    };\r\n  };\r\n  \r\n  // Serializes DTLS parameters to SDP.\r\n  SDPUtils.writeDtlsParameters = function(params, setupType) {\r\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\r\n    params.fingerprints.forEach(function(fp) {\r\n      sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\r\n    });\r\n    return sdp;\r\n  };\r\n  \r\n  // Parses a=crypto lines into\r\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\r\n  SDPUtils.parseCryptoLine = function(line) {\r\n    var parts = line.substr(9).split(' ');\r\n    return {\r\n      tag: parseInt(parts[0], 10),\r\n      cryptoSuite: parts[1],\r\n      keyParams: parts[2],\r\n      sessionParams: parts.slice(3),\r\n    };\r\n  };\r\n  \r\n  SDPUtils.writeCryptoLine = function(parameters) {\r\n    return 'a=crypto:' + parameters.tag + ' ' +\r\n      parameters.cryptoSuite + ' ' +\r\n      (typeof parameters.keyParams === 'object'\r\n        ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\r\n        : parameters.keyParams) +\r\n      (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\r\n      '\\r\\n';\r\n  };\r\n  \r\n  // Parses the crypto key parameters into\r\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\r\n  SDPUtils.parseCryptoKeyParams = function(keyParams) {\r\n    if (keyParams.indexOf('inline:') !== 0) {\r\n      return null;\r\n    }\r\n    var parts = keyParams.substr(7).split('|');\r\n    return {\r\n      keyMethod: 'inline',\r\n      keySalt: parts[0],\r\n      lifeTime: parts[1],\r\n      mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\r\n      mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\r\n    };\r\n  };\r\n  \r\n  SDPUtils.writeCryptoKeyParams = function(keyParams) {\r\n    return keyParams.keyMethod + ':'\r\n      + keyParams.keySalt +\r\n      (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\r\n      (keyParams.mkiValue && keyParams.mkiLength\r\n        ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\r\n        : '');\r\n  };\r\n  \r\n  // Extracts all SDES paramters.\r\n  SDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\r\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\r\n      'a=crypto:');\r\n    return lines.map(SDPUtils.parseCryptoLine);\r\n  };\r\n  \r\n  // Parses ICE information from SDP media section or sessionpart.\r\n  // FIXME: for consistency with other functions this should only\r\n  //   get the ice-ufrag and ice-pwd lines as input.\r\n  SDPUtils.getIceParameters = function(mediaSection, sessionpart) {\r\n    var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\r\n      'a=ice-ufrag:')[0];\r\n    var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\r\n      'a=ice-pwd:')[0];\r\n    if (!(ufrag && pwd)) {\r\n      return null;\r\n    }\r\n    return {\r\n      usernameFragment: ufrag.substr(12),\r\n      password: pwd.substr(10),\r\n    };\r\n  };\r\n  \r\n  // Serializes ICE parameters to SDP.\r\n  SDPUtils.writeIceParameters = function(params) {\r\n    return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\r\n        'a=ice-pwd:' + params.password + '\\r\\n';\r\n  };\r\n  \r\n  // Parses the SDP media section and returns RTCRtpParameters.\r\n  SDPUtils.parseRtpParameters = function(mediaSection) {\r\n    var description = {\r\n      codecs: [],\r\n      headerExtensions: [],\r\n      fecMechanisms: [],\r\n      rtcp: []\r\n    };\r\n    var lines = SDPUtils.splitLines(mediaSection);\r\n    var mline = lines[0].split(' ');\r\n    for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\r\n      var pt = mline[i];\r\n      var rtpmapline = SDPUtils.matchPrefix(\r\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\r\n      if (rtpmapline) {\r\n        var codec = SDPUtils.parseRtpMap(rtpmapline);\r\n        var fmtps = SDPUtils.matchPrefix(\r\n          mediaSection, 'a=fmtp:' + pt + ' ');\r\n        // Only the first a=fmtp:<pt> is considered.\r\n        codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\r\n        codec.rtcpFeedback = SDPUtils.matchPrefix(\r\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\r\n          .map(SDPUtils.parseRtcpFb);\r\n        description.codecs.push(codec);\r\n        // parse FEC mechanisms from rtpmap lines.\r\n        switch (codec.name.toUpperCase()) {\r\n          case 'RED':\r\n          case 'ULPFEC':\r\n            description.fecMechanisms.push(codec.name.toUpperCase());\r\n            break;\r\n          default: // only RED and ULPFEC are recognized as FEC mechanisms.\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\r\n      description.headerExtensions.push(SDPUtils.parseExtmap(line));\r\n    });\r\n    // FIXME: parse rtcp.\r\n    return description;\r\n  };\r\n  \r\n  // Generates parts of the SDP media section describing the capabilities /\r\n  // parameters.\r\n  SDPUtils.writeRtpDescription = function(kind, caps) {\r\n    var sdp = '';\r\n  \r\n    // Build the mline.\r\n    sdp += 'm=' + kind + ' ';\r\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\r\n    sdp += ' UDP/TLS/RTP/SAVPF ';\r\n    sdp += caps.codecs.map(function(codec) {\r\n      if (codec.preferredPayloadType !== undefined) {\r\n        return codec.preferredPayloadType;\r\n      }\r\n      return codec.payloadType;\r\n    }).join(' ') + '\\r\\n';\r\n  \r\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\r\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\r\n  \r\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\r\n    caps.codecs.forEach(function(codec) {\r\n      sdp += SDPUtils.writeRtpMap(codec);\r\n      sdp += SDPUtils.writeFmtp(codec);\r\n      sdp += SDPUtils.writeRtcpFb(codec);\r\n    });\r\n    var maxptime = 0;\r\n    caps.codecs.forEach(function(codec) {\r\n      if (codec.maxptime > maxptime) {\r\n        maxptime = codec.maxptime;\r\n      }\r\n    });\r\n    if (maxptime > 0) {\r\n      sdp += 'a=maxptime:' + maxptime + '\\r\\n';\r\n    }\r\n    sdp += 'a=rtcp-mux\\r\\n';\r\n  \r\n    if (caps.headerExtensions) {\r\n      caps.headerExtensions.forEach(function(extension) {\r\n        sdp += SDPUtils.writeExtmap(extension);\r\n      });\r\n    }\r\n    // FIXME: write fecMechanisms.\r\n    return sdp;\r\n  };\r\n  \r\n  // Parses the SDP media section and returns an array of\r\n  // RTCRtpEncodingParameters.\r\n  SDPUtils.parseRtpEncodingParameters = function(mediaSection) {\r\n    var encodingParameters = [];\r\n    var description = SDPUtils.parseRtpParameters(mediaSection);\r\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\r\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\r\n  \r\n    // filter a=ssrc:... cname:, ignore PlanB-msid\r\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\r\n      .map(function(line) {\r\n        return SDPUtils.parseSsrcMedia(line);\r\n      })\r\n      .filter(function(parts) {\r\n        return parts.attribute === 'cname';\r\n      });\r\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\r\n    var secondarySsrc;\r\n  \r\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\r\n      .map(function(line) {\r\n        var parts = line.substr(17).split(' ');\r\n        return parts.map(function(part) {\r\n          return parseInt(part, 10);\r\n        });\r\n      });\r\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\r\n      secondarySsrc = flows[0][1];\r\n    }\r\n  \r\n    description.codecs.forEach(function(codec) {\r\n      if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\r\n        var encParam = {\r\n          ssrc: primarySsrc,\r\n          codecPayloadType: parseInt(codec.parameters.apt, 10)\r\n        };\r\n        if (primarySsrc && secondarySsrc) {\r\n          encParam.rtx = {ssrc: secondarySsrc};\r\n        }\r\n        encodingParameters.push(encParam);\r\n        if (hasRed) {\r\n          encParam = JSON.parse(JSON.stringify(encParam));\r\n          encParam.fec = {\r\n            ssrc: primarySsrc,\r\n            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\r\n          };\r\n          encodingParameters.push(encParam);\r\n        }\r\n      }\r\n    });\r\n    if (encodingParameters.length === 0 && primarySsrc) {\r\n      encodingParameters.push({\r\n        ssrc: primarySsrc\r\n      });\r\n    }\r\n  \r\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\r\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\r\n    if (bandwidth.length) {\r\n      if (bandwidth[0].indexOf('b=TIAS:') === 0) {\r\n        bandwidth = parseInt(bandwidth[0].substr(7), 10);\r\n      } else if (bandwidth[0].indexOf('b=AS:') === 0) {\r\n        // use formula from JSEP to convert b=AS to TIAS value.\r\n        bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\r\n            - (50 * 40 * 8);\r\n      } else {\r\n        bandwidth = undefined;\r\n      }\r\n      encodingParameters.forEach(function(params) {\r\n        params.maxBitrate = bandwidth;\r\n      });\r\n    }\r\n    return encodingParameters;\r\n  };\r\n  \r\n  // parses http://draft.ortc.org/#rtcrtcpparameters*\r\n  SDPUtils.parseRtcpParameters = function(mediaSection) {\r\n    var rtcpParameters = {};\r\n  \r\n    // Gets the first SSRC. Note tha with RTX there might be multiple\r\n    // SSRCs.\r\n    var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\r\n      .map(function(line) {\r\n        return SDPUtils.parseSsrcMedia(line);\r\n      })\r\n      .filter(function(obj) {\r\n        return obj.attribute === 'cname';\r\n      })[0];\r\n    if (remoteSsrc) {\r\n      rtcpParameters.cname = remoteSsrc.value;\r\n      rtcpParameters.ssrc = remoteSsrc.ssrc;\r\n    }\r\n  \r\n    // Edge uses the compound attribute instead of reducedSize\r\n    // compound is !reducedSize\r\n    var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\r\n    rtcpParameters.reducedSize = rsize.length > 0;\r\n    rtcpParameters.compound = rsize.length === 0;\r\n  \r\n    // parses the rtcp-mux attrіbute.\r\n    // Note that Edge does not support unmuxed RTCP.\r\n    var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\r\n    rtcpParameters.mux = mux.length > 0;\r\n  \r\n    return rtcpParameters;\r\n  };\r\n  \r\n  // parses either a=msid: or a=ssrc:... msid lines and returns\r\n  // the id of the MediaStream and MediaStreamTrack.\r\n  SDPUtils.parseMsid = function(mediaSection) {\r\n    var parts;\r\n    var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\r\n    if (spec.length === 1) {\r\n      parts = spec[0].substr(7).split(' ');\r\n      return {stream: parts[0], track: parts[1]};\r\n    }\r\n    var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\r\n      .map(function(line) {\r\n        return SDPUtils.parseSsrcMedia(line);\r\n      })\r\n      .filter(function(msidParts) {\r\n        return msidParts.attribute === 'msid';\r\n      });\r\n    if (planB.length > 0) {\r\n      parts = planB[0].value.split(' ');\r\n      return {stream: parts[0], track: parts[1]};\r\n    }\r\n  };\r\n  \r\n  // SCTP\r\n  // parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\r\n  // to draft-ietf-mmusic-sctp-sdp-05\r\n  SDPUtils.parseSctpDescription = function(mediaSection) {\r\n    var mline = SDPUtils.parseMLine(mediaSection);\r\n    var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\r\n    var maxMessageSize;\r\n    if (maxSizeLine.length > 0) {\r\n      maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\r\n    }\r\n    if (isNaN(maxMessageSize)) {\r\n      maxMessageSize = 65536;\r\n    }\r\n    var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\r\n    if (sctpPort.length > 0) {\r\n      return {\r\n        port: parseInt(sctpPort[0].substr(12), 10),\r\n        protocol: mline.fmt,\r\n        maxMessageSize: maxMessageSize\r\n      };\r\n    }\r\n    var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\r\n    if (sctpMapLines.length > 0) {\r\n      var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\r\n        .substr(10)\r\n        .split(' ');\r\n      return {\r\n        port: parseInt(parts[0], 10),\r\n        protocol: parts[1],\r\n        maxMessageSize: maxMessageSize\r\n      };\r\n    }\r\n  };\r\n  \r\n  // SCTP\r\n  // outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\r\n  // support by now receiving in this format, unless we originally parsed\r\n  // as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\r\n  // protocol of DTLS/SCTP -- without UDP/ or TCP/)\r\n  SDPUtils.writeSctpDescription = function(media, sctp) {\r\n    var output = [];\r\n    if (media.protocol !== 'DTLS/SCTP') {\r\n      output = [\r\n        'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\r\n        'c=IN IP4 0.0.0.0\\r\\n',\r\n        'a=sctp-port:' + sctp.port + '\\r\\n'\r\n      ];\r\n    } else {\r\n      output = [\r\n        'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\r\n        'c=IN IP4 0.0.0.0\\r\\n',\r\n        'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\r\n      ];\r\n    }\r\n    if (sctp.maxMessageSize !== undefined) {\r\n      output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\r\n    }\r\n    return output.join('');\r\n  };\r\n  \r\n  // Generate a session ID for SDP.\r\n  // https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\r\n  // recommends using a cryptographically random +ve 64-bit value\r\n  // but right now this should be acceptable and within the right range\r\n  SDPUtils.generateSessionId = function() {\r\n    return Math.random().toString().substr(2, 21);\r\n  };\r\n  \r\n  // Write boilder plate for start of SDP\r\n  // sessId argument is optional - if not supplied it will\r\n  // be generated randomly\r\n  // sessVersion is optional and defaults to 2\r\n  // sessUser is optional and defaults to 'thisisadapterortc'\r\n  SDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\r\n    var sessionId;\r\n    var version = sessVer !== undefined ? sessVer : 2;\r\n    if (sessId) {\r\n      sessionId = sessId;\r\n    } else {\r\n      sessionId = SDPUtils.generateSessionId();\r\n    }\r\n    var user = sessUser || 'thisisadapterortc';\r\n    // FIXME: sess-id should be an NTP timestamp.\r\n    return 'v=0\\r\\n' +\r\n        'o=' + user + ' ' + sessionId + ' ' + version +\r\n          ' IN IP4 127.0.0.1\\r\\n' +\r\n        's=-\\r\\n' +\r\n        't=0 0\\r\\n';\r\n  };\r\n  \r\n  SDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\r\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\r\n  \r\n    // Map ICE parameters (ufrag, pwd) to SDP.\r\n    sdp += SDPUtils.writeIceParameters(\r\n      transceiver.iceGatherer.getLocalParameters());\r\n  \r\n    // Map DTLS parameters to SDP.\r\n    sdp += SDPUtils.writeDtlsParameters(\r\n      transceiver.dtlsTransport.getLocalParameters(),\r\n      type === 'offer' ? 'actpass' : 'active');\r\n  \r\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\r\n  \r\n    if (transceiver.direction) {\r\n      sdp += 'a=' + transceiver.direction + '\\r\\n';\r\n    } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\r\n      sdp += 'a=sendrecv\\r\\n';\r\n    } else if (transceiver.rtpSender) {\r\n      sdp += 'a=sendonly\\r\\n';\r\n    } else if (transceiver.rtpReceiver) {\r\n      sdp += 'a=recvonly\\r\\n';\r\n    } else {\r\n      sdp += 'a=inactive\\r\\n';\r\n    }\r\n  \r\n    if (transceiver.rtpSender) {\r\n      // spec.\r\n      var msid = 'msid:' + stream.id + ' ' +\r\n          transceiver.rtpSender.track.id + '\\r\\n';\r\n      sdp += 'a=' + msid;\r\n  \r\n      // for Chrome.\r\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n          ' ' + msid;\r\n      if (transceiver.sendEncodingParameters[0].rtx) {\r\n        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n            ' ' + msid;\r\n        sdp += 'a=ssrc-group:FID ' +\r\n            transceiver.sendEncodingParameters[0].ssrc + ' ' +\r\n            transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n            '\\r\\n';\r\n      }\r\n    }\r\n    // FIXME: this should be written by writeRtpDescription.\r\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n    if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\r\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n          ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n    }\r\n    return sdp;\r\n  };\r\n  \r\n  // Gets the direction from the mediaSection or the sessionpart.\r\n  SDPUtils.getDirection = function(mediaSection, sessionpart) {\r\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\r\n    var lines = SDPUtils.splitLines(mediaSection);\r\n    for (var i = 0; i < lines.length; i++) {\r\n      switch (lines[i]) {\r\n        case 'a=sendrecv':\r\n        case 'a=sendonly':\r\n        case 'a=recvonly':\r\n        case 'a=inactive':\r\n          return lines[i].substr(2);\r\n        default:\r\n          // FIXME: What should happen here?\r\n      }\r\n    }\r\n    if (sessionpart) {\r\n      return SDPUtils.getDirection(sessionpart);\r\n    }\r\n    return 'sendrecv';\r\n  };\r\n  \r\n  SDPUtils.getKind = function(mediaSection) {\r\n    var lines = SDPUtils.splitLines(mediaSection);\r\n    var mline = lines[0].split(' ');\r\n    return mline[0].substr(2);\r\n  };\r\n  \r\n  SDPUtils.isRejected = function(mediaSection) {\r\n    return mediaSection.split(' ', 2)[1] === '0';\r\n  };\r\n  \r\n  SDPUtils.parseMLine = function(mediaSection) {\r\n    var lines = SDPUtils.splitLines(mediaSection);\r\n    var parts = lines[0].substr(2).split(' ');\r\n    return {\r\n      kind: parts[0],\r\n      port: parseInt(parts[1], 10),\r\n      protocol: parts[2],\r\n      fmt: parts.slice(3).join(' ')\r\n    };\r\n  };\r\n  \r\n  SDPUtils.parseOLine = function(mediaSection) {\r\n    var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\r\n    var parts = line.substr(2).split(' ');\r\n    return {\r\n      username: parts[0],\r\n      sessionId: parts[1],\r\n      sessionVersion: parseInt(parts[2], 10),\r\n      netType: parts[3],\r\n      addressType: parts[4],\r\n      address: parts[5]\r\n    };\r\n  };\r\n  \r\n  // a very naive interpretation of a valid SDP.\r\n  SDPUtils.isValidSDP = function(blob) {\r\n    if (typeof blob !== 'string' || blob.length === 0) {\r\n      return false;\r\n    }\r\n    var lines = SDPUtils.splitLines(blob);\r\n    for (var i = 0; i < lines.length; i++) {\r\n      if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\r\n        return false;\r\n      }\r\n      // TODO: check the modifier a bit more.\r\n    }\r\n    return true;\r\n  };\r\n  \r\n  // Expose public methods.\r\n  if (typeof module === 'object') {\r\n    module.exports = SDPUtils;\r\n  }\r\n  \r\n  },{}]},{},[1])(1)\r\n  });\r\n  ","export default __webpack_public_path__ + \"static/media/PassageLogo.d587c4b0.svg\";","export default __webpack_public_path__ + \"static/media/facebook_icon.0726e3a3.svg\";","var httpConfig = {\r\n  host: \"https://play.otherworldevent.com\",\r\n  api: \"/api\",\r\n  version: \"/v1\",\r\n  user: \"/user\",\r\n  get login() {\r\n    return this.host + this.api + this.version + \"/login\";\r\n  },\r\n\r\n  get register() {\r\n    return this.host + this.api + this.version + \"/register\";\r\n  },\r\n\r\n  get facebookAuth() {\r\n    return this.host + this.api + this.version + \"/facebook-auth\";\r\n  },\r\n\r\n  get facebookCallback() {\r\n    return (\r\n      this.host +\r\n      this.api +\r\n      this.version +\r\n      this.user +\r\n      \"/facebook/callback?code\"\r\n    );\r\n  },\r\n\r\n  get whoami() {\r\n    return this.host + this.api + this.version + this.user + \"/whoami\";\r\n  },\r\n  get friendsList() {\r\n    return this.host + this.api + this.version + this.user + \"/list-friend\";\r\n  },\r\n  get requestFriendship() {\r\n    return (\r\n      this.host +\r\n      this.api +\r\n      this.version +\r\n      this.user +\r\n      \"/request-for-friendship\"\r\n    );\r\n  },\r\n  get rejectionFriendship() {\r\n    return (\r\n      this.host +\r\n      this.api +\r\n      this.version +\r\n      this.user +\r\n      \"/rejection-of-friendship\"\r\n    );\r\n  },\r\n  get addFriend() {\r\n    return this.host + this.api + this.version + this.user + \"/add-friend\";\r\n  },\r\n  get searchUser() {\r\n    return this.host + this.api + this.version + this.user + \"/search-user\";\r\n  },\r\n  get updateUser() {\r\n    return this.host + this.api + this.version + this.user + \"/update-user\";\r\n  },\r\n  get updatePrivacy() {\r\n    return (\r\n      this.host + this.api + this.version + this.user + \"/update-user-privacy\"\r\n    );\r\n  },\r\n  get addReport() {\r\n    return this.host + this.api + this.version + this.user + \"/add-report\";\r\n  },\r\n  deleteFriend(friendId) {\r\n    return (\r\n      this.host +\r\n      this.api +\r\n      this.version +\r\n      this.user +\r\n      `/delete-friend/${friendId}`\r\n    );\r\n  },\r\n\r\n  getAgoraTokenUrl(channelName) {\r\n    return (\r\n      this.host +\r\n      this.api +\r\n      this.version +\r\n      this.user +\r\n      \"/get-agora-token?channelName=\" +\r\n      channelName\r\n    );\r\n  },\r\n  getNeonListItems(skip, take) {\r\n    return (\r\n      this.host +\r\n      this.api +\r\n      this.version +\r\n      this.user +\r\n      \"/list-items?skip=\" +\r\n      skip +\r\n      \"&take=\" +\r\n      take\r\n    );\r\n  },\r\n  get getGiveMeServer() {\r\n    return \"https://mm.neon-xp.tk/api/v1/public/give-me-server?gameName=enva&mode=standalone\";\r\n  },\r\n};\r\n\r\nexport default httpConfig;\r\n","import axios from \"axios\";\r\nimport http from \"../configs/http\";\r\n\r\nfunction login(login, password) {\r\n  return axios.post(http.login, {\r\n    email: login,\r\n    password: password,\r\n  });\r\n}\r\n\r\nfunction register(login, password, userName, accessCode) {\r\n  return axios.post(http.register, {\r\n    email: login,\r\n    firstName: userName,\r\n    ticket: accessCode,\r\n    password: password,\r\n  });\r\n}\r\n\r\nfunction facebookAuth(token) {\r\n  return axios.post(http.facebookAuth, {\r\n    accessToken: token,\r\n  });\r\n}\r\n\r\nfunction whoami(token) {\r\n  return axios.get(http.whoami, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  });\r\n}\r\n\r\nfunction getAgoraToken(token, channelName) {\r\n  return axios.get(http.getAgoraTokenUrl(channelName), {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  });\r\n}\r\n\r\nfunction getFriendsList(token) {\r\n  return axios.get(http.friendsList, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  });\r\n}\r\n\r\nfunction getNeonItems(token) {\r\n  return axios.get(http.getNeonListItems(0, 999), {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  });\r\n}\r\n\r\nfunction deleteFriend(token, friendId) {\r\n  return axios.patch(\r\n    http.deleteFriend(friendId),\r\n    {},\r\n    {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  );\r\n}\r\nfunction requestFriendship(token, userId) {\r\n  return axios.patch(\r\n    http.requestFriendship,\r\n    {\r\n      userId: userId,\r\n    },\r\n    {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  );\r\n}\r\nfunction rejectionfriendship(token, userId) {\r\n  return axios.patch(\r\n    http.rejectionFriendship,\r\n    {\r\n      userId: userId,\r\n    },\r\n    {}\r\n  );\r\n}\r\nfunction addFriend(token, userId) {\r\n  return axios.patch(\r\n    http.addFriend,\r\n    {\r\n      userid: userId,\r\n    },\r\n    {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  );\r\n}\r\nfunction searchUser(token, email, userName) {\r\n  return axios.get(http.searchUser, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n    email: email,\r\n    userName: userName,\r\n    skip: 0,\r\n    limit: 999999999,\r\n  });\r\n}\r\n\r\nfunction updateUser(token, data) {\r\n  return axios.patch(http.updateUser, data, {\r\n    headers: {\r\n      Authorization: token,\r\n    },\r\n  });\r\n}\r\n\r\nfunction updatePrivacy(\r\n  token,\r\n  searchUserName,\r\n  searchFacebook,\r\n  myVideo,\r\n  myAudio\r\n) {\r\n  return axios.patch(\r\n    http.updatePrivacy,\r\n    {\r\n      searchUserName: searchUserName,\r\n      searchFacebook: searchFacebook,\r\n      myVideo: myVideo,\r\n      myAudio: myAudio,\r\n    },\r\n    {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  );\r\n}\r\nfunction addReport(token, acused, cause, description) {\r\n  return axios.post(\r\n    http.addReport,\r\n    {\r\n      acused: acused,\r\n      cause: cause,\r\n      description: description,\r\n    },\r\n    {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nfunction getGiveMyServer() {\r\n  return axios.get(http.getGiveMeServer);\r\n}\r\n\r\nexport default {\r\n  login,\r\n  register,\r\n  facebookAuth,\r\n  getAgoraToken,\r\n  whoami,\r\n  getFriendsList,\r\n  deleteFriend,\r\n  requestFriendship,\r\n  rejectionfriendship,\r\n  addFriend,\r\n  searchUser,\r\n  updateUser,\r\n  facebookAuth,\r\n  getGiveMyServer,\r\n  updatePrivacy,\r\n  addReport,\r\n  getNeonItems,\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"account\",\r\n  initialState: {\r\n    id: null,\r\n    login: null,\r\n    token: null,\r\n    neonName: null,\r\n    agoraToken: null,\r\n    agoraChannelId: null,\r\n    agoraId: null,\r\n    isSuperUser: false,\r\n    friendsList: [],\r\n    searchUserName: false,\r\n    searchFacebook: false,\r\n    myVideo: false,\r\n    myAudio: false,\r\n    settingsTabDefault: \"1\",\r\n  },\r\n  reducers: {\r\n    setId: (state, action) => {\r\n      state.id = action.payload;\r\n    },\r\n    setToken: (state, action) => {\r\n      state.token = action.payload;\r\n    },\r\n    setAgoraToken: (state, action) => {\r\n      state.agoraToken = action.payload;\r\n    },\r\n    setNeonName: (state, action) => {\r\n      state.neonName = action.payload;\r\n    },\r\n    setLogin: (state, action) => {\r\n      state.login = action.payload;\r\n    },\r\n    setAgoraChannelId: (state, action) => {\r\n      state.agoraChannelId = action.payload;\r\n    },\r\n    setIsSuperUser: (state, action) => {\r\n      state.isSuperUser = action.payload;\r\n    },\r\n    setFriendsList: (state, action) => {\r\n      state.friendsList = action.payload;\r\n    },\r\n    setFriendsList: (state, action) => {\r\n      state.friendsList = action.payload;\r\n    },\r\n    setSearchUserName: (state, action) => {\r\n      state.searchUserName = action.payload;\r\n    },\r\n    setSearchFacebook: (state, action) => {\r\n      state.searchFacebook = action.payload;\r\n    },\r\n    setMyVideo: (state, action) => {\r\n      state.myVideo = action.payload;\r\n    },\r\n    setMyAudio: (state, action) => {\r\n      state.myAudio = action.payload;\r\n    },\r\n    clean: (state) => {\r\n      state.id = null;\r\n      state.token = null;\r\n      state.agoraToken = null;\r\n      state.login = null;\r\n    },\r\n    setSettingsTabDefault: (state, action) => {\r\n      state.settingsTabDefault = action.payload;\r\n    },\r\n    setAgoraId: (state, action) => {\r\n      state.agoraId = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const {\r\n  setToken,\r\n  setLogin,\r\n  setAgoraToken,\r\n  setId,\r\n  setIsSuperUser,\r\n  setAgoraChannelId,\r\n  clean,\r\n  setFriendsList,\r\n  setSearchUserName,\r\n  setSearchFacebook,\r\n  setMyVideo,\r\n  setMyAudio,\r\n  setNeonName,\r\n  setSettingsTabDefault,\r\n  setAgoraId,\r\n} = counterSlice.actions;\r\n\r\nexport default counterSlice.reducer;\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Card,\r\n  Checkbox,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  message,\r\n  Layout,\r\n  notification,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useRouteMatch,\r\n  useParams,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport FacebookLogin from \"react-facebook-login\";\r\n\r\nimport logo from \"../../assets/images/PassageLogo.svg\";\r\nimport facebookLogo from \"../../assets/images/facebook_icon.svg\"\r\nimport { ReactSVG } from \"react-svg\";\r\nimport \"../../styles/style.css\";\r\n\r\nimport accountHttpService from \"../../services/account\";\r\nimport { setLogin as setReduxLogin, setToken } from \"../../redux/accountSlice\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nexport default function LogIn() {\r\n  const { useBreakpoint } = Grid;\r\n\r\n  const [login, setLogin] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const account = useSelector((state) => state.account);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  function loginPressed() {\r\n    if (!login || !password) {\r\n      notification.error({\r\n        message: \"Invalid fields\",\r\n        description: \"Please fill all fields!\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    accountHttpService\r\n      .login(login, password)\r\n      .then((response) => {\r\n        console.debug(response);\r\n\r\n        if (response.status === 200 && response.data.token) {\r\n          dispatch(setReduxLogin(login));\r\n          dispatch(setToken(response.data.token));\r\n\r\n          history.push(\"/initial-setup\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        notification.error({\r\n          message: \"Invalid fields\",\r\n          description: error.response.data.message,\r\n        });\r\n      });\r\n  }\r\n  function responseFacebook(res) {\r\n    accountHttpService\r\n      .facebookAuth(res.accessToken)\r\n      .then((response) => {\r\n        if (response.token) {\r\n          dispatch(setToken(response.token));\r\n        }\r\n        history.push(\"/initial-setup\");\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n  return (\r\n    <Row justify=\"center\">\r\n      <Col\r\n        span={24}\r\n        style={{ textAlign: \"center\", marginBottom: \"-120px\", zIndex: \"1000\" }}\r\n      >\r\n        <ReactSVG src={logo}></ReactSVG>\r\n      </Col>\r\n      <Col\r\n        className=\"login-col\"\r\n        xs={18}\r\n        sm={11}\r\n        md={8}\r\n        lg={8}\r\n        xl={5}\r\n        style={{\r\n          backgroundColor: \"#242424\",\r\n          textAlign: \"center\",\r\n          borderRadius: \"24px\",\r\n          pointerEvents: \"auto\",\r\n          paddingTop: \"105px\",\r\n          maxWidth: \"390px\",\r\n          minWidth: \"350px\",\r\n        }}\r\n      >\r\n        <Row justify=\"center\">\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              fontFamily: \"Niveau Grotesk Bold\",\r\n              color: \"white\",\r\n              textAlign: \"center\",\r\n              marginBottom: \"7px\",\r\n              fontWeight: \"normal\",\r\n              marginTop: \"15px\",\r\n            }}\r\n          >\r\n            LOG IN\r\n          </Col>\r\n          <Col span={22}>\r\n            <input\r\n              className=\"auth-input\"\r\n              onChange={(event) => {\r\n                setLogin(event.currentTarget.value);\r\n              }}\r\n              placeholder=\"Email or Username\"\r\n              type=\"text\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={22} style={{ marginBottom: \"8px\" }}>\r\n            <input\r\n              onChange={(event) => {\r\n                setPassword(event.currentTarget.value);\r\n              }}\r\n              type=\"password\"\r\n              className=\"auth-input\"\r\n              placeholder=\"Password\"\r\n            ></input>\r\n          </Col>\r\n          <Col\r\n            span={20}\r\n            className=\"remember-row\"\r\n            style={{ marginBottom: \"16px\", fontFamily: \"Montserrat\" }}\r\n          >\r\n            <Row justify=\"space-between\">\r\n              <Col span={12}>\r\n                <Checkbox style={{ color: \"grey\" }}>Remember me</Checkbox>\r\n              </Col>\r\n              <Col\r\n                className=\"forgot-password\"\r\n                span={12}\r\n                style={{\r\n                  color: \"grey\",\r\n                  textDecoration: \"underline\",\r\n                }}\r\n              >\r\n                <Link\r\n                  to=\"/reset-password\"\r\n                  style={{\r\n                    textDecoration: \"none\",\r\n                    color: \"grey\",\r\n                  }}\r\n                >\r\n                  Forgot password?\r\n                </Link>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col span={22}>\r\n            <button onClick={(event) => loginPressed()} className=\"auth-button\">\r\n              LOG IN\r\n            </button>\r\n          </Col>\r\n          {/* <Col style={{ marginTop: 10 }} span={22}>\r\n            <FacebookLogin\r\n              appId=\"1088597931155576\"\r\n              autoLoad={false}\r\n              fields=\"name,email,picture\"\r\n              callback={responseFacebook}\r\n              cssClass=\"facebook-auth-button\"\r\n              \r\n              textButton=\"LOG IN WITH FACEBOOK\"\r\n            />\r\n          </Col> */}\r\n          <Col\r\n            span={22}\r\n            style={{\r\n              textAlign: \"center\",\r\n              color: \"grey\",\r\n              fontFamily: \"Montserrat\",\r\n              fontSize: \"14px\",\r\n              marginBottom: \"16px\",\r\n            }}\r\n          >\r\n            Not signed up?\r\n          </Col>\r\n          <Col style={{ marginBottom: 12 }} span={22}>\r\n            <Link to=\"/registration\">\r\n              <button\r\n                className=\"auth-button\"\r\n                style={{\r\n                  backgroundColor: \"#5b5b5b\",\r\n                  boxShadow: \"0px 4px 0px #4f4f4f\",\r\n                  marginBottom: \"20px\",\r\n                }}\r\n              >\r\n                REGISTER\r\n              </button>\r\n            </Link>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  notification,\r\n  Tag,\r\n} from \"antd\";\r\nimport { useState, useEffect } from \"react\";\r\nimport logo from \"../../assets/images/PassageLogo.svg\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport \"../../styles/style.css\";\r\n\r\nimport accountHttpService from \"../../services/account\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { setLogin as setReduxLogin, setToken } from \"../../redux/accountSlice\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nexport default function Registration() {\r\n  const [login, setLogin] = useState(\"\");\r\n  const [publicUserName, setPublicUserName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [accessCode, setAccessCode] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  function registerPressed() {\r\n    if (!login || !password) {\r\n      notification.open({\r\n        message: \"Invalid fields\",\r\n        description: \"Please fill all fields!\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    accountHttpService\r\n      .register(login, password, publicUserName, accessCode)\r\n      .then((response) => {\r\n        console.debug(response);\r\n\r\n        if (response.status === 200 && response.data.token) {\r\n          dispatch(setReduxLogin(login));\r\n          dispatch(setToken(response.data.token));\r\n\r\n          history.push(\"/initial-setup\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        notification.error({\r\n          message: \"Invalid fields\",\r\n          description: error.response.data.message,\r\n        });\r\n      });\r\n  }\r\n\r\n  function cancelPressed() {\r\n    history.goBack();\r\n  }\r\n\r\n  return (\r\n    <Row justify=\"center\" align=\"middle\">\r\n      <Col\r\n        span={24}\r\n        style={{ textAlign: \"center\", marginBottom: \"-120px\", zIndex: \"1000\" }}\r\n      >\r\n        <ReactSVG src={logo}></ReactSVG>\r\n      </Col>\r\n      <Col\r\n        xs={18}\r\n        sm={11}\r\n        md={8}\r\n        lg={8}\r\n        xl={5}\r\n        style={{\r\n          backgroundColor: \"#242424\",\r\n          textAlign: \"center\",\r\n          borderRadius: \"24px\",\r\n          pointerEvents: \"auto\",\r\n          paddingTop: \"105px\",\r\n          maxWidth: \"390px\",\r\n          minWidth: \"390px\",\r\n        }}\r\n      >\r\n        <Row justify=\"center\">\r\n          <Col\r\n            span={24}\r\n            className=\"login-col\"\r\n            style={{\r\n              color: \"white\",\r\n              textAlign: \"center\",\r\n              marginBottom: \"7px\",\r\n              fontWeight: \"normal\",\r\n              marginTop: \"15px\",\r\n            }}\r\n          >\r\n            REGISTRATION\r\n          </Col>\r\n          <Col span={22}>\r\n            <input\r\n              onChange={(event) => {\r\n                setLogin(event.currentTarget.value);\r\n              }}\r\n              className=\"auth-input\"\r\n              placeholder=\"Email\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={22}>\r\n            <input\r\n              onChange={(event) => {\r\n                setPublicUserName(event.currentTarget.value);\r\n              }}\r\n              className=\"auth-input\"\r\n              placeholder=\"Public Username\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={22}>\r\n            <input\r\n              onChange={(event) => {\r\n                setPassword(event.currentTarget.value);\r\n              }}\r\n              type=\"password\"\r\n              className=\"auth-input\"\r\n              placeholder=\"Password\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={22}>\r\n            <input\r\n              onChange={(event) => {\r\n                setConfirmPassword(event.currentTarget.value);\r\n              }}\r\n              type=\"password\"\r\n              className=\"auth-input\"\r\n              placeholder=\"Confirm Password\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={22} style={{ marginBottom: \"8px\" }}>\r\n            <input\r\n              onChange={(event) => {\r\n                setAccessCode(event.currentTarget.value);\r\n              }}\r\n              className=\"auth-input\"\r\n              placeholder=\"Access Code\"\r\n            ></input>\r\n          </Col>\r\n          <Col style={{ marginBottom: \"10px\" }} span={22}>\r\n            <button\r\n              onClick={() => {\r\n                registerPressed();\r\n              }}\r\n              className=\"auth-button\"\r\n            >\r\n              SIGN UP\r\n            </button>\r\n          </Col>\r\n          <Col span={22}>\r\n            <button\r\n              className=\"auth-button\"\r\n              onClick={() => {\r\n                cancelPressed();\r\n              }}\r\n              style={{\r\n                backgroundColor: \"#5b5b5b\",\r\n                boxShadow: \"0px 4px 0px #4f4f4f\",\r\n                marginBottom: \"18px\",\r\n              }}\r\n            >\r\n              CANCEL\r\n            </button>\r\n          </Col>\r\n          <Col\r\n            span={22}\r\n            className=\"auth-text\"\r\n            style={{\r\n              marginBottom: \"18px\",\r\n            }}\r\n          >\r\n            Don't have an access code?\r\n          </Col>\r\n          {/* <Col span={22}>\r\n            <button className=\"auth-button\" style={{ marginBottom: \"40px\" }}>\r\n              BUY A TICKET(S)\r\n            </button>\r\n          </Col> */}\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export const AGORA_APP_ID = \"a0c69aca0e2e4c9c86bd3bbd8854ce3d\"; // set your app id here\r\n\r\nexport default { AGORA_APP_ID };\r\n","// Copyright Epic Games, Inc. All Rights Reserved.\r\nimport webRtcPlayer from \"./webRtcPlayer\";\r\nimport ue4appInstance from \"../../ue4appInstanse\";\r\n\r\nvar isLoaded = false;\r\n\r\nvar webRtcPlayerObj = null;\r\nvar print_stats = false;\r\nvar print_inputs = true;\r\nvar connect_on_load = false;\r\n\r\nvar wsUrl;\r\n\r\nvar is_reconnection = false;\r\nvar ws;\r\nconst WS_OPEN_STATE = 1;\r\n\r\nvar qualityControlOwnershipCheckBox;\r\nvar matchViewportResolution;\r\n// TODO: Remove this - workaround because of bug causing UE to crash when switching resolutions too quickly\r\nvar lastTimeResized = new Date().getTime();\r\nvar resizeTimeout;\r\n\r\nvar onDataChannelConnected;\r\nvar responseEventListeners = new Map();\r\n\r\nvar unquantizeAndDenormalizeUnsigned;\r\n\r\nvar freezeFrameOverlay = null;\r\nvar shouldShowPlayOverlay = true;\r\n// A freeze frame is a still JPEG image shown instead of the video.\r\nvar freezeFrame = {\r\n  receiving: false,\r\n  size: 0,\r\n  jpeg: undefined,\r\n  height: 0,\r\n  width: 0,\r\n  valid: false,\r\n};\r\n\r\n// Optionally detect if the user is not interacting (AFK) and disconnect them.\r\nvar afk = {\r\n  enabled: false, // Set to true to enable the AFK system.\r\n  warnTimeout: 120, // The time to elapse before warning the user they are inactive.\r\n  closeTimeout: 10, // The time after the warning when we disconnect the user.\r\n\r\n  active: false, // Whether the AFK system is currently looking for inactivity.\r\n  overlay: undefined, // The UI overlay warning the user that they are inactive.\r\n  warnTimer: undefined, // The timer which waits to show the inactivity warning overlay.\r\n  countdown: 0, // The inactivity warning overlay has a countdown to show time until disconnect.\r\n  countdownTimer: undefined, // The timer used to tick the seconds shown on the inactivity warning overlay.\r\n};\r\n// If the user focuses on a UE4 input widget then we show them a button to open\r\n// the on-screen keyboard. JavaScript security means we can only show the\r\n// on-screen keyboard in response to a user interaction.\r\nvar editTextButton = undefined;\r\n\r\n// A hidden input text box which is used only for focusing and opening the\r\n// on-screen keyboard.\r\nvar hiddenInput = undefined;\r\n\r\nvar t0 = Date.now();\r\nfunction log(str) {\r\n  console.log(`${Math.floor(Date.now() - t0)}: ` + str);\r\n}\r\n\r\nfunction setupHtmlEvents() {\r\n  //Window events\r\n  window.addEventListener(\"resize\", resizePlayerStyle, true);\r\n  window.addEventListener(\"orientationchange\", onOrientationChange);\r\n\r\n  let resizeCheckBox = document.getElementById(\r\n    \"enlarge-display-to-fill-window-tgl\"\r\n  );\r\n  if (resizeCheckBox !== null) {\r\n    resizeCheckBox.onchange = function (event) {\r\n      resizePlayerStyle();\r\n    };\r\n  }\r\n\r\n  qualityControlOwnershipCheckBox = document.getElementById(\r\n    \"quality-control-ownership-tgl\"\r\n  );\r\n  if (qualityControlOwnershipCheckBox !== null) {\r\n    qualityControlOwnershipCheckBox.onchange = function (event) {\r\n      requestQualityControl();\r\n    };\r\n  }\r\n\r\n  let prioritiseQualityCheckbox = document.getElementById(\r\n    \"prioritise-quality-tgl\"\r\n  );\r\n  let qualityParamsSubmit = document.getElementById(\"quality-params-submit\");\r\n\r\n  if (prioritiseQualityCheckbox !== null) {\r\n    prioritiseQualityCheckbox.onchange = function (event) {\r\n      if (prioritiseQualityCheckbox.checked) {\r\n        // TODO: This state should be read from the UE Application rather than from the initial values in the HTML\r\n        let lowBitrate = document.getElementById(\"low-bitrate-text\").value;\r\n        let highBitrate = document.getElementById(\"high-bitrate-text\").value;\r\n        let minFPS = document.getElementById(\"min-fps-text\").value;\r\n\r\n        let initialDescriptor = {\r\n          PrioritiseQuality: 1,\r\n          LowBitrate: lowBitrate,\r\n          HighBitrate: highBitrate,\r\n          MinFPS: minFPS,\r\n        };\r\n        // TODO: The descriptor should be sent as is to a generic handler on the UE side\r\n        // but for now we're just sending it as separate console commands\r\n        //emitUIInteraction(initialDescriptor);\r\n        sendQualityConsoleCommands(initialDescriptor);\r\n        console.log(initialDescriptor);\r\n\r\n        qualityParamsSubmit.onclick = function (event) {\r\n          let lowBitrate = document.getElementById(\"low-bitrate-text\").value;\r\n          let highBitrate = document.getElementById(\"high-bitrate-text\").value;\r\n          let minFPS = document.getElementById(\"min-fps-text\").value;\r\n          let descriptor = {\r\n            PrioritiseQuality: 1,\r\n            LowBitrate: lowBitrate,\r\n            HighBitrate: highBitrate,\r\n            MinFPS: minFPS,\r\n          };\r\n          //emitUIInteraction(descriptor);\r\n          sendQualityConsoleCommands(descriptor);\r\n          console.log(descriptor);\r\n        };\r\n      } else {\r\n        // Prioritise Quality unchecked\r\n        let initialDescriptor = {\r\n          PrioritiseQuality: 0,\r\n        };\r\n        //emitUIInteraction(initialDescriptor);\r\n        sendQualityConsoleCommands(initialDescriptor);\r\n        console.log(initialDescriptor);\r\n\r\n        qualityParamsSubmit.onclick = null;\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction sendQualityConsoleCommands(descriptor) {\r\n  if (descriptor.PrioritiseQuality !== null) {\r\n    let command = \"Streamer.PrioritiseQuality \" + descriptor.PrioritiseQuality;\r\n    let consoleDescriptor = {\r\n      Console: command,\r\n    };\r\n    emitUIInteraction(consoleDescriptor);\r\n  }\r\n\r\n  if (descriptor.LowBitrate !== null) {\r\n    let command = \"Streamer.LowBitrate \" + descriptor.LowBitrate;\r\n    let consoleDescriptor = {\r\n      Console: command,\r\n    };\r\n    emitUIInteraction(consoleDescriptor);\r\n  }\r\n\r\n  if (descriptor.HighBitrate !== null) {\r\n    let command = \"Streamer.HighBitrate \" + descriptor.HighBitrate;\r\n    let consoleDescriptor = {\r\n      Console: command,\r\n    };\r\n    emitUIInteraction(consoleDescriptor);\r\n  }\r\n\r\n  if (descriptor.MinFPS !== null) {\r\n    var command = \"Streamer.MinFPS \" + descriptor.MinFPS;\r\n    let consoleDescriptor = {\r\n      Console: command,\r\n    };\r\n    emitUIInteraction(consoleDescriptor);\r\n  }\r\n}\r\n\r\nfunction addResponseEventListener(name, listener) {\r\n  responseEventListeners.set(name, listener);\r\n}\r\n\r\nfunction removeResponseEventListener(name) {\r\n  responseEventListeners.remove(name);\r\n}\r\n\r\nfunction setOverlay(htmlClass, htmlElement, onClickFunction) {\r\n  var videoPlayOverlay = document.getElementById(\"videoPlayOverlay\");\r\n  if (!videoPlayOverlay) {\r\n    var playerDiv = document.getElementById(\"player\");\r\n    videoPlayOverlay = document.createElement(\"div\");\r\n    videoPlayOverlay.id = \"videoPlayOverlay\";\r\n    playerDiv.appendChild(videoPlayOverlay);\r\n  }\r\n\r\n  // Remove existing html child elements so we can add the new one\r\n  while (videoPlayOverlay.lastChild) {\r\n    videoPlayOverlay.removeChild(videoPlayOverlay.lastChild);\r\n  }\r\n\r\n  if (htmlElement) videoPlayOverlay.appendChild(htmlElement);\r\n\r\n  if (onClickFunction) {\r\n    videoPlayOverlay.addEventListener(\"click\", function onOverlayClick(event) {\r\n      onClickFunction(event);\r\n      videoPlayOverlay.removeEventListener(\"click\", onOverlayClick);\r\n    });\r\n  }\r\n\r\n  // Remove existing html classes so we can set the new one\r\n  var cl = videoPlayOverlay.classList;\r\n  for (var i = cl.length - 1; i >= 0; i--) {\r\n    cl.remove(cl[i]);\r\n  }\r\n\r\n  videoPlayOverlay.classList.add(htmlClass);\r\n}\r\n\r\nfunction showConnectOverlay() {\r\n  connect();\r\n  startAfkWarningTimer();\r\n}\r\n\r\nfunction showTextOverlay(text) {\r\n  var textOverlay = document.createElement(\"div\");\r\n  textOverlay.id = \"messageOverlay\";\r\n  textOverlay.innerHTML = text ? text : \"\";\r\n  setOverlay(\"textDisplayState\", textOverlay);\r\n}\r\n\r\nfunction showPlayOverlay() {}\r\n\r\nfunction handleHomepageClick() {\r\n  if (webRtcPlayerObj) webRtcPlayerObj.video.play();\r\n\r\n  requestQualityControl();\r\n\r\n  showFreezeFrameOverlay();\r\n  hideOverlay();\r\n  shouldShowPlayOverlay = false;\r\n}\r\n\r\nfunction updateAfkOverlayText() {\r\n  afk.overlay.innerHTML =\r\n    \"<center>No activity detected<br>Disconnecting in \" +\r\n    afk.countdown +\r\n    \" seconds<br>Click to continue<br></center>\";\r\n}\r\n\r\nfunction showAfkOverlay() {\r\n  // Pause the timer while the user is looking at the inactivity warning overlay.\r\n  stopAfkWarningTimer();\r\n\r\n  // Show the inactivity warning overlay.\r\n  afk.overlay = document.createElement(\"div\");\r\n  afk.overlay.id = \"afkOverlay\";\r\n  setOverlay(\"clickableState\", afk.overlay, (event) => {\r\n    // The user clicked so start the timer again and carry on.\r\n    hideOverlay();\r\n    clearInterval(afk.countdownTimer);\r\n    startAfkWarningTimer();\r\n  });\r\n\r\n  afk.countdown = afk.closeTimeout;\r\n  updateAfkOverlayText();\r\n\r\n  if (inputOptions.controlScheme == ControlSchemeType.LockedMouse) {\r\n    document.exitPointerLock();\r\n  }\r\n\r\n  afk.countdownTimer = setInterval(function () {\r\n    afk.countdown--;\r\n    if (afk.countdown == 0) {\r\n      // The user failed to click so disconnect them.\r\n      hideOverlay();\r\n      ws.close();\r\n    } else {\r\n      // Update the countdown message.\r\n      updateAfkOverlayText();\r\n    }\r\n  }, 1000);\r\n}\r\n\r\nfunction hideOverlay() {\r\n  setOverlay(\"hiddenState\");\r\n}\r\n\r\n// Start a timer which when elapsed will warn the user they are inactive.\r\nfunction startAfkWarningTimer() {\r\n  afk.active = afk.enabled;\r\n  resetAfkWarningTimer();\r\n}\r\n\r\n// Stop the timer which when elapsed will warn the user they are inactive.\r\nfunction stopAfkWarningTimer() {\r\n  afk.active = false;\r\n}\r\n\r\n// If the user interacts then reset the warning timer.\r\nfunction resetAfkWarningTimer() {\r\n  if (afk.active) {\r\n    clearTimeout(afk.warnTimer);\r\n    afk.warnTimer = setTimeout(function () {\r\n      showAfkOverlay();\r\n    }, afk.warnTimeout * 1000);\r\n  }\r\n}\r\n\r\nfunction createWebRtcOffer() {\r\n  if (webRtcPlayerObj) {\r\n    console.log(\"Creating offer\");\r\n    //showTextOverlay(\"Starting connection to server, please wait\"); //текст вверху\r\n    webRtcPlayerObj.createOffer();\r\n  } else {\r\n    console.log(\"WebRTC player not setup, cannot create offer\");\r\n    showTextOverlay(\"Unable to setup video\");\r\n  }\r\n}\r\n\r\nfunction sendInputData(data) {\r\n  if (webRtcPlayerObj) {\r\n    resetAfkWarningTimer();\r\n    webRtcPlayerObj.send(data);\r\n  }\r\n}\r\n\r\n// Must be kept in sync with PixelStreamingProtocol::EToClientMsg C++ enum.\r\nconst ToClientMessageType = {\r\n  QualityControlOwnership: 0,\r\n  Response: 1,\r\n  Command: 2,\r\n  FreezeFrame: 3,\r\n  UnfreezeFrame: 4,\r\n  VideoEncoderAvgQP: 5,\r\n};\r\n\r\nvar VideoEncoderQP = \"N/A\";\r\n\r\nfunction setupWebRtcPlayer(htmlElement, config) {\r\n  webRtcPlayerObj = new webRtcPlayer({\r\n    peerConnectionOptions: config.peerConnectionOptions,\r\n  });\r\n  htmlElement.appendChild(webRtcPlayerObj.video);\r\n  htmlElement.appendChild(freezeFrameOverlay);\r\n\r\n  webRtcPlayerObj.onWebRtcOffer = function (offer) {\r\n    if (ws && ws.readyState === WS_OPEN_STATE) {\r\n      let offerStr = JSON.stringify(offer);\r\n      console.log(`-> SS: offer:\\n${offerStr}`);\r\n      ws.send(offerStr);\r\n    }\r\n  };\r\n\r\n  webRtcPlayerObj.onWebRtcCandidate = function (candidate) {\r\n    if (ws && ws.readyState === WS_OPEN_STATE) {\r\n      console.log(\r\n        `-> SS: iceCandidate\\n${JSON.stringify(candidate, undefined, 4)}`\r\n      );\r\n      ws.send(JSON.stringify({ type: \"iceCandidate\", candidate: candidate }));\r\n    }\r\n  };\r\n\r\n  webRtcPlayerObj.onVideoInitialised = function () {\r\n    if (ws && ws.readyState === WS_OPEN_STATE) {\r\n      if (shouldShowPlayOverlay) {\r\n        showPlayOverlay();\r\n        resizePlayerStyle();\r\n      }\r\n    }\r\n  };\r\n\r\n  webRtcPlayerObj.onDataChannelConnected = function () {\r\n    if (ws && ws.readyState === WS_OPEN_STATE) {\r\n      ue4appInstance.getInstance().dataChannelInitedUE4Callback();\r\n    }\r\n  };\r\n\r\n  function showFreezeFrame() {\r\n    let base64 = btoa(\r\n      freezeFrame.jpeg.reduce(\r\n        (data, byte) => data + String.fromCharCode(byte),\r\n        \"\"\r\n      )\r\n    );\r\n    freezeFrameOverlay.src = \"data:image/jpeg;base64,\" + base64;\r\n    freezeFrameOverlay.onload = function () {\r\n      freezeFrame.height = freezeFrameOverlay.naturalHeight;\r\n      freezeFrame.width = freezeFrameOverlay.naturalWidth;\r\n      resizeFreezeFrameOverlay();\r\n      if (shouldShowPlayOverlay) {\r\n        showPlayOverlay();\r\n        resizePlayerStyle();\r\n      } else {\r\n        showFreezeFrameOverlay();\r\n      }\r\n    };\r\n  }\r\n\r\n  webRtcPlayerObj.onDataChannelMessage = function (data) {\r\n    var view = new Uint8Array(data);\r\n\r\n    /* SLV fix with possible performance implications since Firefox seems to send blobs instead of ArrayBuffers */\r\n    if (typeof data === \"object\") {\r\n      if (data.constructor.name === \"Blob\") {\r\n        let fileReader = new FileReader();\r\n        fileReader.onload = (evt) => {\r\n          var arrayBuffer = evt.target.result;\r\n          this.onDataChannelMessage(arrayBuffer);\r\n        };\r\n        fileReader.readAsArrayBuffer(data);\r\n        return;\r\n      }\r\n    }\r\n\r\n    /* End of SLV fix */\r\n\r\n    if (freezeFrame.receiving) {\r\n      let jpeg = new Uint8Array(freezeFrame.jpeg.length + view.length);\r\n      jpeg.set(freezeFrame.jpeg, 0);\r\n      jpeg.set(view, freezeFrame.jpeg.length);\r\n      freezeFrame.jpeg = jpeg;\r\n      if (freezeFrame.jpeg.length === freezeFrame.size) {\r\n        freezeFrame.receiving = false;\r\n        freezeFrame.valid = true;\r\n        console.log(`received complete freeze frame ${freezeFrame.size}`);\r\n        showFreezeFrame();\r\n      } else if (freezeFrame.jpeg.length > freezeFrame.size) {\r\n        console.error(\r\n          `received bigger freeze frame than advertised: ${freezeFrame.jpeg.length}/${freezeFrame.size}`\r\n        );\r\n        freezeFrame.jpeg = undefined;\r\n        freezeFrame.receiving = false;\r\n      } else {\r\n        console.log(\r\n          `received next chunk (${view.length} bytes) of freeze frame: ${freezeFrame.jpeg.length}/${freezeFrame.size}`\r\n        );\r\n      }\r\n    } else if (view[0] === ToClientMessageType.QualityControlOwnership) {\r\n      let ownership = view[1] === 0 ? false : true;\r\n      // If we own the quality control, we can't relenquish it. We only loose\r\n      // quality control when another peer asks for it\r\n    } else if (view[0] === ToClientMessageType.Response) {\r\n      let response = new TextDecoder(\"utf-16\").decode(data.slice(1));\r\n      console.debug(responseEventListeners);\r\n      for (let listener of responseEventListeners.values()) {\r\n        listener(response);\r\n      }\r\n    } else if (view[0] === ToClientMessageType.Command) {\r\n      let commandAsString = new TextDecoder(\"utf-16\").decode(data.slice(1));\r\n      let command = JSON.parse(commandAsString);\r\n      if (command.command === \"onScreenKeyboard\") {\r\n        showOnScreenKeyboard(command);\r\n      }\r\n    } else if (view[0] === ToClientMessageType.FreezeFrame) {\r\n      freezeFrame.size = new DataView(view.slice(1, 5).buffer).getInt32(\r\n        0,\r\n        true\r\n      );\r\n      freezeFrame.jpeg = view.slice(1 + 4);\r\n      if (freezeFrame.jpeg.length < freezeFrame.size) {\r\n        console.log(\r\n          `received first chunk of freeze frame: ${freezeFrame.jpeg.length}/${freezeFrame.size}`\r\n        );\r\n        freezeFrame.receiving = true;\r\n      } else {\r\n        console.log(\r\n          `received complete freeze frame: ${freezeFrame.jpeg.length}/${freezeFrame.size}`\r\n        );\r\n        showFreezeFrame();\r\n      }\r\n    } else if (view[0] === ToClientMessageType.UnfreezeFrame) {\r\n      invalidateFreezeFrameOverlay();\r\n    } else {\r\n      console.error(`unrecognised data received, packet ID ${view[0]}`);\r\n    }\r\n  };\r\n\r\n  registerInputs(webRtcPlayerObj.video);\r\n\r\n  // On a touch device we will need special ways to show the on-screen keyboard.\r\n  if (\"ontouchstart\" in document.documentElement) {\r\n    createOnScreenKeyboardHelpers(htmlElement);\r\n  }\r\n\r\n  createWebRtcOffer();\r\n\r\n  return webRtcPlayerObj.video;\r\n}\r\n\r\nfunction createOnScreenKeyboardHelpers(htmlElement) {\r\n  if (document.getElementById(\"hiddenInput\") === null) {\r\n    hiddenInput = document.createElement(\"input\");\r\n    hiddenInput.id = \"hiddenInput\";\r\n    hiddenInput.maxLength = 0;\r\n    htmlElement.appendChild(hiddenInput);\r\n  }\r\n\r\n  if (document.getElementById(\"editTextButton\") === null) {\r\n    editTextButton = document.createElement(\"button\");\r\n    editTextButton.id = \"editTextButton\";\r\n    editTextButton.innerHTML = \"edit text\";\r\n    htmlElement.appendChild(editTextButton);\r\n\r\n    // Hide the 'edit text' button.\r\n    editTextButton.classList.add(\"hiddenState\");\r\n\r\n    editTextButton.addEventListener(\"click\", function () {\r\n      // Show the on-screen keyboard.\r\n      hiddenInput.focus();\r\n    });\r\n  }\r\n}\r\n\r\nfunction onWebRtcAnswer(webRTCData) {\r\n  webRtcPlayerObj.receiveAnswer(webRTCData);\r\n\r\n  let printInterval = 5 * 60 * 1000; /*Print every 5 minutes*/\r\n  let nextPrintDuration = printInterval;\r\n\r\n  webRtcPlayerObj.onAggregatedStats = (aggregatedStats) => {\r\n    let numberFormat = new Intl.NumberFormat(window.navigator.language, {\r\n      maximumFractionDigits: 0,\r\n    });\r\n    let timeFormat = new Intl.NumberFormat(window.navigator.language, {\r\n      maximumFractionDigits: 0,\r\n      minimumIntegerDigits: 2,\r\n    });\r\n    let statsText = \"\";\r\n\r\n    // Calculate duration of run\r\n    let runTime =\r\n      (aggregatedStats.timestamp - aggregatedStats.timestampStart) / 1000;\r\n    let timeValues = [];\r\n    let timeDurations = [60, 60];\r\n    for (let timeIndex = 0; timeIndex < timeDurations.length; timeIndex++) {\r\n      timeValues.push(runTime % timeDurations[timeIndex]);\r\n      runTime = runTime / timeDurations[timeIndex];\r\n    }\r\n    timeValues.push(runTime);\r\n\r\n    let runTimeSeconds = timeValues[0];\r\n    let runTimeMinutes = Math.floor(timeValues[1]);\r\n    let runTimeHours = Math.floor([timeValues[2]]);\r\n\r\n    let receivedBytesMeasurement = \"B\";\r\n    let receivedBytes = aggregatedStats.hasOwnProperty(\"bytesReceived\")\r\n      ? aggregatedStats.bytesReceived\r\n      : 0;\r\n    let dataMeasurements = [\"kB\", \"MB\", \"GB\"];\r\n    for (let index = 0; index < dataMeasurements.length; index++) {\r\n      if (receivedBytes < 100 * 1000) break;\r\n      receivedBytes = receivedBytes / 1000;\r\n      receivedBytesMeasurement = dataMeasurements[index];\r\n    }\r\n\r\n    statsText += `Duration: ${timeFormat.format(\r\n      runTimeHours\r\n    )}:${timeFormat.format(runTimeMinutes)}:${timeFormat.format(\r\n      runTimeSeconds\r\n    )}</br>`;\r\n    statsText += `Video Resolution: ${\r\n      aggregatedStats.hasOwnProperty(\"frameWidth\") &&\r\n      aggregatedStats.frameWidth &&\r\n      aggregatedStats.hasOwnProperty(\"frameHeight\") &&\r\n      aggregatedStats.frameHeight\r\n        ? aggregatedStats.frameWidth + \"x\" + aggregatedStats.frameHeight\r\n        : \"N/A\"\r\n    }</br>`;\r\n    statsText += `Received (${receivedBytesMeasurement}): ${numberFormat.format(\r\n      receivedBytes\r\n    )}</br>`;\r\n    statsText += `Frames Decoded: ${\r\n      aggregatedStats.hasOwnProperty(\"framesDecoded\")\r\n        ? numberFormat.format(aggregatedStats.framesDecoded)\r\n        : \"N/A\"\r\n    }</br>`;\r\n    statsText += `Packets Lost: ${\r\n      aggregatedStats.hasOwnProperty(\"packetsLost\")\r\n        ? numberFormat.format(aggregatedStats.packetsLost)\r\n        : \"N/A\"\r\n    }</br>`;\r\n    statsText += `Bitrate (kbps): ${\r\n      aggregatedStats.hasOwnProperty(\"bitrate\")\r\n        ? numberFormat.format(aggregatedStats.bitrate)\r\n        : \"N/A\"\r\n    }</br>`;\r\n    statsText += `Framerate: ${\r\n      aggregatedStats.hasOwnProperty(\"framerate\")\r\n        ? numberFormat.format(aggregatedStats.framerate)\r\n        : \"N/A\"\r\n    }</br>`;\r\n    statsText += `Frames dropped: ${\r\n      aggregatedStats.hasOwnProperty(\"framesDropped\")\r\n        ? numberFormat.format(aggregatedStats.framesDropped)\r\n        : \"N/A\"\r\n    }</br>`;\r\n    statsText += `Latency (ms): ${\r\n      aggregatedStats.hasOwnProperty(\"currentRoundTripTime\")\r\n        ? numberFormat.format(aggregatedStats.currentRoundTripTime * 1000)\r\n        : \"N/A\"\r\n    }</br>`;\r\n\r\n    if (print_stats) {\r\n      if (aggregatedStats.timestampStart) {\r\n        if (\r\n          aggregatedStats.timestamp - aggregatedStats.timestampStart >\r\n          nextPrintDuration\r\n        ) {\r\n          if (ws && ws.readyState === WS_OPEN_STATE) {\r\n            console.log(`-> SS: stats\\n${JSON.stringify(aggregatedStats)}`);\r\n            ws.send(JSON.stringify({ type: \"stats\", data: aggregatedStats }));\r\n          }\r\n          nextPrintDuration += printInterval;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  webRtcPlayerObj.aggregateStats(1 * 1000 /*Check every 1 second*/);\r\n\r\n  //let displayStats = () => { webRtcPlayerObj.getStats( (s) => { s.forEach(stat => { console.log(JSON.stringify(stat)); }); } ); }\r\n  //var displayStatsIntervalId = setInterval(displayStats, 30 * 1000);\r\n}\r\n\r\nfunction onWebRtcIce(iceCandidate) {\r\n  if (webRtcPlayerObj) webRtcPlayerObj.handleCandidateFromServer(iceCandidate);\r\n}\r\n\r\nvar styleWidth;\r\nvar styleHeight;\r\nvar styleTop;\r\nvar styleLeft;\r\nvar styleCursor = \"default\";\r\nvar styleAdditional;\r\n\r\nconst ControlSchemeType = {\r\n  // A mouse can lock inside the WebRTC player so the user can simply move the\r\n  // mouse to control the orientation of the camera. The user presses the\r\n  // Escape key to unlock the mouse.\r\n  LockedMouse: 0,\r\n\r\n  // A mouse can hover over the WebRTC player so the user needs to click and\r\n  // drag to control the orientation of the camera.\r\n  HoveringMouse: 1,\r\n};\r\n\r\nvar inputOptions = {\r\n  // The control scheme controls the behaviour of the mouse when it interacts\r\n  // with the WebRTC player.\r\n  controlScheme: ControlSchemeType.LockedMouse,\r\n\r\n  // Browser keys are those which are typically used by the browser UI. We\r\n  // usually want to suppress these to allow, for example, UE4 to show shader\r\n  // complexity with the F5 key without the web page refreshing.\r\n  suppressBrowserKeys: true,\r\n\r\n  // UE4 has a faketouches option which fakes a single finger touch when the\r\n  // user drags with their mouse. We may perform the reverse; a single finger\r\n  // touch may be converted into a mouse drag UE4 side. This allows a\r\n  // non-touch application to be controlled partially via a touch device.\r\n  fakeMouseWithTouches: false,\r\n};\r\n\r\nfunction resizePlayerStyleToFillWindow(playerElement) {\r\n  let videoElement = playerElement.getElementsByTagName(\"VIDEO\");\r\n\r\n  // Fill the player display in window, keeping picture's aspect ratio.\r\n  let windowAspectRatio = window.innerHeight / window.innerWidth;\r\n  let playerAspectRatio =\r\n    playerElement.clientHeight / playerElement.clientWidth;\r\n  // We want to keep the video ratio correct for the video stream\r\n  let videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;\r\n  if (isNaN(videoAspectRatio)) {\r\n    //Video is not initialised yet so set playerElement to size of window\r\n    styleWidth = window.innerWidth;\r\n    styleHeight = window.innerHeight;\r\n    styleTop = 0;\r\n    styleLeft = 0;\r\n    playerElement.style =\r\n      \"top: \" +\r\n      styleTop +\r\n      \"px; left: \" +\r\n      styleLeft +\r\n      \"px; width: \" +\r\n      styleWidth +\r\n      \"px; height: \" +\r\n      styleHeight +\r\n      \"px; cursor: \" +\r\n      styleCursor +\r\n      \"; \" +\r\n      styleAdditional;\r\n  } else if (windowAspectRatio < playerAspectRatio) {\r\n    // Window height is the constraining factor so to keep aspect ratio change width appropriately\r\n    styleWidth = Math.floor(window.innerHeight / videoAspectRatio);\r\n    styleHeight = window.innerHeight;\r\n    styleTop = 0;\r\n    styleLeft = Math.floor((window.innerWidth - styleWidth) * 0.5);\r\n    //Video is now 100% of the playerElement, so set the playerElement style\r\n    playerElement.style =\r\n      \"top: \" +\r\n      styleTop +\r\n      \"px; left: \" +\r\n      styleLeft +\r\n      \"px; width: \" +\r\n      styleWidth +\r\n      \"px; height: \" +\r\n      styleHeight +\r\n      \"px; cursor: \" +\r\n      styleCursor +\r\n      \"; \" +\r\n      styleAdditional;\r\n  } else {\r\n    // Window width is the constraining factor so to keep aspect ratio change height appropriately\r\n    styleWidth = window.innerWidth;\r\n    styleHeight = Math.floor(window.innerWidth * videoAspectRatio);\r\n    styleTop = Math.floor((window.innerHeight - styleHeight) * 0.5);\r\n    styleLeft = 0;\r\n    //Video is now 100% of the playerElement, so set the playerElement style\r\n    playerElement.style =\r\n      \"top: \" +\r\n      styleTop +\r\n      \"px; left: \" +\r\n      styleLeft +\r\n      \"px; width: \" +\r\n      styleWidth +\r\n      \"px; height: \" +\r\n      styleHeight +\r\n      \"px; cursor: \" +\r\n      styleCursor +\r\n      \"; \" +\r\n      styleAdditional;\r\n  }\r\n}\r\n\r\nfunction resizePlayerStyleToActualSize(playerElement) {\r\n  let videoElement = playerElement.getElementsByTagName(\"VIDEO\");\r\n\r\n  if (videoElement.length > 0) {\r\n    // Display image in its actual size\r\n    styleWidth = videoElement[0].videoWidth;\r\n    styleHeight = videoElement[0].videoHeight;\r\n    styleTop = Math.floor((window.innerHeight - styleHeight) * 0.5);\r\n    styleLeft = Math.floor((window.innerWidth - styleWidth) * 0.5);\r\n    //Video is now 100% of the playerElement, so set the playerElement style\r\n    playerElement.style =\r\n      \"top: \" +\r\n      styleTop +\r\n      \"px; left: \" +\r\n      styleLeft +\r\n      \"px; width: \" +\r\n      styleWidth +\r\n      \"px; height: \" +\r\n      styleHeight +\r\n      \"px; cursor: \" +\r\n      styleCursor +\r\n      \"; \" +\r\n      styleAdditional;\r\n  }\r\n}\r\n\r\nfunction resizePlayerStyleToArbitrarySize(playerElement) {\r\n  let videoElement = playerElement.getElementsByTagName(\"VIDEO\");\r\n  //Video is now 100% of the playerElement, so set the playerElement style\r\n\r\n  styleWidth = window.innerWidth;\r\n  styleHeight = window.innerHeight;\r\n\r\n  playerElement.style =\r\n    \"top: 0px; left: 0px; width: \" +\r\n    styleWidth +\r\n    \"px; height: \" +\r\n    styleHeight +\r\n    \"px; cursor: \" +\r\n    styleCursor +\r\n    \"; \" +\r\n    styleAdditional;\r\n}\r\n\r\nfunction setupFreezeFrameOverlay() {\r\n  freezeFrameOverlay = document.createElement(\"img\");\r\n  freezeFrameOverlay.id = \"freezeFrameOverlay\";\r\n  freezeFrameOverlay.style.display = \"none\";\r\n  freezeFrameOverlay.style.pointerEvents = \"none\";\r\n  freezeFrameOverlay.style.position = \"absolute\";\r\n  freezeFrameOverlay.style.zIndex = \"30\";\r\n}\r\nfunction showFreezeFrameOverlay() {\r\n  if (freezeFrame.valid) {\r\n    freezeFrameOverlay.style.display = \"block\";\r\n  }\r\n}\r\nfunction invalidateFreezeFrameOverlay() {\r\n  freezeFrameOverlay.style.display = \"none\";\r\n  freezeFrame.valid = false;\r\n}\r\n\r\nfunction resizeFreezeFrameOverlay() {\r\n  if (freezeFrame.width !== 0 && freezeFrame.height !== 0) {\r\n    let displayWidth = 0;\r\n    let displayHeight = 0;\r\n    let displayTop = 0;\r\n    let displayLeft = 0;\r\n    let checkBox = document.getElementById(\r\n      \"enlarge-display-to-fill-window-tgl\"\r\n    );\r\n    if (checkBox !== null && checkBox.checked) {\r\n      let windowAspectRatio = window.innerWidth / window.innerHeight;\r\n      let videoAspectRatio = freezeFrame.width / freezeFrame.height;\r\n      if (windowAspectRatio < videoAspectRatio) {\r\n        displayWidth = window.innerWidth;\r\n        displayHeight = Math.floor(window.innerWidth / videoAspectRatio);\r\n        displayTop = Math.floor((window.innerHeight - displayHeight) * 0.5);\r\n        displayLeft = 0;\r\n      } else {\r\n        displayWidth = Math.floor(window.innerHeight * videoAspectRatio);\r\n        displayHeight = window.innerHeight;\r\n        displayTop = 0;\r\n        displayLeft = Math.floor((window.innerWidth - displayWidth) * 0.5);\r\n      }\r\n    } else {\r\n      displayWidth = freezeFrame.width;\r\n      displayHeight = freezeFrame.height;\r\n      displayTop = 0;\r\n      displayLeft = 0;\r\n    }\r\n    freezeFrameOverlay.style.width = displayWidth + \"px\";\r\n    freezeFrameOverlay.style.height = displayHeight + \"px\";\r\n    freezeFrameOverlay.style.left = displayLeft + \"px\";\r\n    freezeFrameOverlay.style.top = displayTop + \"px\";\r\n  }\r\n}\r\n\r\nfunction resizePlayerStyle(event) {\r\n  var playerElement = document.getElementById(\"player\");\r\n\r\n  if (!playerElement) return;\r\n\r\n  updateVideoStreamSize();\r\n\r\n  if (playerElement.classList.contains(\"fixed-size\")) return;\r\n\r\n  let checkBox = document.getElementById(\"enlarge-display-to-fill-window-tgl\");\r\n  let windowSmallerThanPlayer =\r\n    window.innerWidth < playerElement.videoWidth ||\r\n    window.innerHeight < playerElement.videoHeight;\r\n  if (checkBox !== null) {\r\n    if (checkBox.checked || windowSmallerThanPlayer) {\r\n      console.debug(\"FILL\");\r\n      resizePlayerStyleToFillWindow(playerElement);\r\n    } else {\r\n      console.debug(\"ACTUAL\");\r\n      resizePlayerStyleToActualSize(playerElement);\r\n    }\r\n  } else {\r\n    console.debug(\"Arbitrary\");\r\n    resizePlayerStyleToArbitrarySize(playerElement);\r\n  }\r\n\r\n  // Calculating and normalizing positions depends on the width and height of\r\n  // the player.\r\n  playerElementClientRect = playerElement.getBoundingClientRect();\r\n  setupNormalizeAndQuantize();\r\n  resizeFreezeFrameOverlay();\r\n}\r\n\r\nfunction updateVideoStreamSize() {\r\n  if (!matchViewportResolution) {\r\n    return;\r\n  }\r\n\r\n  var now = new Date().getTime();\r\n  if (now - lastTimeResized > 1000) {\r\n    var playerElement = document.getElementById(\"player\");\r\n    if (!playerElement) return;\r\n\r\n    let descriptor = {\r\n      Console:\r\n        \"setres \" +\r\n        playerElement.clientWidth +\r\n        \"x\" +\r\n        playerElement.clientHeight,\r\n    };\r\n    emitUIInteraction(descriptor);\r\n    console.log(descriptor);\r\n    lastTimeResized = new Date().getTime();\r\n  } else {\r\n    console.log(\"Resizing too often - skipping\");\r\n    clearTimeout(resizeTimeout);\r\n    resizeTimeout = setTimeout(updateVideoStreamSize, 1000);\r\n  }\r\n}\r\n\r\n// Fix for bug in iOS where windowsize is not correct at instance or orientation change\r\n// https://github.com/dimsemenov/PhotoSwipe/issues/1315\r\nvar _orientationChangeTimeout;\r\nfunction onOrientationChange(event) {\r\n  clearTimeout(_orientationChangeTimeout);\r\n  _orientationChangeTimeout = setTimeout(function () {\r\n    resizePlayerStyle();\r\n  }, 500);\r\n}\r\n\r\n// Must be kept in sync with PixelStreamingProtocol::EToUE4Msg C++ enum.\r\nconst MessageType = {\r\n  /**********************************************************************/\r\n\r\n  /*\r\n   * Control Messages. Range = 0..49.\r\n   */\r\n  IFrameRequest: 0,\r\n  RequestQualityControl: 1,\r\n  MaxFpsRequest: 2,\r\n  AverageBitrateRequest: 3,\r\n  StartStreaming: 4,\r\n  StopStreaming: 5,\r\n\r\n  /**********************************************************************/\r\n\r\n  /*\r\n   * Input Messages. Range = 50..89.\r\n   */\r\n\r\n  // Generic Input Messages. Range = 50..59.\r\n  UIInteraction: 50,\r\n  Command: 51,\r\n\r\n  // Keyboard Input Message. Range = 60..69.\r\n  KeyDown: 60,\r\n  KeyUp: 61,\r\n  KeyPress: 62,\r\n\r\n  // Mouse Input Messages. Range = 70..79.\r\n  MouseEnter: 70,\r\n  MouseLeave: 71,\r\n  MouseDown: 72,\r\n  MouseUp: 73,\r\n  MouseMove: 74,\r\n  MouseWheel: 75,\r\n\r\n  // Touch Input Messages. Range = 80..89.\r\n  TouchStart: 80,\r\n  TouchEnd: 81,\r\n  TouchMove: 82,\r\n\r\n  /**************************************************************************/\r\n};\r\n\r\n// A generic message has a type and a descriptor.\r\nfunction emitDescriptor(messageType, descriptor) {\r\n  // Convert the dscriptor object into a JSON string.\r\n  let descriptorAsString = JSON.stringify(descriptor);\r\n\r\n  // Add the UTF-16 JSON string to the array byte buffer, going two bytes at\r\n  // a time.\r\n  let data = new DataView(\r\n    new ArrayBuffer(1 + 2 + 2 * descriptorAsString.length)\r\n  );\r\n  let byteIdx = 0;\r\n  data.setUint8(byteIdx, messageType);\r\n  byteIdx++;\r\n  data.setUint16(byteIdx, descriptorAsString.length, true);\r\n  byteIdx += 2;\r\n  for (var i = 0; i < descriptorAsString.length; i++) {\r\n    data.setUint16(byteIdx, descriptorAsString.charCodeAt(i), true);\r\n    byteIdx += 2;\r\n  }\r\n  sendInputData(data.buffer);\r\n}\r\n\r\n// A UI interation will occur when the user presses a button powered by\r\n// JavaScript as opposed to pressing a button which is part of the pixel\r\n// streamed UI from the UE4 client.\r\nfunction emitUIInteraction(descriptor) {\r\n  console.debug(descriptor);\r\n  emitDescriptor(MessageType.UIInteraction, descriptor);\r\n}\r\n\r\n// A build-in command can be sent to UE4 client. The commands are defined by a\r\n// JSON descriptor and will be executed automatically.\r\n// The currently supported commands are:\r\n//\r\n// 1. A command to run any console command:\r\n//    \"{ ConsoleCommand: <string> }\"\r\n//\r\n// 2. A command to change the resolution to the given width and height.\r\n//    \"{ Resolution: { Width: <value>, Height: <value> } }\"\r\n//\r\n// 3. A command to change the encoder settings by reducing the bitrate by the\r\n//    given percentage.\r\n//    \"{ Encoder: { BitrateReduction: <value> } }\"\r\nfunction emitCommand(descriptor) {\r\n  emitDescriptor(MessageType.Command, descriptor);\r\n}\r\n\r\nfunction requestQualityControl() {\r\n  sendInputData(new Uint8Array([MessageType.RequestQualityControl]).buffer);\r\n}\r\n\r\nvar playerElementClientRect = undefined;\r\nvar normalizeAndQuantizeUnsigned = undefined;\r\nvar normalizeAndQuantizeSigned = undefined;\r\n\r\nfunction setupNormalizeAndQuantize() {\r\n  let playerElement = document.getElementById(\"player\");\r\n  let videoElement = playerElement.getElementsByTagName(\"video\");\r\n\r\n  if (playerElement && videoElement.length > 0) {\r\n    let playerAspectRatio =\r\n      playerElement.clientHeight / playerElement.clientWidth;\r\n    let videoAspectRatio =\r\n      videoElement[0].videoHeight / videoElement[0].videoWidth;\r\n\r\n    // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,\r\n    // quantized into an uint16 (0..65536).\r\n    // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,\r\n    // quantized into an int16 (-32767..32767).\r\n    // This allows the browser viewport and client viewport to have a different\r\n    // size.\r\n    // Hack: Currently we set an out-of-range position to an extreme (65535)\r\n    // as we can't yet accurately detect mouse enter and leave events\r\n    // precisely inside a video with an aspect ratio which causes mattes.\r\n    if (playerAspectRatio > videoAspectRatio) {\r\n      if (print_inputs) {\r\n        console.log(\r\n          \"Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio\"\r\n        );\r\n      }\r\n      let ratio = playerAspectRatio / videoAspectRatio;\r\n      // Unsigned.\r\n      normalizeAndQuantizeUnsigned = (x, y) => {\r\n        let normalizedX = x / playerElement.clientWidth;\r\n        let normalizedY = ratio * (y / playerElement.clientHeight - 0.5) + 0.5;\r\n        if (\r\n          normalizedX < 0.0 ||\r\n          normalizedX > 1.0 ||\r\n          normalizedY < 0.0 ||\r\n          normalizedY > 1.0\r\n        ) {\r\n          return {\r\n            inRange: false,\r\n            x: 65535,\r\n            y: 65535,\r\n          };\r\n        } else {\r\n          return {\r\n            inRange: true,\r\n            x: normalizedX * 65536,\r\n            y: normalizedY * 65536,\r\n          };\r\n        }\r\n      };\r\n\r\n      unquantizeAndDenormalizeUnsigned = (x, y) => {\r\n        let normalizedX = x / 65536;\r\n        let normalizedY = (y / 65536 - 0.5) / ratio + 0.5;\r\n        return {\r\n          x: normalizedX * playerElement.clientWidth,\r\n          y: normalizedY * playerElement.clientHeight,\r\n        };\r\n      };\r\n      // Signed.\r\n      normalizeAndQuantizeSigned = (x, y) => {\r\n        let normalizedX = x / (0.5 * playerElement.clientWidth);\r\n        let normalizedY = (ratio * y) / (0.5 * playerElement.clientHeight);\r\n        return {\r\n          x: normalizedX * 32767,\r\n          y: normalizedY * 32767,\r\n        };\r\n      };\r\n    } else {\r\n      if (print_inputs) {\r\n        console.log(\r\n          \"Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio\"\r\n        );\r\n      }\r\n      let ratio = videoAspectRatio / playerAspectRatio;\r\n      // Unsigned.\r\n      normalizeAndQuantizeUnsigned = (x, y) => {\r\n        let normalizedX = ratio * (x / playerElement.clientWidth - 0.5) + 0.5;\r\n        let normalizedY = y / playerElement.clientHeight;\r\n        if (\r\n          normalizedX < 0.0 ||\r\n          normalizedX > 1.0 ||\r\n          normalizedY < 0.0 ||\r\n          normalizedY > 1.0\r\n        ) {\r\n          return {\r\n            inRange: false,\r\n            x: 65535,\r\n            y: 65535,\r\n          };\r\n        } else {\r\n          return {\r\n            inRange: true,\r\n            x: normalizedX * 65536,\r\n            y: normalizedY * 65536,\r\n          };\r\n        }\r\n      };\r\n      unquantizeAndDenormalizeUnsigned = (x, y) => {\r\n        let normalizedX = (x / 65536 - 0.5) / ratio + 0.5;\r\n        let normalizedY = y / 65536;\r\n        return {\r\n          x: normalizedX * playerElement.clientWidth,\r\n          y: normalizedY * playerElement.clientHeight,\r\n        };\r\n      };\r\n      // Signed.\r\n      normalizeAndQuantizeSigned = (x, y) => {\r\n        let normalizedX = (ratio * x) / (0.5 * playerElement.clientWidth);\r\n        let normalizedY = y / (0.5 * playerElement.clientHeight);\r\n        return {\r\n          x: normalizedX * 32767,\r\n          y: normalizedY * 32767,\r\n        };\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nfunction emitMouseMove(x, y, deltaX, deltaY) {\r\n  if (print_inputs) {\r\n    console.log(`x: ${x}, y:${y}, dX: ${deltaX}, dY: ${deltaY}`);\r\n  }\r\n  let coord = normalizeAndQuantizeUnsigned(x, y);\r\n  let delta = normalizeAndQuantizeSigned(deltaX, deltaY);\r\n  var Data = new DataView(new ArrayBuffer(9));\r\n  Data.setUint8(0, MessageType.MouseMove);\r\n  Data.setUint16(1, coord.x, true);\r\n  Data.setUint16(3, coord.y, true);\r\n  Data.setInt16(5, delta.x, true);\r\n  Data.setInt16(7, delta.y, true);\r\n  sendInputData(Data.buffer);\r\n}\r\n\r\nfunction emitMouseDown(button, x, y) {\r\n  if (print_inputs) {\r\n    console.log(`mouse button ${button} down at (${x}, ${y})`);\r\n  }\r\n  let coord = normalizeAndQuantizeUnsigned(x, y);\r\n  var Data = new DataView(new ArrayBuffer(6));\r\n  Data.setUint8(0, MessageType.MouseDown);\r\n  Data.setUint8(1, button);\r\n  Data.setUint16(2, coord.x, true);\r\n  Data.setUint16(4, coord.y, true);\r\n  sendInputData(Data.buffer);\r\n}\r\n\r\nfunction emitMouseUp(button, x, y) {\r\n  if (print_inputs) {\r\n    console.log(`mouse button ${button} up at (${x}, ${y})`);\r\n  }\r\n  let coord = normalizeAndQuantizeUnsigned(x, y);\r\n  var Data = new DataView(new ArrayBuffer(6));\r\n  Data.setUint8(0, MessageType.MouseUp);\r\n  Data.setUint8(1, button);\r\n  Data.setUint16(2, coord.x, true);\r\n  Data.setUint16(4, coord.y, true);\r\n  sendInputData(Data.buffer);\r\n}\r\n\r\nfunction emitMouseWheel(delta, x, y) {\r\n  if (print_inputs) {\r\n    console.log(`mouse wheel with delta ${delta} at (${x}, ${y})`);\r\n  }\r\n  let coord = normalizeAndQuantizeUnsigned(x, y);\r\n  var Data = new DataView(new ArrayBuffer(7));\r\n  Data.setUint8(0, MessageType.MouseWheel);\r\n  Data.setInt16(1, delta, true);\r\n  Data.setUint16(3, coord.x, true);\r\n  Data.setUint16(5, coord.y, true);\r\n  sendInputData(Data.buffer);\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\r\nconst MouseButton = {\r\n  MainButton: 0, // Left button.\r\n  AuxiliaryButton: 1, // Wheel button.\r\n  SecondaryButton: 2, // Right button.\r\n  FourthButton: 3, // Browser Back button.\r\n  FifthButton: 4, // Browser Forward button.\r\n};\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\r\nconst MouseButtonsMask = {\r\n  PrimaryButton: 1, // Left button.\r\n  SecondaryButton: 2, // Right button.\r\n  AuxiliaryButton: 4, // Wheel button.\r\n  FourthButton: 8, // Browser Back button.\r\n  FifthButton: 16, // Browser Forward button.\r\n};\r\n\r\n// If the user has any mouse buttons pressed then release them.\r\nfunction releaseMouseButtons(buttons, x, y) {\r\n  if (buttons & MouseButtonsMask.PrimaryButton) {\r\n    emitMouseUp(MouseButton.MainButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.SecondaryButton) {\r\n    emitMouseUp(MouseButton.SecondaryButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.AuxiliaryButton) {\r\n    emitMouseUp(MouseButton.AuxiliaryButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.FourthButton) {\r\n    emitMouseUp(MouseButton.FourthButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.FifthButton) {\r\n    emitMouseUp(MouseButton.FifthButton, x, y);\r\n  }\r\n}\r\n\r\n// If the user has any mouse buttons pressed then press them again.\r\nfunction pressMouseButtons(buttons, x, y) {\r\n  if (buttons & MouseButtonsMask.PrimaryButton) {\r\n    emitMouseDown(MouseButton.MainButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.SecondaryButton) {\r\n    emitMouseDown(MouseButton.SecondaryButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.AuxiliaryButton) {\r\n    emitMouseDown(MouseButton.AuxiliaryButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.FourthButton) {\r\n    emitMouseDown(MouseButton.FourthButton, x, y);\r\n  }\r\n  if (buttons & MouseButtonsMask.FifthButton) {\r\n    emitMouseDown(MouseButton.FifthButton, x, y);\r\n  }\r\n}\r\n\r\nfunction registerInputs(playerElement) {\r\n  if (!playerElement) return;\r\n\r\n  registerMouseEnterAndLeaveEvents(playerElement);\r\n  registerTouchEvents(playerElement);\r\n}\r\n\r\nfunction showOnScreenKeyboard(command) {\r\n  if (command.showOnScreenKeyboard) {\r\n    // Show the 'edit text' button.\r\n    editTextButton.classList.remove(\"hiddenState\");\r\n    // Place the 'edit text' button near the UE4 input widget.\r\n    let pos = unquantizeAndDenormalizeUnsigned(command.x, command.y);\r\n    editTextButton.style.top = pos.y.toString() + \"px\";\r\n    editTextButton.style.left = (pos.x - 40).toString() + \"px\";\r\n  } else {\r\n    // Hide the 'edit text' button.\r\n    editTextButton.classList.add(\"hiddenState\");\r\n    // Hide the on-screen keyboard.\r\n    hiddenInput.blur();\r\n  }\r\n}\r\n\r\nfunction registerMouseEnterAndLeaveEvents(playerElement) {\r\n  playerElement.onmouseenter = function (e) {\r\n    if (print_inputs) {\r\n      console.log(\"mouse enter\");\r\n    }\r\n    var Data = new DataView(new ArrayBuffer(1));\r\n    Data.setUint8(0, MessageType.MouseEnter);\r\n    sendInputData(Data.buffer);\r\n    playerElement.pressMouseButtons(e);\r\n  };\r\n\r\n  playerElement.onmouseleave = function (e) {\r\n    if (print_inputs) {\r\n      console.log(\"mouse leave\");\r\n    }\r\n    var Data = new DataView(new ArrayBuffer(1));\r\n    Data.setUint8(0, MessageType.MouseLeave);\r\n    sendInputData(Data.buffer);\r\n    playerElement.releaseMouseButtons(e);\r\n  };\r\n}\r\n\r\n// A locked mouse works by the user clicking in the browser player and the\r\n// cursor disappears and is locked. The user moves the cursor and the camera\r\n// moves, for example. The user presses escape to free the mouse.\r\nfunction registerLockedMouseEvents(playerElement) {\r\n  var x = playerElement.width / 2;\r\n  var y = playerElement.height / 2;\r\n\r\n  playerElement.requestPointerLock =\r\n    playerElement.requestPointerLock || playerElement.mozRequestPointerLock;\r\n  document.exitPointerLock =\r\n    document.exitPointerLock || document.mozExitPointerLock;\r\n\r\n  playerElement.onclick = function () {\r\n    playerElement.requestPointerLock();\r\n  };\r\n\r\n  // Respond to lock state change events\r\n  document.addEventListener(\"pointerlockchange\", lockStateChange, false);\r\n  document.addEventListener(\"mozpointerlockchange\", lockStateChange, false);\r\n\r\n  function lockStateChange() {\r\n    if (\r\n      document.pointerLockElement === playerElement ||\r\n      document.mozPointerLockElement === playerElement\r\n    ) {\r\n      console.log(\"Pointer locked\");\r\n      document.addEventListener(\"mousemove\", updatePosition, false);\r\n    } else {\r\n      console.log(\"The pointer lock status is now unlocked\");\r\n      document.removeEventListener(\"mousemove\", updatePosition, false);\r\n    }\r\n  }\r\n\r\n  function updatePosition(e) {\r\n    if (!styleWidth || !styleHeight) {\r\n      console.debug(\"RESIZE\");\r\n      resizePlayerStyle(undefined);\r\n    }\r\n\r\n    x += e.movementX;\r\n    y += e.movementY;\r\n\r\n    if (x > styleWidth) {\r\n      x -= styleWidth;\r\n    }\r\n    if (y > styleHeight) {\r\n      y -= styleHeight;\r\n    }\r\n    if (x < 0) {\r\n      x = styleWidth + x;\r\n    }\r\n    if (y < 0) {\r\n      y = styleHeight - y;\r\n    }\r\n    \r\n    emitMouseMove(x, y, e.movementX, e.movementY);\r\n  }\r\n\r\n  playerElement.onmousedown = function (e) {\r\n    emitMouseDown(e.button, x, y);\r\n  };\r\n\r\n  playerElement.onmouseup = function (e) {\r\n    emitMouseUp(e.button, x, y);\r\n  };\r\n\r\n  playerElement.onmousewheel = function (e) {\r\n    emitMouseWheel(e.wheelDelta, x, y);\r\n  };\r\n\r\n  playerElement.pressMouseButtons = function (e) {\r\n    pressMouseButtons(e.buttons, x, y);\r\n  };\r\n\r\n  playerElement.releaseMouseButtons = function (e) {\r\n    releaseMouseButtons(e.buttons, x, y);\r\n  };\r\n}\r\n\r\n// A hovering mouse works by the user clicking the mouse button when they want\r\n// the cursor to have an effect over the video. Otherwise the cursor just\r\n// passes over the browser.\r\nfunction registerHoveringMouseEvents(playerElement) {\r\n  styleCursor = \"none\"; // We will rely on UE4 client's software cursor.\r\n  //styleCursor = 'default';  // Showing cursor\r\n\r\n  playerElement.onmousemove = function (e) {\r\n    emitMouseMove(e.offsetX, e.offsetY, e.movementX, e.movementY);\r\n    e.preventDefault();\r\n  };\r\n\r\n  playerElement.onmousedown = function (e) {\r\n    emitMouseDown(e.button, e.offsetX, e.offsetY);\r\n    e.preventDefault();\r\n  };\r\n\r\n  playerElement.onmouseup = function (e) {\r\n    emitMouseUp(e.button, e.offsetX, e.offsetY);\r\n    e.preventDefault();\r\n  };\r\n\r\n  // When the context menu is shown then it is safest to release the button\r\n  // which was pressed when the event happened. This will guarantee we will\r\n  // get at least one mouse up corresponding to a mouse down event. Otherwise\r\n  // the mouse can get stuck.\r\n  // https://github.com/facebook/react/issues/5531\r\n  playerElement.oncontextmenu = function (e) {\r\n    emitMouseUp(e.button, e.offsetX, e.offsetY);\r\n    e.preventDefault();\r\n  };\r\n\r\n  if (\"onmousewheel\" in playerElement) {\r\n    playerElement.onmousewheel = function (e) {\r\n      emitMouseWheel(e.wheelDelta, e.offsetX, e.offsetY);\r\n      e.preventDefault();\r\n    };\r\n  } else {\r\n    playerElement.addEventListener(\r\n      \"DOMMouseScroll\",\r\n      function (e) {\r\n        emitMouseWheel(e.detail * -120, e.offsetX, e.offsetY);\r\n        e.preventDefault();\r\n      },\r\n      false\r\n    );\r\n  }\r\n\r\n  playerElement.pressMouseButtons = function (e) {\r\n    pressMouseButtons(e.buttons, e.offsetX, e.offsetY);\r\n  };\r\n\r\n  playerElement.releaseMouseButtons = function (e) {\r\n    releaseMouseButtons(e.buttons, e.offsetX, e.offsetY);\r\n  };\r\n}\r\n\r\nfunction registerTouchEvents(playerElement) {\r\n  // We need to assign a unique identifier to each finger.\r\n  // We do this by mapping each Touch object to the identifier.\r\n  var fingers = [9, 8, 7, 6, 5, 4, 3, 2, 1, 0];\r\n  var fingerIds = {};\r\n\r\n  function rememberTouch(touch) {\r\n    let finger = fingers.pop();\r\n    if (finger === undefined) {\r\n      console.log(\"exhausted touch indentifiers\");\r\n    }\r\n    fingerIds[touch.identifier] = finger;\r\n  }\r\n\r\n  function forgetTouch(touch) {\r\n    fingers.push(fingerIds[touch.identifier]);\r\n    delete fingerIds[touch.identifier];\r\n  }\r\n\r\n  function emitTouchData(type, touches) {\r\n    let data = new DataView(new ArrayBuffer(2 + 6 * touches.length));\r\n    data.setUint8(0, type);\r\n    data.setUint8(1, touches.length);\r\n    let byte = 2;\r\n    for (let t = 0; t < touches.length; t++) {\r\n      let touch = touches[t];\r\n      let x = touch.clientX - playerElement.offsetLeft;\r\n      let y = touch.clientY - playerElement.offsetTop;\r\n      if (print_inputs) {\r\n        console.log(`F${fingerIds[touch.identifier]}=(${x}, ${y})`);\r\n      }\r\n      let coord = normalizeAndQuantizeUnsigned(x, y);\r\n      data.setUint16(byte, coord.x, true);\r\n      byte += 2;\r\n      data.setUint16(byte, coord.y, true);\r\n      byte += 2;\r\n      data.setUint8(byte, fingerIds[touch.identifier], true);\r\n      byte += 1;\r\n      data.setUint8(byte, 255 * touch.force, true); // force is between 0.0 and 1.0 so quantize into byte.\r\n      byte += 1;\r\n    }\r\n    sendInputData(data.buffer);\r\n  }\r\n\r\n  if (inputOptions.fakeMouseWithTouches) {\r\n    var finger = undefined;\r\n\r\n    playerElement.ontouchstart = function (e) {\r\n      if (finger === undefined) {\r\n        let firstTouch = e.changedTouches[0];\r\n        finger = {\r\n          id: firstTouch.identifier,\r\n          x: firstTouch.clientX - playerElementClientRect.left,\r\n          y: firstTouch.clientY - playerElementClientRect.top,\r\n        };\r\n        // Hack: Mouse events require an enter and leave so we just\r\n        // enter and leave manually with each touch as this event\r\n        // is not fired with a touch device.\r\n        playerElement.onmouseenter(e);\r\n        emitMouseDown(MouseButton.MainButton, finger.x, finger.y);\r\n      }\r\n      e.preventDefault();\r\n    };\r\n\r\n    playerElement.ontouchend = function (e) {\r\n      for (let t = 0; t < e.changedTouches.length; t++) {\r\n        let touch = e.changedTouches[t];\r\n        if (touch.identifier === finger.id) {\r\n          let x = touch.clientX - playerElementClientRect.left;\r\n          let y = touch.clientY - playerElementClientRect.top;\r\n          emitMouseUp(MouseButton.MainButton, x, y);\r\n          // Hack: Manual mouse leave event.\r\n          playerElement.onmouseleave(e);\r\n          finger = undefined;\r\n          break;\r\n        }\r\n      }\r\n      e.preventDefault();\r\n    };\r\n\r\n    playerElement.ontouchmove = function (e) {\r\n      for (let t = 0; t < e.touches.length; t++) {\r\n        let touch = e.touches[t];\r\n        if (touch.identifier === finger.id) {\r\n          let x = touch.clientX - playerElementClientRect.left;\r\n          let y = touch.clientY - playerElementClientRect.top;\r\n          emitMouseMove(x, y, x - finger.x, y - finger.y);\r\n          finger.x = x;\r\n          finger.y = y;\r\n          break;\r\n        }\r\n      }\r\n      e.preventDefault();\r\n    };\r\n  } else {\r\n    playerElement.ontouchstart = function (e) {\r\n      // Assign a unique identifier to each touch.\r\n      for (let t = 0; t < e.changedTouches.length; t++) {\r\n        rememberTouch(e.changedTouches[t]);\r\n      }\r\n\r\n      if (print_inputs) {\r\n        console.log(\"touch start\");\r\n      }\r\n      emitTouchData(MessageType.TouchStart, e.changedTouches);\r\n      e.preventDefault();\r\n    };\r\n\r\n    playerElement.ontouchend = function (e) {\r\n      if (print_inputs) {\r\n        console.log(\"touch end\");\r\n      }\r\n      emitTouchData(MessageType.TouchEnd, e.changedTouches);\r\n\r\n      // Re-cycle unique identifiers previously assigned to each touch.\r\n      for (let t = 0; t < e.changedTouches.length; t++) {\r\n        forgetTouch(e.changedTouches[t]);\r\n      }\r\n      e.preventDefault();\r\n    };\r\n\r\n    playerElement.ontouchmove = function (e) {\r\n      if (print_inputs) {\r\n        console.log(\"touch move\");\r\n      }\r\n      emitTouchData(MessageType.TouchMove, e.touches);\r\n      e.preventDefault();\r\n    };\r\n  }\r\n}\r\n\r\n// Browser keys do not have a charCode so we only need to test keyCode.\r\nfunction isKeyCodeBrowserKey(keyCode) {\r\n  // Function keys or tab key.\r\n  return (keyCode >= 112 && keyCode <= 123) || keyCode === 9;\r\n}\r\n\r\n// Must be kept in sync with JavaScriptKeyCodeToFKey C++ array. The index of the\r\n// entry in the array is the special key code given below.\r\nconst SpecialKeyCodes = {\r\n  BackSpace: 8,\r\n  Shift: 16,\r\n  Control: 17,\r\n  Alt: 18,\r\n  RightShift: 253,\r\n  RightControl: 254,\r\n  RightAlt: 255,\r\n};\r\n\r\n// We want to be able to differentiate between left and right versions of some\r\n// keys.\r\nfunction getKeyCode(e) {\r\n  if (e.keyCode === SpecialKeyCodes.Shift && e.code === \"ShiftRight\")\r\n    return SpecialKeyCodes.RightShift;\r\n  else if (e.keyCode === SpecialKeyCodes.Control && e.code === \"ControlRight\")\r\n    return SpecialKeyCodes.RightControl;\r\n  else if (e.keyCode === SpecialKeyCodes.Alt && e.code === \"AltRight\")\r\n    return SpecialKeyCodes.RightAlt;\r\n  else return e.keyCode;\r\n}\r\n\r\nfunction registerKeyboardEvents() {\r\n  document.onkeydown = function (e) {\r\n    if (print_inputs) {\r\n      console.log(`key down ${e.keyCode}, repeat = ${e.repeat}`);\r\n    }\r\n    sendInputData(\r\n      new Uint8Array([MessageType.KeyDown, getKeyCode(e), e.repeat]).buffer\r\n    );\r\n    // Backspace is not considered a keypress in JavaScript but we need it\r\n    // to be so characters may be deleted in a UE4 text entry field.\r\n    if (e.keyCode === SpecialKeyCodes.BackSpace) {\r\n      document.onkeypress({ charCode: SpecialKeyCodes.BackSpace });\r\n    }\r\n    if (inputOptions.suppressBrowserKeys && isKeyCodeBrowserKey(e.keyCode)) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  document.onkeyup = function (e) {\r\n    if (print_inputs) {\r\n      console.log(`key up ${e.keyCode}`);\r\n    }\r\n    sendInputData(new Uint8Array([MessageType.KeyUp, getKeyCode(e)]).buffer);\r\n    if (inputOptions.suppressBrowserKeys && isKeyCodeBrowserKey(e.keyCode)) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  document.onkeypress = function (e) {\r\n    if (print_inputs) {\r\n      console.log(`key press ${e.charCode}`);\r\n    }\r\n    let data = new DataView(new ArrayBuffer(3));\r\n    data.setUint8(0, MessageType.KeyPress);\r\n    data.setUint16(1, e.charCode, true);\r\n    sendInputData(data.buffer);\r\n  };\r\n}\r\n\r\nfunction start() {\r\n  if (!connect_on_load || is_reconnection) {\r\n    showConnectOverlay();\r\n    invalidateFreezeFrameOverlay();\r\n    shouldShowPlayOverlay = true;\r\n    resizePlayerStyle();\r\n  } else {\r\n    connect();\r\n  }\r\n}\r\n\r\nfunction connect() {\r\n  \"use strict\";\r\n\r\n  window.WebSocket = window.WebSocket || window.MozWebSocket;\r\n\r\n  if (!window.WebSocket) {\r\n    alert(\"Your browser doesn't support WebSocket\");\r\n    return;\r\n  }\r\n\r\n  //CHANGES\r\n  //wsUrl\r\n  //ws://176.38.2.49/\r\n  ws = new WebSocket(wsUrl);\r\n\r\n  ws.onmessage = function (event) {\r\n    console.log(`<- SS: ${event.data}`);\r\n    var msg = JSON.parse(event.data);\r\n    if (msg.type === \"config\") {\r\n      onConfig(msg);\r\n    } else if (msg.type === \"playerCount\") {\r\n    } else if (msg.type === \"answer\") {\r\n      onWebRtcAnswer(msg);\r\n    } else if (msg.type === \"iceCandidate\") {\r\n      onWebRtcIce(msg.candidate);\r\n    } else {\r\n      console.log(`invalid SS message type: ${msg.type}`);\r\n    }\r\n  };\r\n\r\n  ws.onerror = function (event) {\r\n    console.log(`WS error: ${JSON.stringify(event)}`);\r\n  };\r\n\r\n  ws.onclose = function (event) {\r\n    console.log(`WS closed: ${JSON.stringify(event.code)} - ${event.reason}`);\r\n    ws = undefined;\r\n    is_reconnection = true;\r\n\r\n    // destroy `webRtcPlayerObj` if any\r\n    let playerDiv = document.getElementById(\"player\");\r\n    if (webRtcPlayerObj) {\r\n      playerDiv.removeChild(webRtcPlayerObj.video);\r\n      webRtcPlayerObj.close();\r\n      webRtcPlayerObj = undefined;\r\n    }\r\n\r\n    start();\r\n  };\r\n}\r\n\r\n// Config data received from WebRTC sender via the Cirrus web server\r\nfunction onConfig(config) {\r\n  let playerDiv = document.getElementById(\"player\");\r\n  let playerElement = setupWebRtcPlayer(playerDiv, config);\r\n  resizePlayerStyle();\r\n\r\n  switch (inputOptions.controlScheme) {\r\n    case ControlSchemeType.HoveringMouse:\r\n      registerHoveringMouseEvents(playerElement);\r\n      break;\r\n    case ControlSchemeType.LockedMouse:\r\n      registerLockedMouseEvents(playerElement);\r\n      break;\r\n    default:\r\n      console.log(\r\n        `ERROR: Unknown control scheme ${inputOptions.controlScheme}`\r\n      );\r\n      registerLockedMouseEvents(playerElement);\r\n      break;\r\n  }\r\n}\r\n\r\nfunction load(localWsUrl) {\r\n  wsUrl = localWsUrl;\r\n\r\n  setupHtmlEvents();\r\n  setupFreezeFrameOverlay();\r\n  registerKeyboardEvents();\r\n  start();\r\n}\r\n\r\nexport default {\r\n  load,\r\n  handleHomepageClick,\r\n  isLoaded,\r\n  emitUIInteraction,\r\n  addResponseEventListener,\r\n};\r\n","import ue4app from \"./libs/UnrealRTC/app\";\r\n\r\nvar ue4appInstance = (function () {\r\n  var instance;\r\n\r\n  var createInstance = function () {\r\n    return {\r\n      getUe4app: () => {\r\n        return ue4app;\r\n      },\r\n      emitUICommand: (data) => {\r\n        return ue4app.emitUIInteraction(data);\r\n      },\r\n      addUIHandler: (name, action) => {\r\n        console.debug(name);\r\n        console.debug(action);\r\n        return ue4app.addResponseEventListener(name, action);\r\n      },\r\n      initUE4Callback: () => {},\r\n      dataChannelInitedUE4Callback: () => {},\r\n    };\r\n  };\r\n\r\n  return {\r\n    getInstance: function () {\r\n      return instance || (instance = createInstance());\r\n    },\r\n    reCreateInstance: function () {\r\n      return (instance = createInstance());\r\n    },\r\n  };\r\n})();\r\n\r\nexport default ue4appInstance;\r\n","const commands = {\r\n  initializeCustomization: \"init_customization\",\r\n  setAddon: \"set_addon\",\r\n  setColor: \"set_color\",\r\n  setName: \"set_name\",\r\n  setCompanionName: \"set_companion_name\",\r\n  connect: \"connect_to_game_server\",\r\n  teleport: \"teleport_to_user\",\r\n  inputMode: \"set_input_mode\",\r\n};\r\n\r\nconst inputModes = {\r\n  simple: 0,\r\n  simpleTouch: 1,\r\n  pro: 2,\r\n  proTouch: 3,\r\n};\r\n\r\nconst addonsSockets = {\r\n  head: 0,\r\n  back: 1,\r\n  leftHand: 2,\r\n  rightHand: 3,\r\n  companion: 4,\r\n};\r\n\r\nconst addonsColors = {\r\n  ring: 0,\r\n  primary: 1,\r\n  secondary: 2,\r\n};\r\n\r\nfunction createInitCustomizationCommand(\r\n  userId,\r\n  agoraUserId,\r\n  isSuperUser,\r\n  agoraAppId,\r\n  avatarData\r\n) {\r\n  return {\r\n    command: commands.initializeCustomization,\r\n    user_id: userId,\r\n    agora_user_id: agoraUserId,\r\n    is_super_user: isSuperUser,\r\n    agora_app_id: agoraAppId,\r\n    avatar_data: avatarData,\r\n  };\r\n}\r\n\r\nfunction createSetAddonCommand(socket, addonId) {\r\n  return {\r\n    command: commands.setAddon,\r\n    socket: socket,\r\n    addon: addonId,\r\n  };\r\n}\r\n\r\nfunction createSetColorCommand(socket, color) {\r\n  return {\r\n    command: commands.setColor,\r\n    socket: socket,\r\n    color: color,\r\n  };\r\n}\r\n\r\nfunction createSetNameCommand(name) {\r\n  return {\r\n    command: commands.setName,\r\n    name: name,\r\n  };\r\n}\r\n\r\nfunction createSetCompanionNameCommand(name) {\r\n  return {\r\n    command: commands.setCompanionName,\r\n    name: name,\r\n  };\r\n}\r\n\r\nfunction createConnectToGameServerCommand(name) {\r\n  return {\r\n    command: commands.connect,\r\n  };\r\n}\r\n\r\nfunction createTeleportCommand(user_id) {\r\n  return {\r\n    command: commands.teleport,\r\n    user_id: user_id,\r\n  };\r\n}\r\n\r\nfunction createInputModeCommand(mode) {\r\n  return {\r\n    command: commands.inputMode,\r\n    mode: mode,\r\n  };\r\n}\r\n\r\nexport default {\r\n  commands,\r\n  addonsSockets,\r\n  addonsColors,\r\n  inputModes,\r\n  createInitCustomizationCommand,\r\n  createSetAddonCommand,\r\n  createSetColorCommand,\r\n  createSetCompanionNameCommand,\r\n  createSetNameCommand,\r\n  createConnectToGameServerCommand,\r\n  createTeleportCommand,\r\n  createInputModeCommand,\r\n};\r\n","import AgoraRTC from \"agora-rtc-sdk-ng\";\r\nimport agoraConfig from \"../agora.config\";\r\nimport makeChannelId from \"../utils/generateChannelId\";\r\n\r\nvar channelMuteState = {\r\n  audio: false,\r\n  video: false,\r\n};\r\n\r\nvar localMuteState = {\r\n  audio: false,\r\n  video: false,\r\n};\r\n\r\nvar client;\r\n\r\nvar localTracks = {\r\n  videoTrack: null,\r\n  audioTrack: null,\r\n};\r\n\r\nfunction updateStateAudioTrack(isMute) {\r\n  localMuteState.audio = isMute;\r\n\r\n  console.debug(\"isMute: \", isMute);\r\n  console.debug(\"localTracks.audioTrack: \", localTracks.audioTrack);\r\n\r\n  if (channelMuteState.audio || localMuteState.audio) {\r\n    client.unpublish(localTracks.audioTrack);\r\n  } else {\r\n    client.publish(localTracks.audioTrack);\r\n  }\r\n}\r\n\r\nfunction updateStateVideoTrack(isMute) {\r\n  localMuteState.video = isMute;\r\n\r\n  if (channelMuteState.video || localMuteState.video) {\r\n    client.unpublish(localTracks.videoTrack);\r\n  } else {\r\n    client.publish(localTracks.videoTrack);\r\n  }\r\n}\r\n\r\nasync function createClient(\r\n  channelId,\r\n  agoraUid,\r\n  isAudioEnableStr,\r\n  isVideoEnableStr,\r\n  success\r\n) {\r\n  client = AgoraRTC.createClient({ mode: \"rtc\", codec: \"vp8\" });\r\n\r\n  localTracks.audioTrack = null;\r\n  localTracks.videoTrack = null;\r\n\r\n  console.log(\"AgoraRTC client initialized\");\r\n\r\n  client.on(\"connection-state-change\", (event) => {\r\n    console.debug(event);\r\n  });\r\n\r\n  client.on(\"error\", (event) => {\r\n    console.debug(event);\r\n  });\r\n\r\n  client.on(\"exception\", (event) => {\r\n    console.debug(event);\r\n  });\r\n\r\n  var options = {\r\n    uid: null,\r\n  };\r\n\r\n  channelMuteState.audio = isAudioEnableStr !== \"true\";\r\n  channelMuteState.video = isVideoEnableStr !== \"true\";\r\n\r\n  if (isAudioEnableStr === \"true\") {\r\n    localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\r\n  }\r\n\r\n  if (isVideoEnableStr === \"true\") {\r\n    localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack();\r\n  }\r\n\r\n  options.uid = await client.join(\r\n    agoraConfig.AGORA_APP_ID,\r\n    channelId,\r\n    null,\r\n    parseInt(agoraUid)\r\n  );\r\n\r\n  updateStateAudioTrack(localMuteState.audio);\r\n  updateStateVideoTrack(localMuteState.video);\r\n\r\n  client.on(\"user-published\", handleUserPublished);\r\n  client.on(\"user-unpublished\", handleUserUnpublished);\r\n\r\n  console.debug(client.remoteUsers);\r\n\r\n  client.remoteUsers.forEach(async (user) => {\r\n    console.debug(options.uid);\r\n    if (user.uid === options.uid) {\r\n      return;\r\n    }\r\n\r\n    console.debug(`subscribe ${user.uid} audio`);\r\n    var track = await client.subscribe(user, \"audio\");\r\n\r\n    track.play();\r\n  });\r\n\r\n  console.debug(\"User \" + options.uid + \" join channel successfully\");\r\n\r\n  success();\r\n}\r\n\r\nasync function attenuateAudio(data) {\r\n  if (!client) {\r\n    return;\r\n  }\r\n\r\n  var remoteClients = client.remoteUsers;\r\n\r\n  remoteClients.forEach(user => {\r\n    if (user.audioTrack) {\r\n      user.audioTrack.setVolume(0);\r\n    } else {\r\n      console.debug(`User ${user.uid} hasnt audio`);\r\n    }\r\n  })\r\n\r\n  data.distances.forEach((distanceUser) => {\r\n    var user = client.remoteUsers.find(\r\n      (item) => item.uid === parseInt(distanceUser.uid)\r\n    );\r\n\r\n    if (!user) {\r\n      return;\r\n    }\r\n\r\n    var volume = (2000 - Math.floor(distanceUser.distance)) / 20;\r\n\r\n    if (user.audioTrack) {\r\n      user.audioTrack.setVolume(volume < 0 ? 0 : volume);\r\n    } else {\r\n      console.debug(`User ${user.uid} hasnt audio`);\r\n    }\r\n  });\r\n}\r\n\r\nasync function handleUserPublished(user, mediaType) {\r\n  console.debug(`subscribe ${user.uid} audio`);\r\n  var track = await client.subscribe(user, \"audio\");\r\n\r\n  track.play();\r\n}\r\n\r\nasync function handleUserUnpublished(user) {\r\n  console.debug(`unsubscribe ${user.uid} audio`);\r\n  await client.unsubscribe(user, \"audio\");\r\n}\r\n\r\nasync function deleteClient() {\r\n  if (!client) {\r\n    return;\r\n  }\r\n\r\n  client.localTracks.forEach((track) => {\r\n    track.close();\r\n  });\r\n\r\n  await client.leave();\r\n}\r\n\r\nexport default {\r\n  createClient,\r\n  deleteClient,\r\n  attenuateAudio,\r\n  localTracks,\r\n  updateStateAudioTrack,\r\n  updateStateVideoTrack,\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { act } from \"react-dom/cjs/react-dom-test-utils.production.min\";\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"app\",\r\n  initialState: {\r\n    instanceUrl: null,\r\n    videoDevices: [],\r\n    audioDevices: [],\r\n    selectedVideoDevice: null,\r\n    selectedAudioDevice: null,\r\n    isMicMuted: false,\r\n    isAudioDisabled: false,\r\n    isVideoDisabled: false,\r\n    audioVolume: 50,\r\n    isSplashed: false,\r\n    videoStream: null,\r\n  },\r\n  reducers: {\r\n    setInstanceUrl: (state, action) => {\r\n      state.instanceUrl = action.payload;\r\n    },\r\n    setVideoDevices: (state, action) => {\r\n      state.videoDevices = [...action.payload];\r\n    },\r\n    setAudioDevices: (state, action) => {\r\n      state.audioDevices = [...action.payload];\r\n    },\r\n    setSelectedVideoDevice: (state, action) => {\r\n      state.selectedVideoDevice = action.payload;\r\n    },\r\n    setSelectedAudioDevice: (state, action) => {\r\n      state.selectedAudioDevice = action.payload;\r\n    },\r\n    setIsMicMuted: (state, action) => {\r\n      state.isMicMuted = action.payload;\r\n    },\r\n    setIsAudioDisabled: (state, action) => {\r\n      state.isAudioDisabled = action.payload;\r\n    },\r\n    setIsVideoDisabled: (state, action) => {\r\n      state.isVideoDisabled = action.payload;\r\n    },\r\n    setAudioVolume: (state, action) => {\r\n      state.audioVolume = action.payload;\r\n    },\r\n    setVideoStream: (state, action) => {\r\n      state.videoStream = action.payload;\r\n    },\r\n    setIsSplashed: (state, action) => {\r\n      state.isSplashed = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  setInstanceUrl,\r\n  setVideoDevices,\r\n  setAudioDevices,\r\n  setSelectedVideoDevice,\r\n  setSelectedAudioDevice,\r\n  setIsMicMuted,\r\n  setIsAudioDisabled,\r\n  setIsVideoDisabled,\r\n  setAudioVolume,\r\n  setVideoStream,\r\n  setIsSplashed,\r\n} = counterSlice.actions;\r\n\r\nexport default counterSlice.reducer;\r\n","import { React, useEffect, useState } from \"react\";\r\n\r\nimport agoraConfig from \"../../agora.config\";\r\nimport ue4appInstance from \"../../ue4appInstanse\";\r\nimport commandService from \"../../services/commands\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport agoraService from \"../../services/agora\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { setIsSplashed } from \"../../redux/appSlice\";\r\n\r\nimport { isMobile } from \"react-device-detect\";\r\nimport commands from \"../../services/commands\";\r\nimport { setAgoraChannelId, setAgoraId } from \"../../redux/accountSlice\";\r\n\r\nexport default function UE4Engine({ init, onInited }) {\r\n  /* Load UE4RTC */\r\n  const account = useSelector((state) => state.account);\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  var userAgoraUid;\r\n\r\n  useEffect(() => {\r\n    if (history.location.pathname === \"/app/splash\") {\r\n      dispatch(setIsSplashed(true));\r\n    } else {\r\n      history.push(\"/app/splash\");\r\n    }\r\n  }, [history]);\r\n\r\n  function ue4handler(event) {\r\n    console.debug(event);\r\n    const object = JSON.parse(event);\r\n\r\n    switch (object.command) {\r\n      case \"init_customization\": {\r\n        dispatch(setAgoraId(object.agora_user_id));\r\n        userAgoraUid = object.agora_user_id;\r\n        break;\r\n      }\r\n      case \"attenuate_audio\": {\r\n        agoraService.attenuateAudio(object);\r\n        break;\r\n      }\r\n      case \"connect_to_channel\": {\r\n        agoraService.deleteClient();\r\n\r\n        agoraService.createClient(\r\n          object.channel_id,\r\n          userAgoraUid,\r\n          object.audio_enabled,\r\n          object.video_enabled,\r\n          () => {\r\n            console.debug(`Connected to ${object.channel_id}`);\r\n          }\r\n        );\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    ue4appInstance\r\n      .getInstance()\r\n      .addUIHandler(\"handler\", (data) => ue4handler(data));\r\n    var ue4app = ue4appInstance.getInstance().getUe4app();\r\n\r\n    if (!ue4app.isLoaded) {\r\n      init();\r\n\r\n      ue4app.isLoaded = true;\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    ue4appInstance.getInstance().dataChannelInitedUE4Callback = () => {\r\n      console.debug(\"dataChannelInitedUE4Callback\");\r\n      onInited();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!account.id) {\r\n      return;\r\n    }\r\n\r\n    const initCommand = commandService.createInitCustomizationCommand(\r\n      account.id,\r\n      account.agoraUid,\r\n      account.isSuperUser,\r\n      agoraConfig.AGORA_APP_ID,\r\n      \"\"\r\n    );\r\n\r\n    const setNameCommand = commandService.createSetNameCommand(\r\n      account.neonName\r\n    );\r\n    const setInputMode = commandService.createInputModeCommand(\r\n      isMobile ? commands.inputModes.simpleTouch : commands.inputModes.simple\r\n    );\r\n\r\n    ue4appInstance.getInstance().initUE4Callback = () => {\r\n      ue4appInstance.getInstance().emitUICommand(initCommand);\r\n      ue4appInstance.getInstance().emitUICommand(setNameCommand);\r\n      ue4appInstance.getInstance().emitUICommand(setInputMode);\r\n    };\r\n  }, [account.isSuperUser, account.agoraChannelId, account.agoraUid]);\r\n\r\n  return (\r\n    <div id=\"playerUI\">\r\n      <div id=\"player\"></div>\r\n      <div id=\"overlay\" className=\"overlay\"></div>\r\n    </div>\r\n  );\r\n}\r\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/playButton.829aa06e.png\";","export default __webpack_public_path__ + \"static/media/initLoader.94ccc094.svg\";","import React, { Component } from \"react\";\r\nimport img from \"./text.png\";\r\nimport playButtonImage from \"../../../assets/images/playButton.png\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport initLoader from \"../../../assets/images/initLoader.svg\";\r\n\r\nfunction Homepage({ startVideoStreaming, loading }) {\r\n  const style = {\r\n    margin: \"0 auto\",\r\n    marginTop: \"20%\",\r\n    width: \"50%\",\r\n    fontFamily: \"Montserrat\",\r\n    fontSize: \"16px\",\r\n    zIndex: \"10000000000\",\r\n  };\r\n\r\n  const history = useHistory();\r\n\r\n  function startUnrealVideo() {\r\n    startVideoStreaming();\r\n\r\n    history.push(\"/app/customization\");\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          height: \"100%\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <ReactSVG src={initLoader} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"center\"\r\n      style={{\r\n        zIndex: 999999,\r\n        pointerEvents: \"auto\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        paddingRight: \"90px\",\r\n      }}\r\n      id=\"mobile-fix\"\r\n    >\r\n      <div\r\n        className=\"mainText\"\r\n        onClick={() => startUnrealVideo()}\r\n        style={style}\r\n      >\r\n        <p style={{ paddingLeft: \"25px\" }}>\r\n          <img\r\n            src={playButtonImage}\r\n            alt=\"no image found\"\r\n            style={{ width: 200, display: \"block\", margin: \"0 auto\" }}\r\n          ></img>\r\n        </p>\r\n        <div\r\n          className=\"welcome\"\r\n          style={{\r\n            color: \"#FFFFFF\",\r\n            margin: \"0 auto\",\r\n            textAlign: \"center\",\r\n            marginLeft: \"-40px\",\r\n            opacity: \"0.8\",\r\n          }}\r\n        >\r\n          Welcome to\r\n        </div>\r\n        <p>\r\n          <img\r\n            src={img}\r\n            alt=\"no image found\"\r\n            style={{ display: \"block\", margin: \"0 auto\" }}\r\n          ></img>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Homepage;\r\n","import { auto } from \"async\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport React, { Component } from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Grid } from \"antd\";\r\n\r\nfunction CircleButton(props) {\r\n  const { useBreakpoint } = Grid;\r\n  const screens = useBreakpoint();\r\n  const [isDesktop, setIsDesktop] = useState(false);\r\n  useEffect(() => {\r\n    if (screens.xl) {\r\n      setIsDesktop(true);\r\n    } else {\r\n      setIsDesktop(false);\r\n    }\r\n  }, [screens]);\r\n  const image = props.img;\r\n  const imageDisable = props.imgDisabled;\r\n\r\n  const [flag, setFlag] = useState(false);\r\n  // height: 44px, width: 42px in mobile\r\n\r\n  const circle = {\r\n    height: \"44px\",\r\n    width: \"42px\",\r\n  };\r\n\r\n  function changeOnClick() {\r\n    if (flag === true) {\r\n      setFlag(false);\r\n    } else {\r\n      setFlag(true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"circle\" style={circle} onClick={() => changeOnClick()}>\r\n      <ReactSVG id=\"bigSvg\" src={flag ? imageDisable : image}></ReactSVG>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CircleButton;\r\n","export default __webpack_public_path__ + \"static/media/less.113d2400.svg\";","export default __webpack_public_path__ + \"static/media/audio.67d2f08a.svg\";","export default __webpack_public_path__ + \"static/media/mic_btn.613d5013.svg\";","export default __webpack_public_path__ + \"static/media/help_btn.bf85fb01.svg\";","export default __webpack_public_path__ + \"static/media/help_btn (Hover State).27e88163.svg\";","import { auto } from \"async\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport React, { Component } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nfunction MenuButton(props) {\r\n  const button = {\r\n    height: \"44px\",\r\n    width: \"42px\",\r\n  };\r\n  return (\r\n    <div className=\"button\" style={button} >\r\n        <ReactSVG src={props.img}></ReactSVG>\r\n    </div>\r\n  );\r\n}\r\nexport default MenuButton;\r\n","export default __webpack_public_path__ + \"static/media/menu.516ce09b.svg\";","export default __webpack_public_path__ + \"static/media/settings_btn.e465db77.svg\";","export default __webpack_public_path__ + \"static/media/customization_btn.f41b634a.svg\";","export default __webpack_public_path__ + \"static/media/friends_btn.9c56b08f.svg\";","import { auto } from \"async\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport React, { Component } from \"react\";\r\nimport { useState } from \"react\";\r\nimport customization from \"../../../assets/images/customization_btn.svg\";\r\nimport settings from \"../../../assets/images/settings_btn.svg\";\r\nimport friends from \"../../../assets/images/friends_btn.svg\";\r\nimport MenuButton from \"../MenuButton/MenuButton\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useRouteMatch,\r\n  useParams,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\n\r\nfunction NavigationCircleButton() {\r\n  const history = useHistory();\r\n\r\n  const buttonNav = {\r\n    float: \"left\",\r\n    marginLeft: \"5px\",\r\n    display: \"inline-block\",\r\n  };\r\n\r\n  function goToCustomization() {\r\n    history.push(\"/app/customization\");\r\n  }\r\n\r\n  function displayFriendsPanel() {\r\n    history.push(\"/app/index/friends\");\r\n  }\r\n\r\n  function displaySettingPanel() {\r\n    history.push(\"/app/index/settings\");\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/*<div className=\"buttonNav\" style={buttonNav} onClick={goToCustomization}>\r\n        <MenuButton img={customization}></MenuButton>\r\n  </div>*/}\r\n      <div\r\n        className=\"buttonNav\"\r\n        style={buttonNav}\r\n        onClick={displayFriendsPanel}\r\n      >\r\n        <MenuButton img={friends}></MenuButton>\r\n      </div>\r\n      <div\r\n        className=\"buttonNav\"\r\n        onClick={displaySettingPanel}\r\n        style={buttonNav}\r\n      >\r\n        <MenuButton img={settings}></MenuButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default NavigationCircleButton;\r\n","export default __webpack_public_path__ + \"static/media/message.bc303132.svg\";","import React, { Component, useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  setIsMicMuted,\r\n  setIsAudioDisabled,\r\n  setIsVideoDisabled,\r\n} from \"../../../redux/appSlice\";\r\nimport { setVideoStream } from \"../../../redux/appSlice\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nfunction VideoCircle(props) {\r\n  const dispatch = useDispatch();\r\n  const app = useSelector((state) => state.app);\r\n  const videoRef = useRef(null);\r\n  const [camState, setCamState] = useState(props.state);\r\n  useEffect(() => {\r\n    !app.isVideoDisabled ? getVideo() : offVideo();\r\n  });\r\n\r\n  const getVideo = () => {\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true })\r\n      .then((stream) => {\r\n        let video = videoRef.current;\r\n        if (video) {\r\n          video.srcObject = stream;\r\n          //dispatch(setVideoStream(stream));\r\n          video.onloadedmetadata = function (e) {\r\n            video.play();\r\n          };\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"error:\", err);\r\n      });\r\n  };\r\n  let circleWidth = 130;\r\n  let circleHeight = 130;\r\n  let mult;\r\n  props.isDesktop ? (mult = 192 / 130) : (mult = 1);\r\n  if (props.isDesktop) {\r\n    circleWidth = 200;\r\n    circleHeight = 200;\r\n  }\r\n  function offVideo() {\r\n    let video = videoRef.current;\r\n    if (video.srcObject) video.srcObject.getTracks()[0].stop();\r\n  }\r\n\r\n  const upper = {\r\n    background: \"#232323\",\r\n    borderRadius: \"60%\",\r\n    display: \"inline-block\",\r\n    width: circleWidth + \"px\",\r\n    height: circleHeight + \"px\",\r\n  };\r\n  const mid = {\r\n    display: \"inline-block\",\r\n    width: !props.isDesktop ? circleWidth - 8 * mult + \"px\" : \"192px\",\r\n    height: !props.isDesktop ? circleHeight - 8 * mult + \"px\" : \"192px\",\r\n    borderRadius: \"60%\",\r\n    background: \"linear-gradient(to top, #451CFF, #B261FA)\",\r\n    margin: \"0 auto\",\r\n    marginTop: !props.isDesktop ? \"3%\" : \"4px\",\r\n    marginLeft: !props.isDesktop ? \"3%\" : \"4px\",\r\n    zIndex: \"100\",\r\n  };\r\n\r\n  const inside = {\r\n    width: !props.isDesktop ? circleWidth - 20 * mult + \"px\" : \"182px\",\r\n    height: !props.isDesktop ? circleHeight - 20 * mult + \"px\" : \"182px\",\r\n    background: \"#232323\",\r\n    borderRadius: \"60%\",\r\n    display: \"inline-block\",\r\n    marginTop: !props.isDesktop ? \"5%\" : \"5px\",\r\n    marginLeft: !props.isDesktop ? \"5%\" : \"5px\",\r\n  };\r\n  const video = {\r\n    width: !props.isDesktop ? circleWidth - 30 * mult + \"px\" : \"172px\",\r\n    height: !props.isDesktop ? circleHeight - 30 * mult + \"px\" : \"172px\",\r\n    background: \"#000000\",\r\n    borderRadius: \"60%\",\r\n    marginTop: !props.isDesktop ? \"5%\" : \"5px\",\r\n    marginLeft: !props.isDesktop ? \"5%\" : \"5px\",\r\n  };\r\n  return (\r\n    <div className=\"upper\" style={upper}>\r\n      <div className=\"mid\" style={mid}>\r\n        <div className=\"inside\" style={inside}>\r\n          <div className=\"video\" style={video}>\r\n            <video\r\n              id=\"webcam-video\"\r\n              style={{\r\n                width: !props.isDesktop\r\n                  ? circleWidth - 30 * mult + \"px\"\r\n                  : \"172px\",\r\n                height: !props.isDesktop\r\n                  ? circleHeight - 30 * mult + \"px\"\r\n                  : \"172px\",\r\n                marginLeft: \"0\",\r\n                borderRadius: \"60%\",\r\n              }}\r\n              ref={videoRef}\r\n            ></video>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VideoCircle;\r\n","export default __webpack_public_path__ + \"static/media/cam_btn.765afc3e.svg\";","export default __webpack_public_path__ + \"static/media/cam-disabled (Toggle State).569b78f2.svg\";","export default __webpack_public_path__ + \"static/media/audio-disabled.1ccf3e1a.svg\";","export default __webpack_public_path__ + \"static/media/mic_btn (Toggle State).40181343.svg\";","import React, { Component } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport CircleButton from \"../../shared/CircleButton/CircleButton\";\r\nimport less from \"../../../assets/images/less.svg\";\r\nimport audio from \"../../../assets/images/audio.svg\";\r\nimport mic from \"../../../assets/images/mic_btn.svg\";\r\nimport Question from \"../../../assets/images/help_btn.svg\";\r\nimport QuestionHover from \"../../../assets/images/help_btn (Hover State).svg\";\r\nimport MenuButton from \"../../shared/MenuButton/MenuButton\";\r\nimport Menu from \"../../../assets/images/menu.svg\";\r\nimport NavigationCircleButton from \"../../shared/NavigationCircleButton/NavigationCircleButton\";\r\nimport message from \"../../../assets/images/message.svg\";\r\nimport VideoCircle from \"../../shared/VideoCircle/VideoCircle\";\r\nimport cam from \"../../../assets/images/cam_btn.svg\";\r\nimport camDis from \"../../../assets/images/cam-disabled (Toggle State).svg\";\r\nimport audioDis from \"../../../assets/images/audio-disabled.svg\";\r\nimport micDis from \"../../../assets/images/mic_btn (Toggle State).svg\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport agora from \"../../../services/agora\";\r\nimport { setIsVideoDisabled } from \"../../../redux/appSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst { Header, Footer, Sider, Content } = Layout;\r\n\r\nfunction MobilePage() {\r\n  const history = useHistory();\r\n\r\n  const Mic = mic;\r\n  const Cam = cam;\r\n  const CamDis = camDis;\r\n  const Audio = audio;\r\n  const MicDis = micDis;\r\n  const AudioDis = audioDis;\r\n\r\n  const clickMenu = {\r\n    float: \"left\",\r\n    display: \"flex\",\r\n  };\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [micState, setMicState] = useState(true);\r\n  const [sound, setSound] = useState(true);\r\n  const [recorder, setRecorder] = useState(null);\r\n  const [webCamState, setWebCamState] = useState(true);\r\n  const [showFriends, setShowFriends] = useState(false);\r\n\r\n  const app = useSelector((state) => state.app);\r\n  const dispatch = useDispatch();\r\n\r\n  function enableMic() {\r\n    agora.updateStateAudioTrack(false);\r\n  }\r\n\r\n  function disableMic() {\r\n    agora.updateStateAudioTrack(true);\r\n  }\r\n\r\n  function changeWebCamState() {\r\n    if (!app.isVideoDisabled) {\r\n      dispatch(setIsVideoDisabled(true));\r\n      agora.updateStateVideoTrack(true);\r\n    } else {\r\n      dispatch(setIsVideoDisabled(false));\r\n      agora.updateStateVideoTrack(false);\r\n    }\r\n  }\r\n\r\n  function displayMessages() {\r\n    history.push(\"/app/index/messages\");\r\n  }\r\n\r\n  function handleClick() {\r\n    //console.log(\"click\");\r\n    if (!isOpen) {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  function changeMicState() {\r\n    if (micState) {\r\n      setMicState(false);\r\n      disableMic();\r\n    } else {\r\n      setMicState(true);\r\n      enableMic();\r\n    }\r\n  }\r\n  function changeSoundState() {\r\n    let elem = document.getElementById(\"streamingVideo\");\r\n    if (sound) {\r\n      setSound(false);\r\n      if (elem) elem.muted = true;\r\n    } else {\r\n      setSound(true);\r\n      if (elem) elem.muted = false;\r\n    }\r\n  }\r\n  return (\r\n\r\n      <Layout\r\n        style={{\r\n          \r\n          padding: 0,\r\n          backgroundColor: \"rgba(0,0,0,0)\",\r\n        }}\r\n        id=\"mobile-fix\"\r\n      >\r\n        <Header style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n          <Row>\r\n            <Col\r\n              xs={7}\r\n              sm={5}\r\n              md={4}\r\n              lg={4}\r\n              style={{ marginLeft: 10, marginTop: 10 }}\r\n            >\r\n              <VideoCircle state={webCamState}></VideoCircle>\r\n            </Col>\r\n            <Col xs={14} sm={16} md={18} lg={18} style={{ marginTop: 10 }}>\r\n              <div className=\"clickMenu\" style={clickMenu}>\r\n                <div onClick={handleClick}>\r\n                  <MenuButton img={isOpen ? less : Menu}></MenuButton>\r\n                </div>\r\n                {isOpen ? (\r\n                  <NavigationCircleButton></NavigationCircleButton>\r\n                ) : null}\r\n              </div>\r\n            </Col>\r\n            <Col style={{ marginTop: 10 }} onClick={displayMessages}>\r\n              <MenuButton img={message}></MenuButton>\r\n            </Col>\r\n          </Row>\r\n        </Header>\r\n        <Content>\r\n          <Row>\r\n            <Col span={24}></Col>\r\n          </Row>\r\n        </Content>\r\n        <Footer style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n          <Row justify={\"center\"} style={{ marginBottom: 10, marginLeft: 10 }}>\r\n            <Col xs={4} sm={3} md={2} lg={3}>\r\n              <div onClick={changeMicState}>\r\n                <CircleButton img={Mic} imgDisabled={MicDis}></CircleButton>\r\n              </div>\r\n            </Col>\r\n\r\n            <Col xs={4} sm={3} md={2} lg={3}>\r\n              <div onClick={changeSoundState}>\r\n                <CircleButton img={Audio} imgDisabled={AudioDis}></CircleButton>\r\n              </div>\r\n            </Col>\r\n\r\n            <Col xs={4} sm={3} md={2} lg={3}>\r\n              <div onClick={changeWebCamState}>\r\n                <CircleButton img={Cam} imgDisabled={CamDis}></CircleButton>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Footer>\r\n      </Layout>\r\n\r\n  );\r\n}\r\n\r\nexport default MobilePage;\r\n","import { auto } from \"async\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport React, { Component, useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nfunction DesktopToogleButton(props) {\r\n  const image = props.img;\r\n  const imageDisable = props.imgDisabled;\r\n\r\n  const circle = {\r\n    height: \"62px\",\r\n    width: \"62px\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"circle\" style={circle}>\r\n      <ReactSVG\r\n        id=\"bigSvg\"\r\n        src={props.isToogled ? imageDisable : image}\r\n      ></ReactSVG>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DesktopToogleButton;\r\n","export default __webpack_public_path__ + \"static/media/audio_big.e417307c.svg\";","export default __webpack_public_path__ + \"static/media/mic_big.d164d531.svg\";","export default __webpack_public_path__ + \"static/media/camera_big.837e9e43.svg\";","export default __webpack_public_path__ + \"static/media/camera_big (Toggle State).29314883.svg\";","export default __webpack_public_path__ + \"static/media/audio_big (Toggle State).667d9a95.svg\";","export default __webpack_public_path__ + \"static/media/mic_big (Toggle State).d475b771.svg\";","export default __webpack_public_path__ + \"static/media/settings_btn_big.546d9b13.svg\";","export default __webpack_public_path__ + \"static/media/friends_btn (1)_big.56a78847.svg\";","export default __webpack_public_path__ + \"static/media/messages_btn_big.2d54bf67.svg\";","import React, { Component } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  setIsMicMuted,\r\n  setIsAudioDisabled,\r\n  setIsVideoDisabled,\r\n} from \"../../../redux/appSlice\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport DesktopToogleButton from \"../../shared/DesktopToogleButton/DesktopToogleButton\";\r\nimport audio from \"../../../assets/images/audio_big.svg\";\r\nimport mic from \"../../../assets/images/mic_big.svg\";\r\nimport question from \"../../../assets/images/help_btn.svg\";\r\nimport MenuButton from \"../../shared/MenuButton/MenuButton\";\r\nimport VideoCircle from \"../../shared/VideoCircle/VideoCircle\";\r\nimport cam from \"../../../assets/images/camera_big.svg\";\r\nimport questionHover from \"../../../assets/images/help_btn (Hover State).svg\";\r\nimport camDis from \"../../../assets/images/camera_big (Toggle State).svg\";\r\nimport audioDis from \"../../../assets/images/audio_big (Toggle State).svg\";\r\nimport micDis from \"../../../assets/images/mic_big (Toggle State).svg\";\r\nimport { useState, useEffect } from \"react\";\r\nimport settings from \"../../../assets/images/settings_btn_big.svg\";\r\nimport friends from \"../../../assets/images/friends_btn (1)_big.svg\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport message from \"../../../assets/images/messages_btn_big.svg\"\r\nimport agora from \"../../../services/agora\";\r\n\r\nconst { Header, Footer, Sider, Content } = Layout;\r\n\r\nfunction DesktopPage() {\r\n  const screens = useBreakpoint();\r\n  console.log(screens)\r\n  const clickMenu = {\r\n    float: \"left\",\r\n    display: \"flex\",\r\n  };\r\n  const Mic = mic;\r\n  const Cam = cam;\r\n  const CamDis = camDis;\r\n  const Audio = audio;\r\n  const MicDis = micDis;\r\n  const AudioDis = audioDis;\r\n\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const app = useSelector((state) => state.app);\r\n\r\n  function enableMic() {\r\n    agora.updateStateAudioTrack(false);\r\n  }\r\n\r\n  function disableMic() {\r\n    agora.updateStateAudioTrack(true);\r\n  }\r\n\r\n  function changeWebCamState() {\r\n    if (!app.isVideoDisabled) {\r\n      dispatch(setIsVideoDisabled(true));\r\n      agora.updateStateVideoTrack(true);\r\n    } else {\r\n      dispatch(setIsVideoDisabled(false));\r\n      agora.updateStateVideoTrack(false);\r\n    }\r\n  }\r\n\r\n  function changeMicState() {\r\n    if (!app.isMicMuted) {\r\n      dispatch(setIsMicMuted(true));\r\n      disableMic();\r\n    } else {\r\n      dispatch(setIsMicMuted(false));\r\n      enableMic();\r\n    }\r\n  }\r\n\r\n  function changeSoundState() {\r\n    let elem = document.getElementById(\"streamingVideo\");\r\n    if (!app.isAudioDisabled) {\r\n      dispatch(setIsAudioDisabled(true));\r\n      if (elem) elem.muted = true;\r\n    } else {\r\n      dispatch(setIsAudioDisabled(false));\r\n      if (elem) elem.muted = false;\r\n    }\r\n  }\r\n\r\n  const buttonNav = {\r\n    float: \"left\",\r\n    marginLeft: \"40px\",\r\n    display: \"inline-block\",\r\n  };\r\n\r\n  function goToCustomization() {\r\n    history.push(\"/app/customization\");\r\n  }\r\n  function displayMessages() {\r\n    history.push(\"/app/index/messages\");\r\n  }\r\n\r\n  function displayFriendsPanel() {\r\n    history.push(\"/app/index/friends\");\r\n  }\r\n\r\n  function displaySettingPanel() {\r\n    history.push(\"/app/index/settings\");\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      style={{ height: \"100vh\", padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}\r\n    >\r\n      <Header style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n        <Row>\r\n          <Col md={5} lg={4} xl={3} style={{ marginLeft: 10, marginTop: 10 }}>\r\n            <VideoCircle\r\n              isDesktop={true}\r\n              state={!app.isVideoDisabled}\r\n            ></VideoCircle>\r\n          </Col>\r\n          <Col md={16} lg={18} xl={19} style={screens.xl?{ marginTop: 10, marginRight:35 }:{marginTop:10} }>\r\n            <div className=\"clickMenu\" style={clickMenu}>\r\n              <div>\r\n                {/*<div\r\n                  className=\"buttonNav\"\r\n                  style={buttonNav}\r\n                  onClick={goToCustomization}\r\n                >\r\n                  <MenuButton img={customization}></MenuButton>\r\n                </div>*/}\r\n                <div\r\n                  className=\"buttonNav\"\r\n                  style={buttonNav}\r\n                  onClick={displayFriendsPanel}\r\n                >\r\n                  <MenuButton img={friends}></MenuButton>\r\n                </div>\r\n                <div\r\n                  className=\"buttonNav\"\r\n                  onClick={displaySettingPanel}\r\n                  style={buttonNav}\r\n                >\r\n                  <MenuButton img={settings}></MenuButton>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Col>\r\n          <Col style={{ marginTop: 10 }} onClick={displayMessages}>\r\n            <MenuButton img={message}></MenuButton>\r\n          </Col>\r\n        </Row>\r\n      </Header>\r\n      <Content></Content>\r\n      <Footer style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n        <Row justify={\"center\"} style={{ marginBottom: 30, marginLeft: 10 }}>\r\n          <Col span={12}>\r\n            <Row justify={\"center\"}>\r\n              <Col span={24}>\r\n                <Row justify=\"center\">\r\n                  <Col md={3} xl={2}>\r\n                    <div onClick={changeMicState}>\r\n                      <DesktopToogleButton\r\n                        isToogled={app.isMicMuted}\r\n                        img={Mic}\r\n                        imgDisabled={MicDis}\r\n                      ></DesktopToogleButton>\r\n                    </div>\r\n                  </Col>\r\n                  <Col md={3} xl={2} style={{ marginLeft: \"25px\" }}>\r\n                    <div onClick={changeSoundState}>\r\n                      <DesktopToogleButton\r\n                        isToogled={app.isAudioDisabled}\r\n                        img={Audio}\r\n                        imgDisabled={AudioDis}\r\n                      ></DesktopToogleButton>\r\n                    </div>\r\n                  </Col>\r\n                  <Col md={3} xl={1} style={{ marginLeft: \"25px\" }}>\r\n                    <div onClick={changeWebCamState}>\r\n                      <DesktopToogleButton\r\n                        isToogled={app.isVideoDisabled}\r\n                        img={Cam}\r\n                        imgDisabled={CamDis}\r\n                      ></DesktopToogleButton>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Footer>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default DesktopPage;\r\n","export default __webpack_public_path__ + \"static/media/ufo.262cd41d.svg\";","export default __webpack_public_path__ + \"static/media/close_btn (Hover State).d57a0a5d.svg\";","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { useState } from \"react\";\r\nimport { act } from \"react-dom/cjs/react-dom-test-utils.production.min\";\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"report\",\r\n  initialState: {\r\n    harassment: false,\r\n    suspicious: false,\r\n    abusive: false,\r\n    llegal: false,\r\n    solicting: false,\r\n    isReportOpen: false,\r\n    isReportSubmited: false,\r\n  },\r\n  reducers: {\r\n    setIsHarassment: (state, action) => {\r\n      state.harassment = action.payload;\r\n    },\r\n    setIsSuspicious: (state, action) => {\r\n      state.suspicious = action.payload;\r\n    },\r\n    setIsAbusive: (state, action) => {\r\n      state.abusive = action.payload;\r\n    },\r\n    setIsIllegal: (state, action) => {\r\n      state.illegal = action.payload;\r\n    },\r\n    setIsSolicting: (state, action) => {\r\n      state.solicting = action.payload;\r\n    },\r\n    setIsReportOpen: (state, action) => {\r\n      state.isReportOpen = action.payload;\r\n    },\r\n    setIsReportSubmited: (state, action) => {\r\n      state.isReportSubmited = action.payload;\r\n    },\r\n  },\r\n});\r\nexport const {\r\n  setIsHarassment,\r\n  setIsSuspicious,\r\n  setIsAbusive,\r\n  setIsIllegal,\r\n  setIsSolicting,\r\n  setIsReportOpen,\r\n  setIsReportSubmited,\r\n} = counterSlice.actions;\r\nexport default counterSlice.reducer;\r\n","import { React } from \"react\";\r\nimport { Row, Col, Checkbox } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport {\r\n  setIsHarassment,\r\n  setIsSuspicious,\r\n  setIsAbusive,\r\n  setIsIllegal,\r\n  setIsSolicting,\r\n} from \"../../../../redux/reportSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function Checkboxes(params) {\r\n  const report = useSelector((state) => state.report);\r\n  const dispatch = useDispatch();\r\n  const checkboxText = {\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"14px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  function causeReport(e, type) {\r\n    const checked = e.target.checked;\r\n    console.log(checked);\r\n    if (type === \"harassment\") {\r\n      dispatch(setIsHarassment(checked));\r\n    }\r\n    if (type === \"suspicious\") {\r\n      dispatch(setIsSuspicious(checked));\r\n    }\r\n    if (type === \"abusive\") {\r\n      dispatch(setIsAbusive(checked));\r\n    }\r\n    if (type === \"illegal\") {\r\n      dispatch(setIsIllegal(checked));\r\n    }\r\n    if (type === \"solicting\") {\r\n      dispatch(setIsSolicting(checked));\r\n    }\r\n  }\r\n  return (\r\n    <Row>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <Checkbox\r\n              checked={report.harassment}\r\n              onChange={(e) => causeReport(e, \"harassment\")}\r\n            >\r\n              <span style={checkboxText}>Harassment</span>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 5 }}>\r\n            <Checkbox\r\n              checked={report.suspicious}\r\n              onChange={(e) => causeReport(e, \"suspicious\")}\r\n            >\r\n              <span style={checkboxText}>Suspicious behavior or spam</span>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 5 }}>\r\n            <Checkbox\r\n              checked={report.solicting}\r\n              onChange={(e) => causeReport(e, \"solicting\")}\r\n            >\r\n              <span style={checkboxText}>Soliciting other users</span>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 5 }}>\r\n            <Checkbox\r\n              checked={report.abusive}\r\n              onChange={(e) => causeReport(e, \"abusive\")}\r\n            >\r\n              <span style={checkboxText}>Using abusive language</span>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 5 }}>\r\n            <Checkbox\r\n              checked={report.illegal}\r\n              onChange={(e) => causeReport(e, \"illegal\")}\r\n            >\r\n              <span style={checkboxText}>Illegal activity</span>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nexport default function Submit() {\r\n    const Submit = {\r\n      fontFamily: \"Niveau Grotesk Bold\",\r\n      fontSize: \"19px\",\r\n      textAlign: \"center\",\r\n      background: \"#606060\",\r\n      borderRadius: \"20px\",\r\n      width: \"100%\",\r\n      height:\"100%\",\r\n      color:\"#ffff\",\r\n      padding: \"7px\",\r\n      display:\"inline-block\",\r\n    };\r\n    return (\r\n        <div>\r\n          <div style={Submit}>Submit</div>\r\n        </div>\r\n    );\r\n  }","import { React } from \"react\";\r\nimport { Row, Col, Checkbox } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport close from \"../../../../assets/images/close_btn (Hover State).svg\";\r\nimport Checkboxes from \"./Chekboxes\";\r\nimport Submit from \"./Submit\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setIsReportOpen, setIsReportSubmited } from \"../../../../redux/reportSlice\";\r\n\r\nexport default function ReportSubmitted(props) {\r\n  const submitted = {\r\n    color: \"#FFFFFF\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n  };\r\n  const advice = {\r\n    color: \"#DEDEDE\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const dispatch = useDispatch();\r\n\r\n  function changeReportState() {\r\n    dispatch(setIsReportOpen(false));\r\n    dispatch(setIsReportSubmited(false))\r\n  }\r\n  return (\r\n    <Row style={{ background: \"#523FF9\", borderRadius: \"10px\" }}>\r\n      <Col span={24} style={{ marginLeft: 20 }}>\r\n        <Row>\r\n          <Col span={19} style={{ marginTop: 30 }}>\r\n            <span style={submitted}>Report Submitted</span>\r\n          </Col>\r\n          <Col\r\n            span={1}\r\n            style={{ marginTop: 10, marginLeft: 10 }}\r\n            onClick={props.onExitReport}\r\n          >\r\n            <div\r\n              className=\"backgroundForSVG\"\r\n              style={{ boxShadow: \"0 2px 0 0 #303030\" }}\r\n              onClick={changeReportState}\r\n            >\r\n              <ReactSVG src={close}></ReactSVG>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={20} style={{ marginRight: 20 }}>\r\n            <span style={advice}>\r\n              Your report on {props.reportedUserName} has been successfully\r\n              submitted. A member of our team will review your case and take\r\n              appropriate action if determined to be a legitimate cause for\r\n              termination. A case number will be sent to your account email\r\n              address for your reference.\r\n            </span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={20} style={{ marginTop: 15, marginBottom: 20 }}>\r\n            <span style={advice}>\r\n              If you have any questions, don't hesitate to respond directly to\r\n              the case number email. Otherwise, you can contact us at\r\n              <a className=\"mail\" href=\"mailto:info@passage.com\">\r\n                info@passage.com\r\n              </a>\r\n            </span>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Checkbox, Input } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport close from \"../../../../assets/images/close_btn (Hover State).svg\";\r\nimport Checkboxes from \"./Chekboxes\";\r\nimport Submit from \"./Submit\";\r\nimport { useState, useEffect } from \"react\";\r\nimport ReportSubmitted from \"./ReportSubmitted\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport accountHttpService from \"../../../../services/account\";\r\nimport {\r\n  setIsHarassment,\r\n  setIsSuspicious,\r\n  setIsAbusive,\r\n  setIsIllegal,\r\n  setIsSolicting,\r\n} from \"../../../../redux/reportSlice\";\r\n\r\nexport default function Report(props) {\r\n  const [reportDescription, setReportDescription] = useState(\"\");\r\n  const { TextArea } = Input;\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const account = useSelector((state) => state.account);\r\n  const reportStatus = useSelector((state) => state.report);\r\n  const [isEmptyReport, setIsEmptyReport] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  function descriptionChange(e) {\r\n    setReportDescription(e.target.value);\r\n    checkIsReportEmpty()\r\n  }\r\n  function concatCauses() {\r\n    let cause = \"\";\r\n    if (reportStatus.harassment) {\r\n      cause += \"Harassment \";\r\n    }\r\n    if (reportStatus.suspicious) {\r\n      cause += \"Suspicious_behavior_or_spam \";\r\n    }\r\n    if (reportStatus.abusive) {\r\n      cause += \"Using_abusive_language \";\r\n    }\r\n    if (reportStatus.illegal) {\r\n      cause += \"Illegal_activity \";\r\n    }\r\n    if (reportStatus.solicting) {\r\n      cause += \"Soliciting_other_users \";\r\n    }\r\n    clearReportCheckboxes();\r\n    return cause;\r\n  }\r\n  function clearReportCheckboxes() {\r\n    dispatch(setIsHarassment(false));\r\n    dispatch(setIsSuspicious(false));\r\n    dispatch(setIsIllegal(false));\r\n    dispatch(setIsAbusive(false));\r\n    dispatch(setIsSolicting(false));\r\n  }\r\n\r\n  function checkIsReportEmpty(params) {\r\n    if (\r\n      reportStatus.harassment === false &&\r\n      reportStatus.suspicious === false &&\r\n      reportStatus.abusive === false &&\r\n      reportStatus.illegal === false &&\r\n      reportStatus.solicting === false /* && \r\n      reportDescription === \"\" */\r\n    ) {\r\n      setIsEmptyReport(true);\r\n      console.log(isEmptyReport);\r\n    }\r\n    else{\r\n      setIsEmptyReport(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkIsReportEmpty();\r\n  }, [reportStatus]);\r\n\r\n  useEffect(() => {\r\n    checkIsReportEmpty();\r\n  });\r\n\r\n  function submit() {\r\n    if (isSubmit) {\r\n      setIsSubmit(false);\r\n    } else {\r\n      setIsSubmit(true);\r\n    }\r\n    const cause = concatCauses();\r\n    const acused = props.whoReported;\r\n    accountHttpService\r\n      .addReport(account.token, acused, cause, reportDescription)\r\n      .then((res) => {\r\n        const data = res;\r\n        console.log(data);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  const report = {\r\n    color: \"#FFFFFF\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n  };\r\n  const advice = {\r\n    color: \"#909090\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const info = {\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n  };\r\n  const input = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"16px\",\r\n    fontFamily: \"Montserrat\",\r\n    paddingLeft: \"10px\",\r\n    width: \"85%\",\r\n    height: \"85%\",\r\n    paddingBottom: \"50%\",\r\n  };\r\n  const textarea = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontFamily: \"Montserrat\",\r\n    border: \"none\",\r\n    outline: \"none\",\r\n    paddingTop: \"10px\",\r\n    paddingLeft: \"10px\",\r\n    paddingRight: \"10px\",\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!isSubmit ? (\r\n        <Row\r\n          style={{\r\n            background: \"#282828\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid black\",\r\n          }}\r\n        >\r\n          <Col span={24} style={{ marginLeft: 0 }}>\r\n            <Row style={{ paddingLeft: \"30px\" }}>\r\n              <Col span={20} style={{ marginTop: 30 }}>\r\n                <span style={report}>Report {props.reportedUserName}</span>\r\n              </Col>\r\n              <Col\r\n                span={1}\r\n                style={{ marginTop: 10 }}\r\n                onClick={props.onExitReport}\r\n                className=\"opacity\"\r\n              >\r\n                <div className=\"backgroundForSVG\">\r\n                  <ReactSVG\r\n                    src={close}\r\n                    onClick={clearReportCheckboxes}\r\n                  ></ReactSVG>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col span={20} style={{ padding: \" 0 30px\", marginTop: 10 }}>\r\n                <span style={advice}>\r\n                  Select all the reasons why you are reporting this user.\r\n                </span>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col span={24} style={{ padding: \" 0 30px\" }}>\r\n                <Checkboxes />\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col span={24} style={{ padding: \" 0 30px\", marginTop: 10 }}>\r\n                <span style={info}>Additional info</span>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col span={20} style={{ paddingLeft: \"30px\", textAlign: \"left\" }}>\r\n                <span style={advice}>\r\n                  Please fill out the form below if you would like to add any\r\n                  specifics to your report. The more info you provide, the\r\n                  better we can make determinations on this specific case.\r\n                </span>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col\r\n                span={24}\r\n                style={{ padding: \" 0 30px\", marginTop: 15, marginLeft: 0 }}\r\n              >\r\n                <TextArea\r\n                  value={reportDescription}\r\n                  style={textarea}\r\n                  onChange={(e) => descriptionChange(e)}\r\n                  rows=\"8\"\r\n                  placeholder=\"Type here...\"\r\n                ></TextArea>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col\r\n                span={24}\r\n                style={{\r\n                  padding: \" 0 30px\",\r\n                  marginLeft: 0,\r\n                  marginBottom: 20,\r\n                  marginTop: 10,\r\n                  cursor: isEmptyReport?  \"not-allowed\" : \"pointer\",\r\n                }}\r\n                onClick={isEmptyReport ? null : submit}\r\n              >\r\n                <Submit />\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      ) : (\r\n        <ReportSubmitted\r\n          onExitReport={props.onExitReport}\r\n          reportedUserName={props.reportedUserName}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/removeFriend.4f01809f.svg\";","export default __webpack_public_path__ + \"static/media/Group 316.3ce3588e.svg\";","export default __webpack_public_path__ + \"static/media/FriendsWithoutBackround.e8e02dce.svg\";","import { React } from \"react\";\r\nimport { Row, Col, Checkbox, Input } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport close from \"../../../../../assets/images/close_btn (Hover State).svg\";\r\nimport Checkboxes from \"../Chekboxes\";\r\nimport Submit from \"../Submit\";\r\nimport { useState, useEffect } from \"react\";\r\nimport ReportSubmitted from \"../ReportSubmitted\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport accountHttpService from \"../../../../../services/account\";\r\nimport {\r\n  setIsHarassment,\r\n  setIsSuspicious,\r\n  setIsAbusive,\r\n  setIsIllegal,\r\n  setIsSolicting,\r\n  setIsReportOpen,\r\n  setIsReportSubmited\r\n} from \"../../../../../redux/reportSlice\";\r\n\r\nexport default function MobileReport(props) {\r\n  const [reportDescription, setReportDescription] = useState(\"\");\r\n  const { TextArea } = Input;\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const [isEmptyReport, setIsEmptyReport] = useState(false);\r\n  const account = useSelector((state) => state.account);\r\n  const reportStatus = useSelector((state) => state.report);\r\n  const dispatch = useDispatch();\r\n\r\n  function descriptionChange(e) {\r\n    setReportDescription(e.target.value);\r\n  }\r\n\r\n  function checkIsReportEmpty(params) {\r\n    if (\r\n      reportStatus.harassment === false &&\r\n      reportStatus.suspicious === false &&\r\n      reportStatus.abusive === false &&\r\n      reportStatus.illegal === false &&\r\n      reportStatus.solicting === false /* && \r\n      reportDescription === \"\" */\r\n    ) {\r\n      setIsEmptyReport(true);\r\n    } else {\r\n      setIsEmptyReport(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkIsReportEmpty();\r\n  }, [reportStatus]);\r\n\r\n  useEffect(() => {\r\n    checkIsReportEmpty();\r\n  },[]);\r\n\r\n  function concatCauses() {\r\n    let cause = \"\";\r\n    if (reportStatus.harassment) {\r\n      cause += \"Harassment \";\r\n    }\r\n    if (reportStatus.suspicious) {\r\n      cause += \"Suspicious_behavior_or_spam \";\r\n    }\r\n    if (reportStatus.abusive) {\r\n      cause += \"Using_abusive_language \";\r\n    }\r\n    if (reportStatus.illegal) {\r\n      cause += \"Illegal_activity \";\r\n    }\r\n    if (reportStatus.solicting) {\r\n      cause += \"Soliciting_other_users \";\r\n    }\r\n    clearReportCheckboxes();\r\n    return cause;\r\n  }\r\n  function clearReportCheckboxes() {\r\n    dispatch(setIsHarassment(false));\r\n    dispatch(setIsSuspicious(false));\r\n    dispatch(setIsIllegal(false));\r\n    dispatch(setIsAbusive(false));\r\n    dispatch(setIsSolicting(false));\r\n  }\r\n\r\n  function submit() {\r\n    if (isSubmit) {\r\n      setIsSubmit(false);\r\n    } else {\r\n      setIsSubmit(true);\r\n      dispatch(setIsReportSubmited(true))\r\n    }\r\n    const cause = concatCauses();\r\n    const acused = props.whoReported;\r\n    accountHttpService\r\n      .addReport(account.token, acused, cause, reportDescription)\r\n      .then((res) => {\r\n        const data = res;\r\n        console.log(data);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  const report = {\r\n    color: \"#FFFFFF\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n  };\r\n  const advice = {\r\n    color: \"#909090\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const info = {\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n  };\r\n  const input = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"16px\",\r\n    fontFamily: \"Montserrat\",\r\n    paddingLeft: \"10px\",\r\n    width: \"85%\",\r\n    height: \"85%\",\r\n    paddingBottom: \"50%\",\r\n  };\r\n  const textarea = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontFamily: \"Montserrat\",\r\n    border: \"none\",\r\n    outline: \"none\",\r\n    paddingTop: \"10px\",\r\n    paddingLeft: \"10px\",\r\n    paddingRight: \"10px\",\r\n  };\r\n  function changeStateReport() {\r\n    dispatch(setIsReportOpen(false));\r\n  }\r\n  return (\r\n    <div>\r\n      {!isSubmit ? (\r\n        <Row\r\n          align={\"center\"}\r\n          justify={\"center\"}\r\n          style={{\r\n            height: \"100%\",\r\n            backgroundColor: \"gray\",\r\n            pointerEvents: \"auto\",\r\n            overflowY: \"scroll\",\r\n          }}\r\n          id=\"mobile-fix-report\"\r\n        >\r\n          <Col span={24}>\r\n            <Row\r\n              style={{\r\n                border: \"1px solid black\",\r\n                width: \"98vw\",\r\n                border: 0,\r\n                backgroundColor: \"#282828\",\r\n                borderRadius: 10,\r\n              }}\r\n            >\r\n              <Col span={24} style={{ marginLeft: 0 }}>\r\n                <Row style={{ paddingLeft: \"30px\" }}>\r\n                  <Col xs={21} sm={22} style={{ marginTop: 30 }}>\r\n                    <span style={report}>Report {props.reportedUserName}</span>\r\n                  </Col>\r\n                  <Col\r\n                    sm={1}\r\n                    sm={1}\r\n                    style={{ marginTop: 10 }}\r\n                    onClick={props.onExitReport}\r\n                    className=\"opacity\"\r\n                  >\r\n                    <div\r\n                      className=\"backgroundForSVG\"\r\n                      onClick={changeStateReport}\r\n                    >\r\n                      <ReactSVG\r\n                        src={close}\r\n                        onClick={clearReportCheckboxes}\r\n                      ></ReactSVG>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col span={20} style={{ padding: \" 0 30px\", marginTop: 10 }}>\r\n                    <span style={advice}>\r\n                      Select all the reasons why you are reporting this user.\r\n                    </span>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col span={24} style={{ padding: \" 0 30px\" }}>\r\n                    <Checkboxes />\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col span={24} style={{ padding: \" 0 30px\", marginTop: 10 }}>\r\n                    <span style={info}>Additional info</span>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col\r\n                    span={20}\r\n                    style={{ paddingLeft: \"30px\", textAlign: \"left\" }}\r\n                  >\r\n                    <span style={advice}>\r\n                      Please fill out the form below if you would like to add\r\n                      any specifics to your report. The more info you provide,\r\n                      the better we can make determinations on this specific\r\n                      case.\r\n                    </span>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col\r\n                    span={24}\r\n                    style={{ padding: \" 0 30px\", marginTop: 15, marginLeft: 0 }}\r\n                  >\r\n                    <TextArea\r\n                      style={textarea}\r\n                      onChange={(e) => descriptionChange(e)}\r\n                      rows=\"8\"\r\n                      placeholder=\"Type here...\"\r\n                    ></TextArea>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col\r\n                    span={24}\r\n                    style={{\r\n                      padding: \" 0 30px\",\r\n                      marginLeft: 0,\r\n                      marginBottom: 20,\r\n                      marginTop: 10,\r\n                    }}\r\n                    onClick={isEmptyReport ? null : submit}\r\n                  >\r\n                    <Submit />\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      ) : (\r\n        <Row justify={\"center\"}>\r\n          <Col xs={20} sm={15}>\r\n            <ReportSubmitted\r\n              onExitReport={props.onExitReport}\r\n              reportedUserName={props.reportedUserName}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/report.16539ac3.svg\";","import { React } from \"react\";\r\nimport { Row, Col, Table } from \"antd\";\r\nimport CircleButton from \"../CircleButton/CircleButton\";\r\nimport MenuButton from \"../MenuButton/MenuButton\";\r\nimport teleport from \"../../../assets/images/ufo.svg\";\r\nimport Report from \"./Report/Report\";\r\nimport message from \"../../../assets/images/message.svg\";\r\nimport { useState, useEffect } from \"react\";\r\nimport accountHttpService from \"../../../services/account\";\r\nimport removeFriend from \"../../../assets/images/removeFriend.svg\";\r\nimport addFriendImg from \"../../../assets/images/Group 316.svg\";\r\nimport FriendsWithoutBackground from \"../../../assets/images/FriendsWithoutBackround.svg\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport MobileReport from \"./Report/mobile/MobileReport\";\r\nimport report from \"../../../assets/images/report.svg\";\r\nimport {\r\n  BrowserView,\r\n  MobileView,\r\n  isBrowser,\r\n  isMobile,\r\n} from \"react-device-detect\";\r\n\r\nimport ue4appInstance from \"../../../ue4appInstanse\";\r\nimport {\r\n  Switch,\r\n  Route,\r\n  useHistory,\r\n  useRouteMatch,\r\n  Link,\r\n} from \"react-router-dom\";\r\nimport commands from \"../../../services/commands\";\r\nimport { setIsReportOpen } from \"../../../redux/reportSlice\";\r\n\r\nexport default function FriendsTable(props) {\r\n  const [isDesktop, setIsDesktop] = useState(false);\r\n  const screens = useBreakpoint();\r\n\r\n  useEffect(() => {\r\n    console.debug(screens);\r\n\r\n    if (!screens.md) {\r\n      setIsDesktop(false);\r\n    } else {\r\n      setIsDesktop(true);\r\n    }\r\n  }, [screens]);\r\n\r\n  const locale = {\r\n    color: \"#FFFFFF\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n    marginTop: \"10px\",\r\n  };\r\n  const search = useSelector((state) => state.search);\r\n  const isSearch = search.isSearch;\r\n  const dispatch = useDispatch();\r\n  const [searchMatches, setSearchMatches] = useState(search.searchItem);\r\n  const [loaderState, setLoaderState] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setSearchMatches(search.searchItem);\r\n  }, [search.searchItem]);\r\n\r\n  useEffect(() => {\r\n    setSearchMatches(search.searchItem);\r\n  }, [search.searchItem]);\r\n\r\n  const [friendsList, setFriendsList] = useState([]);\r\n  const account = useSelector((state) => state.account);\r\n  const reportRedux = useSelector((state) => state.report);\r\n  const history = useHistory();\r\n  const [whoReported, setWhoReported] = useState(\"\");\r\n  const [reportedUserName, setReportedUserName] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setFriendsList([]);\r\n    getFriendsList();\r\n    dispatch(setIsReportOpen(false));\r\n  }, []);\r\n\r\n  function getFriendsList() {\r\n    accountHttpService\r\n      .getFriendsList(account.token)\r\n      .then((response) => {\r\n        const list = response;\r\n\r\n        console.log(list);\r\n\r\n        setFriendsList(list.data[0].friendsList);\r\n        setLoaderState(true);\r\n        setTimeout(setLoader, 300);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  function setLoader() {\r\n    setLoaderState(false);\r\n  }\r\n\r\n  function requestFriendship(record) {\r\n    accountHttpService\r\n      .requestFriendship(account.token, record._id)\r\n      .then((response) => {\r\n        const data = response;\r\n        console.log(data);\r\n        getFriendsList();\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  function changeReport(record) {\r\n    setWhoReported(record._id);\r\n    setReportedUserName(\r\n      record.userId.firstName ? record.userId.firstName : record?.userId?.email\r\n    );\r\n    dispatch(setIsReportOpen(true));\r\n  }\r\n\r\n  function deleteFriend(record) {\r\n    const id = record._id;\r\n    accountHttpService\r\n      .deleteFriend(account.token, id)\r\n      .then((response) => {\r\n        const data = response;\r\n        console.log(data);\r\n        getFriendsList();\r\n      })\r\n      .catch((error) => console.error(error));\r\n    history.push(\"/app/index/friends\");\r\n  }\r\n\r\n  /* function addFriend(record) {\r\n    accountHttpService\r\n      .addFriend(account.token, record._id)\r\n      .then((res) => {\r\n        const data = res;\r\n        console.log(data);    \r\n\r\n        accountHttpService\r\n          .getFriendsList(account.token)\r\n          .then((res) => {\r\n            const list = res;\r\n            console.log(list);\r\n            setFriendsList(list.data[0].friendsList);\r\n          })\r\n          .catch((error) => console.error(error));\r\n      })\r\n      .catch((error) => console.error(error));\r\n  } \r\n\r\n  function rejectionfriendship(record) {\r\n    accountHttpService\r\n      .rejectionfriendship(account.token, record._id)\r\n      .then((response) => {\r\n        const data = response;\r\n        console.log(data);\r\n        accountHttpService\r\n          .getFriendsList(account.token)\r\n          .then((res) => {\r\n            const list = res;\r\n            console.log(list);\r\n            setFriendsList(list.data[0].friendsList);\r\n          })\r\n          .catch((error) => console.error(error));\r\n      })\r\n      .catch((error) => console.error(error));\r\n    history.push(\"/app/index/friends\");\r\n  } */\r\n\r\n  function teleportUE4To(user) {\r\n    console.debug(user);\r\n\r\n    let createTeleportCommand = commands.createTeleportCommand(user.userId._id);\r\n    ue4appInstance.getInstance().emitUICommand(createTeleportCommand);\r\n  }\r\n\r\n  const columnsFriends = [\r\n    {\r\n      title: \"Username\",\r\n      dataIndex: \"userId.email\",\r\n      width: \"25%\",\r\n      key: \"name\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row style={{ width: \"100%\" }}>\r\n            <Col>\r\n              <Row>\r\n                <span\r\n                  style={{ fontFamily: \"Niveau Grotesk Bold\", fontSize: 20 }}\r\n                >\r\n                  {record.hasOwnProperty(\"userId\")\r\n                    ? record.userId.firstName\r\n                      ? record.userId.firstName\r\n                      : record?.userId?.email\r\n                    : \"fdsjkfsjh\"}\r\n                </span>\r\n              </Row>\r\n              {/* <Row>\r\n                <span style={{ fontFamily: \"Montserrat\", fontSize: 10 }}>\r\n                  {record?.userId?.accepted ? null : \"not accepted\"}\r\n                  {console.log(record)}\r\n                </span>\r\n              </Row> */}\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n    /*{\r\n      title: \"Message\",\r\n      dataIndex: \"age\",\r\n      width: \"15%\",\r\n      align: \"center\",\r\n      key: \"age\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Link\r\n            to={{\r\n              pathname: \"/app/index/chat\",\r\n              state: { record: record?.userId?.email },\r\n            }}\r\n            style={{ textDecoration: \"none\", color: \"white\" }}\r\n          >\r\n            <Row>\r\n              <Col>\r\n                <MenuButton img={message} i/>\r\n              </Col>\r\n            </Row>\r\n          </Link>\r\n        );\r\n      },\r\n    },*/\r\n    {\r\n      title: \"Teleport to\",\r\n      dataIndex: \"address\",\r\n      width: \"4%\",\r\n      align: \"center\",\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col onClick={() => teleportUE4To(record)}>\r\n              <MenuButton img={teleport} />\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Report\",\r\n      dataIndex: \"address\",\r\n      width: \"5%\",\r\n      align: \"center\",\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col>\r\n              <div onClick={() => changeReport(record)}>\r\n                <MenuButton img={report} />\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n    /*{\r\n      title: \"Block\",\r\n      dataIndex: \"address\",\r\n      width: \"15%\",\r\n      align: \"center\",\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col>\r\n              <MenuButton img={message} />\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },*/\r\n    {\r\n      title: \"Remove\",\r\n      dataIndex: \"address\",\r\n      width: \"4%\",\r\n      align: \"center\",\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col onClick={() => deleteFriend(record)}>\r\n              <MenuButton img={removeFriend} />\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  const columsSearch = [\r\n    {\r\n      title: \"Username\",\r\n      dataIndex: \"userId.email\",\r\n      width: \"25%\",\r\n      key: \"name\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row style={{ width: \"100%\" }}>\r\n            <Col>\r\n              <Row>\r\n                <span\r\n                  style={{ fontFamily: \"Niveau Grotesk Bold\", fontSize: 20 }}\r\n                >\r\n                  {record.firstName ? record.firstName : record.email}\r\n                </span>\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n    /* {\r\n      title: \"Message\",\r\n      dataIndex: \"age\",\r\n      width: \"15%\",\r\n      align: \"center\",\r\n      key: \"age\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Link\r\n            to={{\r\n              pathname: \"/app/index/chat\",\r\n              state: {\r\n                id: record._id,\r\n                nick: record.firstName ? record.firstName : record.email,\r\n                fromMessages: false,\r\n              },\r\n            }}\r\n            style={{ textDecoration: \"none\", color: \"white\" }}\r\n          >\r\n            <Row justify={\"center\"}>\r\n              <Col span={16}>\r\n                <CircleButton img={message} imgDisabled={message} />\r\n              </Col>\r\n            </Row>\r\n          </Link>\r\n        );\r\n      }\r\n    }, */\r\n    {\r\n      title: \"Add to Friends\",\r\n      dataIndex: \"address\",\r\n      width: \"15%\",\r\n      align: \"center\",\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col span={16} onClick={() => requestFriendship(record)}>\r\n              <MenuButton img={addFriendImg} />\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n  return (\r\n    <Row>\r\n      <Col span={24}>\r\n        {!isSearch ? (\r\n          <Table\r\n            pagination={false}\r\n            className={\"friendsTable\"}\r\n            rowClassName={\"\"}\r\n            style={{ width: \"100%\", height: isDesktop ? \"600px\" : \"79vh\" }}\r\n            dataSource={friendsList}\r\n            columns={columnsFriends}\r\n            loading={loaderState}\r\n            locale={{\r\n              emptyText: (\r\n                <Row justify=\"center\">\r\n                  <Col span={24}>\r\n                    <div>\r\n                      <img src={FriendsWithoutBackground}></img>\r\n                    </div>\r\n                  </Col>\r\n                  <Col span={24}>\r\n                    <span style={locale}>You don't have any friends yet</span>\r\n                  </Col>\r\n                  <Col span={24}>\r\n                    <span style={locale}>Try to find and add a friend!</span>\r\n                  </Col>\r\n                </Row>\r\n              ),\r\n            }}\r\n          />\r\n        ) : (\r\n          <Table\r\n            pagination={false}\r\n            className={\"friendsTable\"}\r\n            rowClassName={\"\"}\r\n            style={{ width: \"100%\", height: isMobile ? \"77vh\" : \"600px\" }}\r\n            dataSource={searchMatches}\r\n            columns={columsSearch}\r\n          />\r\n        )}\r\n      </Col>\r\n      {reportRedux.isReportOpen ? (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <div className=\"report\">\r\n            <Row justify=\"center\">\r\n              {isDesktop ? (\r\n                <Col md={11} lg={9} xl={7} style={{ alignContent: \"center\" }}>\r\n                  <Report\r\n                    onExitReport={() => {\r\n                      history.push(\"/app/index/friends\");\r\n                    }}\r\n                    whoReported={whoReported}\r\n                    reportedUserName={reportedUserName}\r\n                  />\r\n                </Col>\r\n              ) : (\r\n                <Col>\r\n                  <MobileReport\r\n                    onExitReport={() => {\r\n                      history.push(\"/app/index/friends\");\r\n                    }}\r\n                    whoReported={whoReported}\r\n                    reportedUserName={reportedUserName}\r\n                  />\r\n                </Col>\r\n              )}\r\n            </Row>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/facebook.1b1a322c.svg\";","export default __webpack_public_path__ + \"static/media/Group -9.93151265.svg\";","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"search\",\r\n  initialState: {\r\n    isSearch: false,\r\n    searchItem: [],\r\n  },\r\n  reducers: {\r\n    setIsSearch: (state, action) => {\r\n      state.isSearch = action.payload;\r\n    },\r\n    setSearchItem: (state, action) => {\r\n      state.searchItem = action.payload;\r\n    },\r\n  },\r\n});\r\nexport const { setIsSearch, setSearchItem } = counterSlice.actions;\r\nexport default counterSlice.reducer;\r\n","import { React } from \"react\";\r\nimport { Row, Col } from \"antd\";\r\n\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport CircleButton from \"../CircleButton/CircleButton\";\r\n\r\nimport FriendsWithoutBackground from \"../../../assets/images/FriendsWithoutBackround.svg\";\r\nimport close from \"../../../assets/images/close_btn (Hover State).svg\";\r\nimport Facebook from \"../../../assets/images/facebook.svg\";\r\nimport findBtn from \"../../../assets/images/Group -9.svg\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setIsSearch, setSearchItem } from \"../../../redux/searchSlice\";\r\nimport accountHttpService from \"../../../services/account\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\n\r\nexport default function FriendNavigationPanel({ onExitFriendsClick }) {\r\n  \r\n  const screens = useBreakpoint();\r\n\r\n  const search = useSelector((state) => state.search);\r\n  const account = useSelector((state) => state.account);\r\n  const isSearch = search.isSearch;\r\n  const dispatch = useDispatch();\r\n  const [isFindOpen, setIsFindOpen] = useState(isSearch);\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n\r\n  /* const backgroundForSVG = {\r\n    width: \"42px\",\r\n    height: \"44px\",\r\n    background: \"#606060\",\r\n    borderRadius: \"25px\",\r\n  }; */\r\n\r\n  function inputChange(e) {\r\n    setSearchValue(e.target.value);\r\n  }\r\n  function clearSearch() {\r\n    dispatch(setSearchItem([]));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (searchValue === \"\") {\r\n      return;\r\n    }\r\n    const delaySearchFunction = setTimeout(() => {\r\n      searchByParams();\r\n    }, 500);\r\n\r\n    return () => clearTimeout(delaySearchFunction);\r\n  }, [searchValue]);\r\n\r\n  function searchByParams() {\r\n    let email = searchValue;\r\n    let userName = searchValue;\r\n    accountHttpService\r\n      .searchUser(account.token, email, userName)\r\n      .then((res) => {\r\n        const data = res;\r\n        dispatch(setSearchItem(data.data));\r\n        console.log(data);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  function swapFind() {\r\n    if (isFindOpen === true) {\r\n      setIsFindOpen(false);\r\n      dispatch(setIsSearch(false));\r\n    } else {\r\n      setIsFindOpen(true);\r\n      dispatch(setIsSearch(true));\r\n    }\r\n    clearSearch();\r\n    setSearchValue(\"\");\r\n  }\r\n  const input = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"16px\",\r\n    fontFamily: \"Montserrat\",\r\n    paddingLeft: \"10px\",\r\n    width: \"95%\",\r\n    height: \"85%\",\r\n    marginTop: 8,\r\n  };\r\n  return (\r\n    <div>\r\n      {!isFindOpen ? (\r\n        <Row\r\n          style={{\r\n            paddingRight: 24,\r\n            paddingBottom: 12,\r\n            paddingTop: 12,\r\n            paddingLeft: 24,\r\n          }}\r\n          justify={\"space-between\"}\r\n        >\r\n          <Col style={{ display: \"flex\" }}>\r\n            <Row style={{ alignContent: \"center\" }}>\r\n              <Col>\r\n                <ReactSVG src={FriendsWithoutBackground}></ReactSVG>\r\n              </Col>\r\n              <Col style={{ marginLeft: 16 }}>\r\n                <span\r\n                  style={{\r\n                    display: \"inline-flex\",\r\n                    alignItems: \"center\",\r\n                    letterSpacing: 0,\r\n                    fontSize: 19,\r\n                    fontFamily: \"Niveau Grotesk Bold\",\r\n                  }}\r\n                >\r\n                  FRIENDS\r\n                </span>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col>\r\n            <Row>\r\n              {/* <Col>\r\n                <Row style={{ alignContent: \"center\" }}>\r\n                  <span\r\n                    style={{\r\n                      marginRight: 6,\r\n                      display: \"inline-flex\",\r\n                      alignItems: \"center\",\r\n                    }}\r\n                  >\r\n                    Connect to facebook\r\n                  </span>\r\n                  <div className=\"backgroundForSVG\">\r\n                    <CircleButton\r\n                      img={Facebook}\r\n                      imgDisabled={Facebook}\r\n                    ></CircleButton>\r\n                  </div>\r\n                </Row>\r\n              </Col> */}\r\n              <Col style={{ marginLeft: 16 }}>\r\n                <Row style={{ alignContent: \"center\" }}>\r\n                  <span\r\n                    style={{\r\n                      marginRight: 6,\r\n                      display: \"inline-flex\",\r\n                      alignItems: \"center\",\r\n                    }}\r\n                  >\r\n                    Search user\r\n                  </span>\r\n                  <div onClick={swapFind}>\r\n                    <CircleButton\r\n                      img={findBtn}\r\n                      imgDisabled={findBtn}\r\n                    ></CircleButton>\r\n                  </div>\r\n                </Row>\r\n              </Col>\r\n              <Col style={{ marginLeft: 16 }} onClick={onExitFriendsClick}>\r\n                <div className=\"backgroundForSVG\">\r\n                  <CircleButton img={close} imgDisabled={close}></CircleButton>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      ) : (\r\n        <Row\r\n          style={{\r\n            paddingRight: 10,\r\n            paddingBottom: 12,\r\n            paddingTop: 12,\r\n            paddingLeft: 12,\r\n          }}\r\n        >\r\n          <Col span={24}>\r\n            <Row>\r\n              <Col span={24}>\r\n                <Row>\r\n                  <Col span={2} style={{ marginTop: 10 }}>\r\n                    <div>\r\n                      <ReactSVG src={FriendsWithoutBackground}></ReactSVG>\r\n                    </div>\r\n                  </Col>\r\n                  <Col\r\n                    span={screens.xs ? 19 : screens.sm ? 20 : 19}\r\n                    style={{ paddingBottom: 5, marginLeft: 10 }}\r\n                  >\r\n                    <input\r\n                      style={input}\r\n                      value={searchValue}\r\n                      onChange={(e) => inputChange(e)}\r\n                    ></input>\r\n                  </Col>\r\n\r\n                  <Col span={1} onClick={swapFind} style={{ marginTop: 5 }}>\r\n                    <div className=\"backgroundForSVG\">\r\n                      <ReactSVG src={close}></ReactSVG>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { React, useEffect, useState } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport FriendsTable from \"./FriendsTable\";\r\n\r\nimport FriendNavigationPanel from \"./FriendNavigationPanel\";\r\nimport accountHttpService from \"../../../services/account\";\r\nimport {\r\n  setLogin as setReduxLogin,\r\n  setToken,\r\n} from \"../../../redux/accountSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { setIsSearch } from \"../../../redux/searchSlice\";\r\nexport default function DesktopFriendsPanel({ onExitFriendsClick, isLoading, setLoading }) {\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n    }, 50);\r\n  });\r\n  return (\r\n    <Row\r\n      align={\"center\"}\r\n      justify={\"center\"}\r\n      style={{ height: \"100%\", pointerEvents: \"auto\" }}\r\n    >\r\n      <Col span={24}>\r\n        <Row\r\n          justify={\"center\"}\r\n          style={{ alignContent: \"center\", height: \"100%\" }}\r\n        >\r\n          <Card\r\n            style={{\r\n              width: 800,\r\n              boxShadow: \"2px\",\r\n              height: \"70vh\",\r\n              border: 0,\r\n              backgroundColor: \"#282828\",\r\n              borderRadius: 10,\r\n              color: \"white\",\r\n            }}\r\n          >\r\n            {/* Header */}\r\n            <Row>\r\n              <Col span={24}>\r\n                <FriendNavigationPanel\r\n                  onExitFriendsClick={onExitFriendsClick}\r\n                />\r\n                <Row style={{ overflowY: \"scroll\" }}>\r\n                  <Col span={24}>\r\n                    <FriendsTable />\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/settings.de80b6f8.svg\";","import { React } from \"react\";\r\n\r\nimport { Row, Col } from \"antd\";\r\n\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport Settings from \"../../../assets/images/settings.svg\";\r\nimport close from \"../../../assets/images/close_btn (Hover State).svg\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { setSettingsTabDefault } from \"../../../redux/accountSlice\";\r\n\r\nexport default function SettingHeaderPanel({ onExitSettings }) {\r\n  const dispatch = useDispatch()\r\n  function setDefaultTab() {\r\n    dispatch(setSettingsTabDefault(\"1\"))\r\n  }\r\n  return (\r\n    <Row\r\n      style={{ borderBottom: \"1px solid #2e2e2e\"}}\r\n      justify={\"space-between\"}\r\n    >\r\n      <Col>\r\n        <Row style={{ padding: 12, paddingBottom: 6, alignContent: \"center\" }}>\r\n          <Col>\r\n            <ReactSVG src={Settings}></ReactSVG>\r\n          </Col>\r\n          <Col style={{ marginLeft: 16 }}>\r\n            <span\r\n              style={{\r\n                display: \"inline-flex\",\r\n                alignItems: \"center\",\r\n                letterSpacing: 0,\r\n                fontSize: 19,\r\n                fontFamily: \"Niveau Grotesk Bold\",\r\n              }}\r\n            >\r\n              SETTINGS\r\n            </span>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n      <Col style={{ marginTop: 5, marginRight: 10 }}>\r\n        <Row justify={\"end\"}>\r\n          <div className=\"backgroundForSVG\" onClick={onExitSettings}>\r\n            <ReactSVG src={close} onClick={setDefaultTab}></ReactSVG>\r\n          </div>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/empyAvatar.56e931b8.png\";","import { React } from \"react\";\r\nimport empyAvatar from \"../../../../../assets/images/empyAvatar.png\"\r\n\r\nexport default function Avatar(props) {\r\n    const avatar = {\r\n        borderRadius:\"60px\"\r\n    }\r\n    return(\r\n        <div style={avatar}>\r\n            <img  style={avatar} src={empyAvatar} width=\"120px\" height=\"120px\"></img>\r\n        </div>\r\n    )\r\n    \r\n}","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\nimport { OmitProps } from \"antd/lib/transfer/ListBody\";\r\n\r\nexport default function Cancel(props) {\r\n  const cancel = {\r\n    background: \"transparent\",\r\n    borderRadius: \"20px\",\r\n    width: \"100%\",\r\n    border: \"2px  solid #707070\",\r\n    textAlign: \"center\",\r\n    height: props.height,\r\n    paddingTop: \"7px\",\r\n  };\r\n  const text = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  return (\r\n    <div style={cancel}>\r\n      <span style={text}>CANCEL</span>\r\n    </div>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\n\r\nexport default function Change(props) {\r\n  const text = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const change = {\r\n    background: \"#606060\",\r\n    borderRadius: \"20px\",\r\n    width: \"100%\",\r\n    border: \"2px  solid #707070\",\r\n    textAlign: \"center\",\r\n    height: props.height,\r\n    paddingTop: \"7px\",\r\n  };\r\n  return (\r\n    <div style={change}>\r\n      <span style={text}>{props.text}</span>\r\n    </div>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\n\r\nimport Avatar from \"./componentsForTabs/Avatar\";\r\nimport Cancel from \"./componentsForTabs/Cancel\";\r\nimport ButtonText from \"./componentsForTabs/ButtonText\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { setSettingsTabDefault } from \"../../../../redux/accountSlice\";\r\nimport accountHttpService from \"../../../../services/account\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\nexport default function AccountTab() {\r\n  const dispatch = useDispatch();\r\n  const account = useSelector((state) => state.account);\r\n  const history = useHistory()\r\n  const [changes, setChanges] = useState(null);\r\n  const [changedAvatar, setChangedAvatar] = useState(null);\r\n  const [changedEmail, setChangedEmail] = useState(null);\r\n  const [changedUserName, setChangedUserName] = useState(null);\r\n  const [changedOldPassword, setChangedOldPassword] = useState(null);\r\n  const [changedNewPassword, setChangedNewPassword] = useState(null);\r\n  const [changedConfirmPassword, setChangedConfirmPassword] = useState(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(setSettingsTabDefault(\"1\"));\r\n  }, []);\r\n  const title = {\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Open Sans\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const input = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"16px\",\r\n    fontFamily: \"Montserrat\",\r\n    paddingLeft: \"10px\",\r\n    paddingTop: \"4px\",\r\n    paddingBottom: \"4px\",\r\n    width: \"90%\",\r\n    height: \"100%\",\r\n    marginTop: 5,\r\n    border: \"none\",\r\n  };\r\n  function sumbitChanges() {\r\n    let currChanges = new Object();\r\n    if (changedAvatar && changedAvatar !== \"\") {\r\n      currChanges[\"avatar\"] = changedAvatar;\r\n    }\r\n    if (changedUserName && changedUserName !== \"\") {\r\n      currChanges[\"userName\"] = changedUserName;\r\n    }\r\n    if (changedEmail && changedUserName !== \"\") {\r\n      currChanges[\"email\"] = changedEmail;\r\n    }\r\n    if (changedOldPassword && changedOldPassword !== \"\") {\r\n      if (changedNewPassword && changedNewPassword !== \"\") {\r\n        if (changedNewPassword === changedConfirmPassword) {\r\n          currChanges[\"oldPassword\"] = changedOldPassword;\r\n          currChanges[\"newPassword\"] = changedNewPassword;\r\n        }\r\n      }\r\n    }\r\n    console.log(currChanges);\r\n    accountHttpService\r\n      .updateUser(account.token, currChanges)\r\n      .then((response) => console.log(response))\r\n      .catch((error) => console.error(error));\r\n    setChangedAvatar(\"\");\r\n    setChangedEmail(\"\");\r\n    setChangedUserName(\"\");\r\n    setChangedOldPassword(\"\");\r\n    setChangedNewPassword(\"\");\r\n    setChangedConfirmPassword(\"\");\r\n  }\r\n  return (\r\n    <Row>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <span style={title}>Avatar Image</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={6} style={{ marginTop: 15 }}>\r\n            <Avatar />\r\n          </Col>\r\n          <Col span={7} style={{ marginTop: 50 }}>\r\n            <Cancel height=\"50%\" />\r\n          </Col>\r\n          <Col span={7} style={{ marginTop: 50, marginLeft: 30 }}>\r\n            <ButtonText text=\"CHANGE\" height=\"50%\" />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"16px\" }}>\r\n            <span style={title}>Change Username</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={23} style={{ marginTop: \"16px\" }}>\r\n            <input\r\n              value={changedUserName}\r\n              onChange={(e) => setChangedUserName(e.target.value)}\r\n              className=\"auth-input\"\r\n              placeholder=\"Username\"\r\n            ></input>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"10px\" }}>\r\n            <span style={title}>Change Email</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={23} style={{ marginTop: \"16px\" }}>\r\n            <input\r\n              value={changedEmail}\r\n              onChange={(e) => setChangedEmail(e.target.value)}\r\n              className=\"auth-input\"\r\n              placeholder=\"Email\"\r\n            ></input>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"10px\" }}>\r\n            <span style={title}>Change Password</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={23} style={{ marginTop: \"16px\" }}>\r\n            <input\r\n              value={changedOldPassword}\r\n              onChange={(e) => setChangedOldPassword(e.target.value)}\r\n              className=\"auth-input\"\r\n              placeholder=\"Original password\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={23}>\r\n            <input\r\n              value={changedNewPassword}\r\n              onChange={(e) => setChangedNewPassword(e.target.value)}\r\n              className=\"auth-input\"\r\n              placeholder=\"New password\"\r\n            ></input>\r\n          </Col>\r\n          <Col span={23}>\r\n            <input\r\n              value={changedConfirmPassword}\r\n              onChange={(e) => setChangedConfirmPassword(e.target.value)}\r\n              className=\"auth-input\"\r\n              placeholder=\"Confirm password\"\r\n            ></input>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={10} style={{ marginTop: \"10px\", marginBottom: 20 }} onClick={() => history.push(\"/app/index\")}>\r\n            <Cancel height=\"120%\" />\r\n          </Col>\r\n          <Col\r\n            onClick={sumbitChanges}\r\n            span={10}\r\n            style={{ marginTop: \"10px\", marginBottom: 20, marginLeft: 25 }}\r\n          >\r\n            <ButtonText text=\"UPDATE\" height=\"120%\"></ButtonText>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space, Select, Slider } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { setAudioVolume } from \"../../../../redux/appSlice\";\r\nimport { setSettingsTabDefault } from \"../../../../redux/accountSlice\";\r\n\r\nexport default function AudioTab() {\r\n  const app = useSelector((state) => state.app);\r\n\r\n  const dispatch = useDispatch();\r\n  const [audioState, setaudioState] = useState(app.audioVolume);\r\n  const localVideoDevices = app.videoDevices;\r\n  const localAudioDevices = app.audioDevices;\r\n  const { Option } = Select;\r\n\r\n  useEffect(() => {\r\n    dispatch(setSettingsTabDefault(\"2\"));\r\n  }, []);\r\n\r\n  const [localSelectedVideoDevice, setLocalSelectedVideoDevice] = useState(\r\n    app.selectedVideoDevice\r\n  );\r\n  const [localSelectedAudioDevice, setLocalSelectedAudioDevice] = useState(\r\n    app.selectedAudioDevice\r\n  );\r\n\r\n  const title = {\r\n    fontFamily: \"Montserrat\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"19px\",\r\n  };\r\n  const advice = {\r\n    color: \"#909090\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const dropdown = {\r\n    borderRadius: \"20px\",\r\n    background: \"#7F7F7F\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const select = {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n  };\r\n  const sliderValue = {\r\n    color: \"#909090\",\r\n    fontSize: \"14px\",\r\n    fontFamily: \"Montserrat\",\r\n    marginLeft: \"15px\",\r\n    marginTop: \"20px\",\r\n  };\r\n  function handleAudioChange(value) {\r\n    setaudioState(value);\r\n    dispatch(setAudioVolume(value));\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <span style={title}>Microphone</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"8px\" }}>\r\n            <span style={advice}>Select microphone device.</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <Select\r\n              style={select}\r\n              suffixIcon=\"▼\"\r\n              placeholder=\"Select microphone device.\"\r\n              dropdownStyle={dropdown}\r\n              onChange={(value) => setLocalSelectedAudioDevice(value)}\r\n            >\r\n              {localAudioDevices.map((item) => (\r\n                <Option key={item.id}>{item.label}</Option>\r\n              ))}\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"4px\" }}>\r\n            <span style={title}>Audio</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"10px\" }}>\r\n            <span style={advice}>Select audio device.</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <Select\r\n              style={select}\r\n              suffixIcon=\"▼\"\r\n              placeholder=\"Headphones\"\r\n              dropdownStyle={dropdown}\r\n            ></Select>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"10px\" }}>\r\n            <span style={advice}>Audio level.</span>\r\n          </Col>\r\n          <Col span={19} style={{ marginTop: \"15px\" }}>\r\n            <Slider value={audioState} onChange={handleAudioChange}></Slider>\r\n          </Col>\r\n          <Col span={1} style={sliderValue}>\r\n            <span>{audioState}</span>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useRef, useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nexport default function VideoPreview(params) {\r\n  const app = useSelector((state) => state.app);\r\n  const videoPreview = {\r\n    width: \"50vh\",\r\n    height: \"30vh\",\r\n    background: \"#393939\",\r\n  };\r\n  const videoRef = useRef(null);\r\n  useEffect(() => {\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true })\r\n      .then((stream) => {\r\n        let video = videoRef.current;\r\n        if (video) {\r\n          video.srcObject = stream;\r\n          video.onloadedmetadata = function (e) {\r\n            video.play();\r\n          };\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"error:\", err);\r\n      });\r\n  });\r\n  return (\r\n    <div style={videoPreview}>\r\n      <video style={videoPreview} ref={videoRef}></video>\r\n    </div>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Select, Checkbox } from \"antd\";\r\nimport VideoPreview from \"./componentsForTabs/VideoPreview\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { setSettingsTabDefault } from \"../../../../redux/accountSlice\";\r\n\r\nexport default function VideoTab() {\r\n  const { Option } = Select;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(setSettingsTabDefault(\"3\"));\r\n  }, []);\r\n  const app = useSelector((state) => state.app);\r\n  const localVideoDevices = app.videoDevices;\r\n  const [localSelectedVideoDevice, setLocalSelectedVideoDevice] = useState(\r\n    app.selectedVideoDevice\r\n  );\r\n  const advice = {\r\n    color: \"#909090\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const title = {\r\n    fontFamily: \"Montserrat\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"19px\",\r\n  };\r\n  const dropdown = {\r\n    borderRadius: \"20px\",\r\n    background: \"#7F7F7F\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const select = {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n  };\r\n  return (\r\n    <Row>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <VideoPreview />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 15 }}>\r\n            <span style={advice}>Select video device.</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 10 }}>\r\n            <span style={title}>Video</span>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 20 }}>\r\n            <Select\r\n              style={select}\r\n              suffixIcon=\"▼\"\r\n              placeholder=\"SELECT VIDEO DEVICE\"\r\n              dropdownStyle={dropdown}\r\n              value={localSelectedVideoDevice}\r\n              onChange={(value) => setLocalSelectedVideoDevice(value)}\r\n            >\r\n              {localVideoDevices.map((item) => (\r\n                <Option key={item.id}>{item.label}</Option>\r\n              ))}\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: 15, marginLeft: 10 }}>\r\n            <Checkbox>\r\n              <span style={advice}>\r\n                Automatically turn off video feed when not focused on browser{\" \"}\r\n              </span>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\nimport Checkbox from \"antd/lib/checkbox/Checkbox\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { setSettingsTabDefault } from \"../../../../redux/accountSlice\";\r\nexport default function BillingTab() {\r\n\r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    dispatch(setSettingsTabDefault(\"4\"));\r\n  }, []); \r\n\r\n  const title = {\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Montserrat\",\r\n    color: \"#FFFFFF\",\r\n    marginTop: \"19px\",\r\n  };\r\n  const cancel = {\r\n    background: \"transparent\",\r\n    borderRadius: \"20px\",\r\n    width: \"100%\",\r\n    border: \"2px solid #707070\",\r\n    textAlign: \"center\",\r\n    color: \"white\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"20px\",\r\n    padding: \"5px 0 2px 0\",\r\n    marginTop: \"8px\",\r\n  };\r\n  const update = {\r\n    background: \"#606060\",\r\n    borderRadius: \"20px\",\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n    color: \"white\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"20px\",\r\n    padding: \"5px 0 2px 0\",\r\n    marginTop: \"8px\",\r\n  };\r\n  return (\r\n    <Row>\r\n      <Col span={21}>\r\n        <Row>\r\n          <Col span={24} style={title}>\r\n            Account Billing\r\n          </Col>\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              color: \"#909090\",\r\n              fontFamily: \"Montserrat\",\r\n              fontSize: \"14px\",\r\n              marginTop: \"10px\",\r\n            }}\r\n          >\r\n            Set up and manage your account billing for two click purchasing.\r\n          </Col>\r\n          <Col span={24}>\r\n            <input\r\n              className=\"auth-input\"\r\n              type=\"text\"\r\n              placeholder=\"Name on card\"\r\n              style={{ marginTop: \"16px\", width: \"100%\" }}\r\n            ></input>\r\n          </Col>\r\n          <Col span={24}>\r\n            <input\r\n              className=\"auth-input\"\r\n              type=\"text\"\r\n              placeholder=\"Card number\"\r\n              style={{ width: \"100%\" }}\r\n            ></input>\r\n          </Col>\r\n          <Col span={24}>\r\n            <input\r\n              className=\"auth-input\"\r\n              type=\"text\"\r\n              placeholder=\"Billing Adress\"\r\n              style={{ width: \"100%\" }}\r\n            ></input>\r\n          </Col>\r\n          <Col span={24}>\r\n            <Row justify=\"space-between\">\r\n              <Col span={11} style={cancel}>\r\n                CANCEL\r\n              </Col>\r\n              <Col span={11} style={update}>\r\n                UPDATE\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              fontSize: \"19px\",\r\n              fontFamily: \"Montserrat\",\r\n              color: \"#FFFFFF\",\r\n              marginTop: \"12px\",\r\n            }}\r\n          >\r\n            Purchases\r\n          </Col>\r\n          <Col span={24} style={{ marginTop: \"12px\" }}>\r\n            <Checkbox\r\n              style={{\r\n                fontFamily: \"Montserrat\",\r\n                fontSize: \"14px\",\r\n                color: \"#909090\",\r\n              }}\r\n            >\r\n              Enable two-click purchasing from event vendors.\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space, Select } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { setSettingsTabDefault } from \"../../../../redux/accountSlice\";\r\n\r\nexport default function ConnectionTab() {\r\n  const { Option } = Select;\r\n  const dispatch = useDispatch();\r\n  const app = useSelector((state) => state.app);\r\n  const [audioState, setaudioState] = useState(app.audioVolume);\r\n  const localVideoDevices = app.videoDevices;\r\n  const localAudioDevices = app.audioDevices;\r\n  useEffect(() => {\r\n    dispatch(setSettingsTabDefault(\"5\"));\r\n  }, []);\r\n  const [localSelectedVideoDevice, setLocalSelectedVideoDevice] = useState(\r\n    app.selectedVideoDevice\r\n  );\r\n  const title = {\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Montserrat\",\r\n    color: \"#FFFFFF\",\r\n    marginTop: \"19px\",\r\n    fontStretch: \"expanded\",\r\n  };\r\n  const disconnect = {\r\n    background: \"#606060\",\r\n    padding: \"7px\",\r\n    borderRadius: \"24px\",\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n    color: \"white\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n    boxShadow: \"0px 4px 0px #4F4F4F\",\r\n  };\r\n  const dropdown = {\r\n    borderRadius: \"20px\",\r\n    background: \"#7F7F7F\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const select = {\r\n    width: \"100%\",\r\n    height: \"90%\",\r\n  };\r\n  return (\r\n    <Row>\r\n      <Col span={21}>\r\n        <Row>\r\n          <Col span={24} style={title}>\r\n            Social Connections\r\n          </Col>\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              color: \"#909090\",\r\n              fontFamily: \"Montserrat\",\r\n              fontSize: \"14px\",\r\n              marginTop: \"10px\",\r\n            }}\r\n          >\r\n            Select video device.\r\n          </Col>\r\n          <Col span={24} style={{ marginTop: \"16px\" }}>\r\n            <Select\r\n              style={select}\r\n              suffixIcon=\"▽\"\r\n              placeholder=\"Select video device\"\r\n              dropdownStyle={dropdown}\r\n              onChange={(value) => setLocalSelectedVideoDevice(value)}\r\n            >\r\n              {localVideoDevices.map((item) => (\r\n                <Option key={item.id}>{item.label}</Option>\r\n              ))}\r\n            </Select>\r\n          </Col>\r\n          <Col span={24} style={{ marginTop: \"16px\" }}>\r\n            <Row justify=\"space-between\" align=\"middle\">\r\n              {/* <Col span={16}>\r\n                <button\r\n                  className=\"auth-button\"\r\n                  style={{\r\n                    backgroundColor: \"#1E90FF\",\r\n                    boxShadow: \"0px 4px 0px #1755a4\",\r\n                    width: \"100%\",\r\n                    padding: \"7px\",\r\n                    margin: 0,\r\n                  }}\r\n                >\r\n                  LOGGED IN WITH FACEBOOK\r\n                </button>\r\n              </Col>\r\n              <Col span={7} style={disconnect}>\r\n                DISCONNECT\r\n              </Col> */}\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space, Select, Checkbox } from \"antd\";\r\nimport accountHttpService from \"../../../../services/account\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  setSearchUserName,\r\n  setSearchFacebook,\r\n  setMyVideo,\r\n  setMyAudio,\r\n  setSettingsTabDefault,\r\n} from \"../../../../redux/accountSlice\";\r\n\r\nexport default function PrivacyTab() {\r\n  const title = {\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Montserrat\",\r\n    color: \"#FFFFFF\",\r\n    marginTop: \"19px\",\r\n    fontStretch: \"expanded\",\r\n  };\r\n  const account = useSelector((state) => state.account);\r\n  const [usernamePrivacy, setUsernamePrivacy] = useState(\r\n    account.searchUserName\r\n  );\r\n  const [facebookPrivacy, setFacebookPrivacy] = useState(\r\n    account.searchFacebook\r\n  );\r\n  const [videoPrivacy, setVideoPrivacy] = useState(account.myVideo);\r\n  const [audioPrivacy, setAudioPrivacy] = useState(account.myAudio);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(setSettingsTabDefault(\"6\"));\r\n  }, []);\r\n\r\n  function onChangePrivacy(e, type) {\r\n    const checked = e.target.checked;\r\n    console.log(checked);\r\n    if (type === \"userName\") {\r\n      setUsernamePrivacy(checked);\r\n      dispatch(setSearchUserName(checked));\r\n    }\r\n    if (type === \"facebook\") {\r\n      setFacebookPrivacy(checked);\r\n      dispatch(setSearchFacebook(checked));\r\n    }\r\n    if (type === \"video\") {\r\n      setVideoPrivacy(checked);\r\n      dispatch(setMyVideo(checked));\r\n    }\r\n    if (type === \"audio\") {\r\n      setAudioPrivacy(checked);\r\n      dispatch(setMyAudio(checked));\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    accountHttpService\r\n      .updatePrivacy(\r\n        account.token,\r\n        usernamePrivacy,\r\n        facebookPrivacy,\r\n        videoPrivacy,\r\n        audioPrivacy\r\n      )\r\n      .then((res) => {\r\n        const data = res;\r\n        console.log(data);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Row>\r\n      <Col span={21}>\r\n        <Row>\r\n          <Col span={24} style={title}>\r\n            Discoverability\r\n          </Col>\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              color: \"#909090\",\r\n              fontFamily: \"Montserrat\",\r\n              fontSize: \"14px\",\r\n              marginTop: \"10px\",\r\n            }}\r\n          >\r\n            Select how other users can search for you.\r\n          </Col>\r\n          <Col span={24}>\r\n            <Checkbox\r\n              style={{\r\n                fontFamily: \"Montserrat\",\r\n                fontSize: \"14px\",\r\n                color: \"#909090\",\r\n                marginTop: \"12px\",\r\n              }}\r\n              checked={usernamePrivacy}\r\n              onChange={(e) => onChangePrivacy(e, \"userName\")}\r\n            >\r\n              Allow users to search for you via username.\r\n            </Checkbox>\r\n          </Col>\r\n          <Col span={24}>\r\n            <Checkbox\r\n              checked={facebookPrivacy}\r\n              onChange={(e) => onChangePrivacy(e, \"facebook\")}\r\n              style={{\r\n                fontFamily: \"Montserrat\",\r\n                fontSize: \"14px\",\r\n                color: \"#909090\",\r\n                marginTop: \"12px\",\r\n              }}\r\n            >\r\n              Allow users to find you through Facebook.\r\n            </Checkbox>\r\n          </Col>\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              fontSize: \"19px\",\r\n              fontFamily: \"Montserrat\",\r\n              color: \"#FFFFFF\",\r\n              marginTop: \"12px\",\r\n            }}\r\n          >\r\n            Communication Privacy\r\n          </Col>\r\n          <Col span={24}>\r\n            <Checkbox\r\n              checked={videoPrivacy}\r\n              onChange={(e) => onChangePrivacy(e, \"video\")}\r\n              style={{\r\n                fontFamily: \"Montserrat\",\r\n                fontSize: \"14px\",\r\n                color: \"#909090\",\r\n                marginTop: \"10px\",\r\n              }}\r\n            >\r\n              Only users on your friend list can see your video feed.\r\n            </Checkbox>\r\n          </Col>\r\n          <Col span={24}>\r\n            <Checkbox\r\n              style={{\r\n                fontFamily: \"Montserrat\",\r\n                fontSize: \"14px\",\r\n                color: \"#909090\",\r\n                marginTop: \"12px\",\r\n              }}\r\n              checked={audioPrivacy}\r\n              onChange={(e) => onChangePrivacy(e, \"audio\")}\r\n            >\r\n              Only users on your friend list can hear your audio feed.\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\n\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport FriendsWithoutBackground from \"../../../assets/images/FriendsWithoutBackround.svg\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport SettingHeaderPanel from \"./SettingHeaderPanel\";\r\nimport AccountTab from \"./Tabs/AccountTab\";\r\nimport AudioTab from \"./Tabs/AudioTab\";\r\nimport VideoTab from \"./Tabs/VideoTab\";\r\nimport BillingTab from \"./Tabs/BillingTab\";\r\nimport ConnectionTab from \"./Tabs/ConnectionTab\";\r\nimport PrivacyTab from \"./Tabs/PrivacyTab\";\r\nimport { setSettingsTabDefault } from \"../../../redux/accountSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nexport default function DesktopSettingsPanel() {\r\n  const account = useSelector((state) => state.account);\r\n  const tabDefault = account.settingsTabDefault\r\n  const history = useHistory();\r\n  return (\r\n    <Row\r\n      align={\"center\"}\r\n      justify={\"center\"}\r\n      style={{ height: \"100%\", pointerEvents: \"auto\" }}\r\n    >\r\n      <Col span={24}>\r\n        <Row\r\n          justify={\"center\"}\r\n          style={{ alignContent: \"center\", height: \"100%\" }}\r\n        >\r\n          <Card\r\n            style={{\r\n              width: \"800px\",\r\n              boxShadow: \"2px\",\r\n              height: \"70vh\",\r\n              border: 0,\r\n              backgroundColor: \"#282828\",\r\n              borderRadius: 10,\r\n              color: \"white\",\r\n              overflowY: \"scroll\",\r\n              overflowX: \"hidden\",\r\n            }}\r\n          >\r\n            {/* Header */}\r\n            <SettingHeaderPanel\r\n              onExitSettings={() => {\r\n                history.push(\"/app/index\");\r\n              }}\r\n            />\r\n            <Row>\r\n              <Tabs tabPosition={\"left\"} defaultActiveKey={tabDefault}> \r\n                <TabPane tab=\"ACCOUNT\" key=\"1\">\r\n                  <div style={{ width: \"600px\" }}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <AccountTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"AUDIO\" key=\"2\">\r\n                  <div style={{ width: \"600px\" }}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <AudioTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"VIDEO\" key=\"3\">\r\n                  <div style={{ width: \"600px\" }}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <VideoTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"BILLING\" key=\"4\">\r\n                  <div style={{ width: \"600px\" }}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <BillingTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"CONNECTIONS\" key=\"5\">\r\n                  <div style={{ width: \"600px\" }}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <ConnectionTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"PRIVACY\" key=\"6\">\r\n                  <div style={{ width: \"600px\" }}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <PrivacyTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n              </Tabs>\r\n            </Row>\r\n          </Card>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"customization\",\r\n  initialState: {\r\n    ringColor: \"red\",\r\n    primaryColor: \"yellow\",\r\n    secondaryColor: \"green\",\r\n    items: [],\r\n  },\r\n  reducers: {\r\n    setCustomizationItems: (state, action) => {\r\n      state.items = action.payload;\r\n    },\r\n    setRingColor: (state, action) => {\r\n      state.ringColor = action.payload;\r\n    },\r\n    setPrimaryColor: (state, action) => {\r\n      state.primaryColor = action.payload;\r\n    },\r\n    setSecondaryColor: (state, action) => {\r\n      state.secondaryColor = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const {\r\n  setRingColor,\r\n  setCustomizationItems,\r\n  setPrimaryColor,\r\n  setSecondaryColor,\r\n} = counterSlice.actions;\r\n\r\nexport default counterSlice.reducer;\r\n","import { React, useEffect, useState } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport {\r\n  setRingColor as setReduxRingColor,\r\n  setPrimaryColor as setReduxPrimaryColor,\r\n  setSecondaryColor as setReduxSecondaryColor,\r\n} from \"../../../../redux/customizationSlice\";\r\n\r\nimport ue4appInstance from \"../../../../ue4appInstanse\";\r\nimport commandsService from \"../../../../services/commands\";\r\n\r\nexport default function DesktopColorChange(props) {\r\n  const dispatch = useDispatch();\r\n  const customization = useSelector((state) => state.customization);\r\n  //default colors (before user's changes)\r\n  const [defaultRingColor, setDefaultRingColor] = useState(null);\r\n  const [defaultPrimaryColor, setDefaultPrimaryColor] = useState(null);\r\n  const [defaultSecondaryColor, setDefaultSecondaryColor] = useState(null);\r\n\r\n  useEffect(() => {\r\n    console.log(props.type);\r\n    if (props.type === \"ring\") {\r\n      props.gen(props.type, customization.ringColor);\r\n    }\r\n    if (props.type === \"primary\") {\r\n      props.gen(props.type, customization.primaryColor);\r\n    }\r\n    if (props.type === \"secondary\") {\r\n      props.gen(props.type, customization.secondaryColor);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setDefaultRingColor(customization.ringColor);\r\n    setDefaultPrimaryColor(customization.primaryColor);\r\n    setDefaultSecondaryColor(customization.secondaryColor);\r\n  }, []);\r\n\r\n  function handleConfirm() {\r\n    props.setColor(props.pickerColor);\r\n    props.setColorInFooter(props.pickerColor);\r\n\r\n    dispatch(setReduxRingColor(customization.ringColor));\r\n    dispatch(setReduxPrimaryColor(customization.primaryColor));\r\n    dispatch(setReduxSecondaryColor(customization.secondaryColor));\r\n\r\n    const setColorCommand = commandsService.createSetColorCommand(\r\n      props.socket,\r\n      props.pickerColor\r\n    );\r\n\r\n    ue4appInstance.getInstance().emitUICommand(setColorCommand);\r\n\r\n    props.cancel();\r\n  }\r\n\r\n  function handleCancel() {\r\n    dispatch(setReduxRingColor(defaultRingColor));\r\n    dispatch(setReduxPrimaryColor(defaultPrimaryColor));\r\n    dispatch(setReduxSecondaryColor(defaultSecondaryColor));\r\n\r\n    props.cancel();\r\n  }\r\n\r\n  return (\r\n    <Row justify=\"center\" align=\"middle\">\r\n      <Col span={14} style={{ marginBottom: \"25px\" }}>\r\n        <Row justify=\"space-around\" align=\"middle\">\r\n          <Col span={6} style={{ textAlign: \"center\" }}>\r\n            <button\r\n              className=\"text-button\"\r\n              onClick={handleConfirm}\r\n              style={{\r\n                backgroundColor: \"#4f4f4f\",\r\n                width: \"80%\",\r\n                padding: \"5% 0 5% 0\",\r\n              }}\r\n            >\r\n              CONFIRM\r\n            </button>\r\n          </Col>\r\n          <Col span={5}>\r\n            <Row>\r\n              <Col span={24} style={{ textAlign: \"center\" }}>\r\n                <div\r\n                  className=\"color-rectangle\"\r\n                  style={{\r\n                    backgroundColor:\r\n                      props.type === \"ring\"\r\n                        ? customization.ringColor\r\n                        : props.type === \"primary\"\r\n                        ? customization.primaryColor\r\n                        : customization.secondaryColor,\r\n                  }}\r\n                ></div>\r\n              </Col>\r\n              <Col\r\n                className=\"customization-header-text\"\r\n                span={24}\r\n                style={{\r\n                  marginTop: \"21px\",\r\n                  textTransform: \"uppercase\",\r\n                }}\r\n              >\r\n                {props.type} COLOR\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col span={6} style={{ textAlign: \"center\" }}>\r\n            <button\r\n              className=\"text-button\"\r\n              onClick={handleCancel}\r\n              style={{\r\n                backgroundColor: \"#909090\",\r\n                width: \"80%\",\r\n                padding: \"5% 0 5% 0\",\r\n              }}\r\n            >\r\n              CANCEL\r\n            </button>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useState } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nexport default function DesktopColorRectangle(props) {\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n  const style = {\r\n    display: \"inline-block\",\r\n    width: \"160px\",\r\n    height: \"160px\",\r\n    boxShadow: \"0px 4px 0px #040206\",\r\n    border: \"4px solid #232323\",\r\n    borderRadius: \"16px\",\r\n    textAlign: \"center\",\r\n    margin: \"0 auto\",\r\n    backgroundColor: props.color,\r\n  };\r\n  return (\r\n    <Row>\r\n      <Col span={24} style={{ textAlign: \"center\" }}>\r\n        <div className=\"color-rectangle\" style={{backgroundColor: props.color}}></div>\r\n      </Col>\r\n      <Col\r\n        className=\"customization-header-text\"\r\n        span={24}\r\n        style={{ marginTop: \"21px\", textTransform: \"uppercase\" }}\r\n      >\r\n          {props.type} COLOR\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useState, useEffect } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nimport DesktopColorChange from \"./DesktopColorChange\";\r\nimport DesktopColorRectangle from \"./DesktopColorRectangle\";\r\nimport { OmitProps } from \"antd/lib/transfer/ListBody\";\r\n\r\nimport commands from \"../../../../services/commands\";\r\n\r\nexport default function DesktopFooterColors(props) {\r\n  const [isPrimary, setPrimary] = useState(null);\r\n  const [isSecondary, setSecondary] = useState(null);\r\n  const [isRing, setRing] = useState(null);\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n  const [ringColor, setRingColor] = useState(props.ringColor);\r\n  const [primaryColor, setPrimaryColor] = useState(props.primaryColor);\r\n  const [secondaryColor, setSecondaryColor] = useState(props.secondaryColor);\r\n  const customization = useSelector((state) => state.customization);\r\n  useEffect(() => {\r\n    // setRingColor(props.ringColor);\r\n    // setPrimaryColor(props.primaryColor);\r\n    // setSecondaryColor(props.secondaryColor);\r\n  });\r\n\r\n  function handleRingClick() {\r\n    setRing(true);\r\n    setPrimary(false);\r\n    setSecondary(false);\r\n  }\r\n  function handlePrimaryClick() {\r\n    setPrimary(true);\r\n    setSecondary(false);\r\n    setRing(false);\r\n  }\r\n  function handleSecondaryClick() {\r\n    setSecondary(true);\r\n    setRing(false);\r\n    setPrimary(false);\r\n  }\r\n  function cancelColorChange() {\r\n    setSecondary(false);\r\n    setRing(false);\r\n    setPrimary(false);\r\n    props.hide();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!isPrimary && !isSecondary && !isRing ? (\r\n        <Row justify=\"center\">\r\n          <Col xl={16} span={12} style={{ marginBottom: \"25px\" }}>\r\n            <Row>\r\n              <Col span={24}>\r\n                <Row justify=\"space-between\">\r\n                  <Col xl={8} span={6}>\r\n                    <Row>\r\n                      <div onClick={handleRingClick}>\r\n                        <DesktopColorRectangle\r\n                          type=\"ring\"\r\n                          color={customization.ringColor}\r\n                        ></DesktopColorRectangle>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                  <Col xl={8} span={6}>\r\n                    <Row>\r\n                      <div onClick={handlePrimaryClick}>\r\n                        <DesktopColorRectangle\r\n                          type=\"primary\"\r\n                          color={customization.primaryColor}\r\n                        ></DesktopColorRectangle>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                  <Col xl={8} span={6}>\r\n                    <Row>\r\n                      <div onClick={handleSecondaryClick}>\r\n                        <DesktopColorRectangle\r\n                          type=\"secondary\"\r\n                          color={customization.secondaryColor}\r\n                        ></DesktopColorRectangle>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      ) : null}\r\n      {isRing ? (\r\n        <DesktopColorChange\r\n          pickerColor={props.pickerColor}\r\n          color={props.ringColor}\r\n          setColor={props.setRing}\r\n          setColorInFooter={setRingColor}\r\n          type=\"ring\"\r\n          gen={props.gen}\r\n          hide={props.hide}\r\n          cancel={cancelColorChange}\r\n          socket={commands.addonsColors.ring}\r\n        ></DesktopColorChange>\r\n      ) : null}\r\n      {isSecondary ? (\r\n        <DesktopColorChange\r\n          pickerColor={props.pickerColor}\r\n          color={props.secondaryColor}\r\n          setColor={props.setSecondary}\r\n          setColorInFooter={setSecondaryColor}\r\n          type=\"secondary\"\r\n          gen={props.gen}\r\n          hide={props.hide}\r\n          cancel={cancelColorChange}\r\n          socket={commands.addonsColors.secondary}\r\n        ></DesktopColorChange>\r\n      ) : null}\r\n      {isPrimary ? (\r\n        <DesktopColorChange\r\n          pickerColor={props.pickerColor}\r\n          color={props.primaryColor}\r\n          setColor={props.setPrimary}\r\n          setColorInFooter={setPrimaryColor}\r\n          type=\"primary\"\r\n          gen={props.gen}\r\n          hide={props.hide}\r\n          cancel={cancelColorChange}\r\n          socket={commands.addonsColors.primary}\r\n        ></DesktopColorChange>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/close_btn_customization.67dda06d.svg\";","export default __webpack_public_path__ + \"static/media/face_big.a3967b99.svg\";","export default __webpack_public_path__ + \"static/media/backpack_btn.61e97370.svg\";","export default __webpack_public_path__ + \"static/media/left_hand_big.cefe4f43.svg\";","export default __webpack_public_path__ + \"static/media/right_hand_big.bab693a3.svg\";","export default __webpack_public_path__ + \"static/media/companion_big.59c90c5f.svg\";","export default __webpack_public_path__ + \"static/media/color_btn_big.c0590400.svg\";","export default __webpack_public_path__ + \"static/media/slider_arrow_left.e14e0921.svg\";","export default __webpack_public_path__ + \"static/media/slider_arrow_right.e286fd80.svg\";","import { React, useEffect, useState } from \"react\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport sliderArrowLeft from \"../../../../assets/images/slider_arrow_left.svg\";\r\nimport sliderArrowRight from \"../../../../assets/images/slider_arrow_right.svg\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport { useSelector } from \"react-redux\";\r\nimport commands from \"../../../../services/commands\";\r\nimport ue4appInstance from \"../../../../ue4appInstanse\";\r\n\r\nexport default function DesktopCustomizationSlider(props) {\r\n  const screens = useBreakpoint();\r\n  useEffect(() => {\r\n    if (screens.xl) {\r\n      setSliderItemWidth(94);\r\n    }\r\n    if (screens.xxl) {\r\n      setSliderItemWidth(120);\r\n    }\r\n  }, [screens]);\r\n\r\n  const customizationStore = useSelector((state) => state.customization);\r\n  const items = customizationStore.items.filter(\r\n    (item) => item.type === props.socket\r\n  );\r\n  const [sliderItemWidth, setSliderItemWidth] = useState(75);\r\n  const [arrowMargin, setArrowMargin] = useState(14);\r\n  const [currIndex, setCurrIndex] = useState(0);\r\n  console.log(items);\r\n  function slideToLeft() {\r\n    if (currIndex > 0) {\r\n      setCurrIndex(currIndex - 1);\r\n    }\r\n  }\r\n\r\n  function slideToRight() {\r\n    if (currIndex < items.length - maxRendered) {\r\n      setCurrIndex(currIndex + 1);\r\n    }\r\n  }\r\n\r\n  function pressAddonItem(addonId) {\r\n    const setAddonCommand = commands.createSetAddonCommand(\r\n      props.socket,\r\n      addonId\r\n    );\r\n\r\n    ue4appInstance.getInstance().emitUICommand(setAddonCommand);\r\n  }\r\n\r\n  const maxRendered =\r\n    Math.floor(window.innerWidth / (sliderItemWidth + 24)) - 2;\r\n  return (\r\n    <Row justify=\"center\">\r\n      <Col span={24} style={{ marginBottom: \"21px\" }}>\r\n        <div\r\n          className=\"customization-header-text\"\r\n          style={{\r\n            fontSize: \"32px\",\r\n            color: \"white\",\r\n            fontFamily: \"Niveau Grotesk Bold\",\r\n            textAlign: \"center\",\r\n            textTransform: \"uppercase\",\r\n            marginBottom: \"36px\",\r\n          }}\r\n        >\r\n          {props.type === \"left\" || props.type === \"right\"\r\n            ? props.type + \" hand\"\r\n            : props.type}\r\n        </div>\r\n        <Row>\r\n          <Col span={24}>\r\n            <div\r\n              className=\"slider\"\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                textAlign: \"center\",\r\n                pointerEvents: \"auto\",\r\n              }}\r\n            >\r\n              <div\r\n                className=\"slider-item\"\r\n                style={{ background: \"transparent\", border: \"none\" }}\r\n              >\r\n                <div style={{ postion: \"fixed\" }} onClick={slideToLeft}>\r\n                  <ReactSVG src={sliderArrowLeft}></ReactSVG>\r\n                </div>\r\n              </div>\r\n              <div\r\n                className=\"slider-item slider-item-none\"\r\n                style={{ marginLeft: \"24px\" }}\r\n                onClick={() => {\r\n                  pressAddonItem(\"none\");\r\n                }}\r\n              ></div>\r\n              <div>\r\n                {items.map((elem, index) => {\r\n                  if (\r\n                    index >= currIndex &&\r\n                    index <= currIndex + maxRendered - 1\r\n                  ) {\r\n                    if (index !== currIndex + maxRendered - 1)\r\n                      return (\r\n                        <div\r\n                          className=\"slider-item\"\r\n                          style={{ marginLeft: \"24px\", color: \"white\" }}\r\n                          onClick={() => {\r\n                            pressAddonItem(elem.addonId);\r\n                          }}\r\n                        >\r\n                          <img\r\n                            style={{ width: \"100%\", height: \"100%\" }}\r\n                            src={elem.imagePath}\r\n                          ></img>\r\n                        </div>\r\n                      );\r\n                  }\r\n                })}\r\n              </div>\r\n\r\n              <div\r\n                className=\"slider-item\"\r\n                style={{\r\n                  marginLeft: \"24px\",\r\n                  background: \"transparent\",\r\n                  border: \"none\",\r\n                }}\r\n              >\r\n                <div style={{ postion: \"fixed\" }} onClick={slideToRight}>\r\n                  <ReactSVG src={sliderArrowRight}></ReactSVG>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { auto } from \"async\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport React, { Component, useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nfunction DesktopCustomizationButton(props) {\r\n  const circle = {\r\n    background: props.isToogled\r\n      ? props.isColor\r\n        ? \"#17F7CD\"\r\n        : \"#451CFF\"\r\n      : \"#232323\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    borderRadius: \"60%\",\r\n    height: \" 63px\",\r\n    width: \"63px\",\r\n    paddingRight: props.type === \"lefthand\" ? \"5px\" : \"0px\",\r\n    paddingLeft: props.type === \"righthand\" ? \"5px\" : \"0px\",\r\n  };\r\n\r\n  const img = {\r\n    margin: \"0 auto\",\r\n    marginTop: \"23px\",\r\n    textAlign: \"center\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"circle\" style={circle}>\r\n      <div className=\"img\" style={img}>\r\n        <ReactSVG\r\n          afterInjection={(error, svg) => {\r\n            if (error) {\r\n              console.error(error);\r\n              return;\r\n            }\r\n\r\n            if (props.style?.borderRadius !== undefined) {\r\n              svg.style.borderRadius = props.style.borderRadius;\r\n            }\r\n          }}\r\n          src={props.img}\r\n        ></ReactSVG>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DesktopCustomizationButton;\r\n","import { React, useState, useRef, useEffect } from \"react\";\r\n\r\nimport commands from \"../../../../services/commands\";\r\n\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport ue4appInstance from \"../../../../ue4appInstanse\";\r\n\r\nexport default function DesktopName(props) {\r\n  const screens = useBreakpoint();\r\n  const [inputHeight, setInputHeight] = useState(0);\r\n  const [tapTextHeight, setTapTextHeight] = useState(0);\r\n  useEffect(() => {\r\n    console.log(inputName.current.clientHeight);\r\n    setInputHeight(inputName.current.clientHeight);\r\n    setTapTextHeight(tapText.current.clientHeight);\r\n  });\r\n  useEffect(() => {\r\n    console.log(screens);\r\n  }, [screens]);\r\n  const inputName = useRef(null);\r\n  const inputCompanion = useRef(null);\r\n  const tapText = useRef(null);\r\n  const [inputNameState, setInputNameState] = useState(false);\r\n  const [inputCompanionState, setInputCompanionState] = useState(false);\r\n  let inputStyle = {\r\n    border: \"4px solid #232323\",\r\n    borderRadius: \"48px\",\r\n    background: \"#232323\",\r\n    color: \"white\",\r\n    fontSize: \"32px\",\r\n    textAlign: \"center\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    width: \"100%\",\r\n    position: \"absolute\",\r\n    top: tapTextHeight - inputHeight + \"px\",\r\n    left: \"0\",\r\n    paddingTop: \"25px\",\r\n    paddingBottom: \"15px\",\r\n  };\r\n\r\n  function handleChangeCompanionNameClick() {\r\n    setInputCompanionState(true);\r\n    inputCompanion.current.focus();\r\n  }\r\n\r\n  function handleChangeNameClick() {\r\n    setInputNameState(true);\r\n    inputName.current.focus();\r\n  }\r\n\r\n  function setUserName(value) {\r\n    var command = commands.createSetNameCommand(value);\r\n    ue4appInstance.getInstance().emitUICommand(command);\r\n  }\r\n\r\n  function setCompanionName(value) {\r\n    var command = commands.createSetCompanionNameCommand(value);\r\n    ue4appInstance.getInstance().emitUICommand(command);\r\n  }\r\n\r\n  return (\r\n    <Row justify=\"center\">\r\n      <Col span={16} style={{ marginBottom: \"40px\" }}>\r\n        <Row justify=\"space-between\">\r\n          <Col span={11}>\r\n            <div style={{ position: \"relative\" }}>\r\n              <div\r\n                className=\"name-input-container\"\r\n                ref={tapText}\r\n                style={{\r\n                  paddingTop: \"6px\",\r\n                  border: \"4px solid #232323\",\r\n                  borderRadius: \"48px\",\r\n                  color: \"#232323\",\r\n                  fontSize: \"24px\",\r\n                  display: \"inline-block\",\r\n                  background: \"#FFFFFF\",\r\n                  height: \"161px\",\r\n                  opacity: \"0.7\",\r\n                  textAlign: \"center\",\r\n                  fontFamily: \"Niveau Grotesk\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={\r\n                    inputCompanionState ? { textDecoration: \"underline\" } : null\r\n                  }\r\n                  onClick={handleChangeCompanionNameClick}\r\n                >\r\n                  Tap to edit companion name.\r\n                </span>\r\n              </div>\r\n              <input\r\n                className=\"name-input\"\r\n                ref={inputCompanion}\r\n                disabled={!inputCompanionState}\r\n                style={inputStyle}\r\n                onChange={(event) => {\r\n                  setCompanionName(event.target.value);\r\n                }}\r\n              ></input>\r\n            </div>\r\n          </Col>\r\n          <Col span={11}>\r\n            <div style={{ position: \"relative\" }}>\r\n              <div\r\n                className=\"name-input-container\"\r\n                ref={tapText}\r\n                style={{\r\n                  paddingTop: \"6px\",\r\n                  border: \"4px solid #232323\",\r\n                  borderRadius: \"48px\",\r\n                  color: \"#232323\",\r\n                  fontSize: \"24px\",\r\n                  display: \"inline-block\",\r\n                  background: \"#FFFFFF\",\r\n                  height: \"161px\",\r\n                  opacity: \"0.7\",\r\n                  textAlign: \"center\",\r\n                  fontFamily: \"Niveau Grotesk\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={\r\n                    inputNameState ? { textDecoration: \"underline\" } : null\r\n                  }\r\n                  onClick={handleChangeNameClick}\r\n                >\r\n                  Tap to edit name.\r\n                </span>\r\n              </div>\r\n              <input\r\n                className=\"name-input\"\r\n                ref={inputName}\r\n                disabled={!inputNameState}\r\n                style={inputStyle}\r\n                onChange={(event) => {\r\n                  setUserName(event.target.value);\r\n                }}\r\n              ></input>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useEffect, useState } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Row, Col, Layout } from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport DesktopFooterColors from \"./Color/DesktopFooterColors\";\r\n\r\nimport close from \"../../../assets/images/close_btn_customization.svg\";\r\nimport face from \"../../../assets/images/face_big.svg\";\r\nimport back from \"../../../assets/images/backpack_btn.svg\";\r\nimport leftHand from \"../../../assets/images/left_hand_big.svg\";\r\n\r\nimport rightHand from \"../../../assets/images/right_hand_big.svg\";\r\n\r\nimport companion from \"../../../assets/images/companion_big.svg\";\r\nimport colorPicker from \"../../../assets/images/color_btn_big.svg\";\r\n\r\nimport CustomizationSlider from \"./Slider/DesktopCustomizationSlider\";\r\nimport DesktopCustomizationButton from \"./DesktopCustomizationButton\";\r\n\r\nimport DesktopName from \"./Name/DesktopName\";\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport commands from \"../../../services/commands\";\r\n\r\nimport {\r\n  setRingColor as setReduxRingColor,\r\n  setPrimaryColor as setReduxPrimaryColor,\r\n  setSecondaryColor as setReduxSecondaryColor,\r\n} from \"../../../redux/customizationSlice\";\r\nimport ue4appInstance from \"../../../ue4appInstanse\";\r\n\r\nconst { Header, Footer, Sider, Content } = Layout;\r\nexport default function DesktopCustomization({\r\n  onCustomization,\r\n  onExitCustomizationClick,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const customization = useSelector((state) => state.customization);\r\n  const screens = useBreakpoint();\r\n  useEffect(() => {\r\n    console.debug(screens);\r\n  }, [screens]);\r\n  //default colors (before user's changes)\r\n  const [defaultRingColor, setDefaultRingColor] = useState(null);\r\n  const [defaultPrimaryColor, setDefaultPrimaryColor] = useState(null);\r\n  const [defaultSecondaryColor, setDefaultSecondaryColor] = useState(null);\r\n\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n  const [colorToRectangles, setColorToRectangles] = useState(null);\r\n  const history = useHistory();\r\n  const [sliderType, setSliderType] = useState(\"face\");\r\n  const [colorsSelect, setColorsSelect] = useState(null);\r\n  const [colorPickerState, setColorPickerState] = useState(false);\r\n  const [isPrimary, setPrimary] = useState(null);\r\n  const [primaryColor, setPrimaryColor] = useState(\"red\");\r\n  const [isSecondary, setSecondary] = useState(null);\r\n  const [secondaryColor, setSecondaryColor] = useState(\"yellow\");\r\n  const [isRing, setRing] = useState(null);\r\n  const [ringColor, setRingColor] = useState(\"green\");\r\n  const [nameChange, setNameChange] = useState(false);\r\n  const [style, setStyle] = useState({ zIndex: \"1000\" });\r\n  const [colorPickerType, setColorPickerType] = useState();\r\n\r\n  function handleLeftHandClick() {\r\n    setSliderType(\"left\");\r\n    setColorsSelect(false);\r\n    setColorPickerState(false);\r\n    setNameChange(false);\r\n  }\r\n  function handleRightHandClick() {\r\n    setSliderType(\"right\");\r\n    setColorsSelect(false);\r\n    setNameChange(false);\r\n    setColorPickerState(false);\r\n  }\r\n  function handleColorSelectClick() {\r\n    setSliderType(null);\r\n    setColorsSelect(true);\r\n    setNameChange(false);\r\n  }\r\n\r\n  function getColorChange(type) {\r\n    if (type === \"ring\") {\r\n      setRing(true);\r\n      setPrimary(false);\r\n      setSecondary(false);\r\n    }\r\n    if (type === \"primary\") {\r\n      setPrimary(true);\r\n      setSecondary(false);\r\n      setRing(false);\r\n    }\r\n    if (type === \"secondary\") {\r\n      setSecondary(true);\r\n      setPrimary(false);\r\n      setRing(false);\r\n    }\r\n  }\r\n\r\n  function generateColorPicker(type, color) {\r\n    setColorPickerType(type);\r\n    setColorPickerState(true);\r\n    setColor(color);\r\n  }\r\n  function hideColorPicker() {\r\n    setColorPickerState(false);\r\n  }\r\n\r\n  function handleNameClick() {\r\n    setNameChange(true);\r\n    setSliderType(null);\r\n    setColorsSelect(null);\r\n  }\r\n\r\n  function handleFaceClick() {\r\n    setSliderType(\"face\");\r\n    setNameChange(false);\r\n    setColorsSelect(false);\r\n  }\r\n\r\n  function handleCompanionClick() {\r\n    setSliderType(\"companion\");\r\n    setNameChange(false);\r\n    setColorsSelect(false);\r\n  }\r\n\r\n  function handleBackClick() {\r\n    setSliderType(\"back\");\r\n    setNameChange(false);\r\n    setColorsSelect(false);\r\n  }\r\n\r\n  function exitCustomization() {\r\n    const command = commands.createConnectToGameServerCommand();\r\n\r\n    ue4appInstance.getInstance().emitUICommand(command);\r\n\r\n    history.push(\"/app/index\");\r\n  }\r\n\r\n  function cancelCustomization() {\r\n    dispatch(setReduxRingColor(defaultRingColor));\r\n    dispatch(setReduxPrimaryColor(defaultPrimaryColor));\r\n    dispatch(setReduxSecondaryColor(defaultSecondaryColor));\r\n    history.push(\"/app/index\");\r\n  }\r\n\r\n  function handleColorChange(someColor) {\r\n    setColor(someColor);\r\n    if (colorPickerType === \"ring\") {\r\n      dispatch(setReduxRingColor(someColor));\r\n      setRingColor(someColor);\r\n    }\r\n    if (colorPickerType === \"primary\") {\r\n      dispatch(setReduxPrimaryColor(someColor));\r\n      setPrimaryColor(someColor);\r\n    }\r\n    if (colorPickerType === \"secondary\") {\r\n      dispatch(setReduxSecondaryColor(someColor));\r\n      setSecondaryColor(someColor);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setColorToRectangles(color);\r\n  }, [color]);\r\n\r\n  useEffect(() => {\r\n    setDefaultRingColor(customization.ringColor);\r\n    setDefaultPrimaryColor(customization.primaryColor);\r\n    setDefaultSecondaryColor(customization.secondaryColor);\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        height: \"100vh\",\r\n        padding: 0,\r\n        backgroundColor: \"rgba(0,0,0,0)\",\r\n        pointerEvents: \"auto\",\r\n      }}\r\n    >\r\n      <Header style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"16px\" }}>\r\n            <Row\r\n              justify=\"center\"\r\n              align=\"middle\"\r\n              style={{ position: \"relative\" }}\r\n            >\r\n              <Col style={{ margin: \"0 6px\" }}>\r\n                <div onClick={handleFaceClick}>\r\n                  <DesktopCustomizationButton\r\n                    isToogled={sliderType === \"face\"}\r\n                    img={face}\r\n                    color={\"#451CFF\"}\r\n                  ></DesktopCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 6px\" }}>\r\n                <div onClick={handleBackClick}>\r\n                  <DesktopCustomizationButton\r\n                    isToogled={sliderType === \"back\"}\r\n                    img={back}\r\n                    color={\"#451CFF\"}\r\n                  ></DesktopCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 6px\" }}>\r\n                <div onClick={handleLeftHandClick}>\r\n                  <DesktopCustomizationButton\r\n                    isToogled={sliderType === \"left\"}\r\n                    type=\"lefthand\"\r\n                    img={leftHand}\r\n                    color={\"#451CFF\"}\r\n                  ></DesktopCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 6px\" }}>\r\n                <div onClick={handleRightHandClick}>\r\n                  <DesktopCustomizationButton\r\n                    isToogled={sliderType === \"right\"}\r\n                    type=\"righthand\"\r\n                    img={rightHand}\r\n                    color={\"#451CFF\"}\r\n                  ></DesktopCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 6px\" }}>\r\n                <div onClick={handleCompanionClick}>\r\n                  <DesktopCustomizationButton\r\n                    isToogled={sliderType === \"companion\"}\r\n                    img={companion}\r\n                    color={\"#451CFF\"}\r\n                  ></DesktopCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 6px\" }}>\r\n                <div onClick={handleColorSelectClick}>\r\n                  <DesktopCustomizationButton\r\n                    isToogled={colorsSelect}\r\n                    isColor={true}\r\n                    img={colorPicker}\r\n                    color={\"#17F7CD\"}\r\n                    style={{ borderRadius: \"25px\" }}\r\n                  ></DesktopCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col xl={2} lg={2} span={1} style={{ margin: \"0 4px\" }}>\r\n                <div\r\n                  className=\"text-button\"\r\n                  id=\"name-button\"\r\n                  onClick={handleNameClick}\r\n                  style={{\r\n                    padding: \"5px\",\r\n                    lineHeight: \"2.9\",\r\n                    background: nameChange ? \"#451CFF\" : \"#232323\",\r\n                    boxShadow: \"none\",\r\n                    fontSize: \"18px\",\r\n                    width: \"80%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"10px\",\r\n                  }}\r\n                >\r\n                  NAME\r\n                </div>\r\n              </Col>\r\n              <Col\r\n                style={{\r\n                  position: \"absolute\",\r\n                  top: \"0\",\r\n                  right: \"16px\",\r\n                  textAlign: \"end\",\r\n                }}\r\n              >\r\n                <div onClick={exitCustomization}>\r\n                  <ReactSVG src={close}></ReactSVG>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Header>\r\n      <Content>\r\n        <Row justify=\"center\" align=\"middle\" style={{ height: \"100vh\" }}>\r\n          <Col xl={18} span={13} style={{ marginBottom: \"50px\" }}>\r\n            <Row>\r\n              {colorPickerState ? (\r\n                <Col className=\"center\" style={style}>\r\n                  <div\r\n                    className=\"center\"\r\n                    style={{\r\n                      margin: \"0 auto\",\r\n                      paddingBottom: \"-50%\",\r\n                    }}\r\n                  >\r\n                    <HexColorPicker\r\n                      color={color}\r\n                      onChange={handleColorChange}\r\n                    />\r\n                    ;\r\n                  </div>\r\n                </Col>\r\n              ) : null}\r\n            </Row>\r\n            <Row justify=\"end\">\r\n              <Col span={6} style={{ color: \"white\", marginBottom: \"25px\" }}>\r\n                {!colorPickerState ? (\r\n                  <Row>\r\n                    <Col span={24}>\r\n                      <Row justify={\"center\"} align={\"center\"}>\r\n                        <div\r\n                          onClick={exitCustomization}\r\n                          className=\"text-buttonFinish\"\r\n                          id=\"main-button\"\r\n                          style={{\r\n                            backgroundColor: \"#232323\",\r\n                            height: \"86px\",\r\n                            width: \"234px\",\r\n                            textAlign: \"center\",\r\n                            lineHeight: \"72px\",\r\n                            fontSize: \"40px\",\r\n                          }}\r\n                        >\r\n                          FINISH\r\n                        </div>\r\n                      </Row>\r\n                    </Col>\r\n                    <Col span={24}>\r\n                      <Row justify={\"center\"} align={\"center\"}>\r\n                        <div\r\n                          onClick={cancelCustomization}\r\n                          className=\"text-button\"\r\n                          id=\"main-button\"\r\n                          style={{\r\n                            backgroundColor: \"#909090\",\r\n                            height: \"86px\",\r\n                            marginTop: \"24px\",\r\n                            width: \"234px\",\r\n                            textAlign: \"center\",\r\n                            lineHeight: \"72px\",\r\n                            fontSize: \"40px\",\r\n                          }}\r\n                        >\r\n                          CANCEL\r\n                        </div>\r\n                      </Row>\r\n                    </Col>\r\n                  </Row>\r\n                ) : null}\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Content>\r\n      <Footer style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n        <Row justify=\"center\">\r\n          <Col span={24}>\r\n            {/* SLIDER (HANDS OR FACE) CUSTOMIZATION */}\r\n\r\n            {sliderType === \"left\" ? (\r\n              <CustomizationSlider\r\n                socket={commands.addonsSockets.leftHand}\r\n                type=\"left\"\r\n              ></CustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"back\" ? (\r\n              <CustomizationSlider\r\n                socket={commands.addonsSockets.back}\r\n                type=\"back\"\r\n              ></CustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"right\" ? (\r\n              <CustomizationSlider\r\n                socket={commands.addonsSockets.rightHand}\r\n                type=\"right\"\r\n              ></CustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"face\" ? (\r\n              <CustomizationSlider\r\n                socket={commands.addonsSockets.head}\r\n                type=\"face\"\r\n              ></CustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"companion\" ? (\r\n              <CustomizationSlider\r\n                socket={commands.addonsSockets.companion}\r\n                type=\"companion\"\r\n              ></CustomizationSlider>\r\n            ) : null}\r\n\r\n            {/* COLORS CUSTOMIZATION */}\r\n\r\n            {colorsSelect ? (\r\n              <DesktopFooterColors\r\n                pickerColor={colorToRectangles}\r\n                ringColor={ringColor}\r\n                setRing={setRingColor}\r\n                primaryColor={primaryColor}\r\n                setPrimary={setPrimaryColor}\r\n                secondaryColor={secondaryColor}\r\n                setSecondary={setSecondaryColor}\r\n                gen={generateColorPicker}\r\n                hide={hideColorPicker}\r\n                getColorChange={getColorChange}\r\n              ></DesktopFooterColors>\r\n            ) : null}\r\n\r\n            {/* NAME CUSTOMIZATION */}\r\n\r\n            {nameChange ? <DesktopName></DesktopName> : null}\r\n          </Col>\r\n        </Row>\r\n      </Footer>\r\n    </Layout>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Table } from \"antd\";\r\nimport teleport from \"../../../assets/images/ufo.svg\";\r\nimport message from \"../../../assets/images/message.svg\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  Switch,\r\n  Route,\r\n  useHistory,\r\n  useRouteMatch,\r\n  Link,\r\n} from \"react-router-dom\";\r\nimport accountHttpService from \"../../../services/account\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport MenuButton from \"../MenuButton/MenuButton\";\r\nexport default function MessagesTable({ isMobile }) {\r\n  const history = useHistory();\r\n  const [isChatOpen, setIsChatOpen] = useState(false);\r\n  const account = useSelector((state) => state.account);\r\n  const [friendsList, setFriendsList] = useState([]);\r\n  const [loaderState, setLoaderState] = useState(true);\r\n\r\n  useEffect(() => {\r\n    accountHttpService\r\n      .getFriendsList(account.token)\r\n      .then((response) => {\r\n        const list = response;\r\n        console.log(list);\r\n        setFriendsList(list.data[0].friendsList);\r\n        setLoaderState(true);\r\n        setTimeout(setLoader, 300);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, []);\r\n\r\n  function setLoader() {\r\n    setLoaderState(false);\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Username\",\r\n      dataIndex: \"name\",\r\n      width: \"30%\",\r\n      key: \"name\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row\r\n            onClick={() => {\r\n              history.push(\"/app/index/chat\", {\r\n                fromMessages: true,\r\n                id: record._id,\r\n                nick: record.userId.firstName\r\n                  ? record.userId.firstName\r\n                  : record.userId.email,\r\n              });\r\n            }}\r\n            style={{ width: \"100%\" }}\r\n          >\r\n            <Col>\r\n              <Row>\r\n                <Col\r\n                  style={{\r\n                    textOverflow: \"ellipsis\",\r\n                    maxWidth: \"100%\",\r\n                    whiteSpace: \"nowrap\",\r\n                    overflow: \"hidden\",\r\n                  }}\r\n                >\r\n                  <span\r\n                    style={{\r\n                      fontFamily: \"Niveau Grotesk Bold\",\r\n                      fontSize: 20,\r\n                    }}\r\n                  >\r\n                    {record.hasOwnProperty(\"userId\")\r\n                      ? record.userId.firstName\r\n                        ? record.userId.firstName\r\n                        : record?.userId?.email\r\n                      : \"fdsjkfsjh\"}\r\n                  </span>\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n\r\n    {\r\n      title: \"Block\",\r\n      dataIndex: \"address\",\r\n      width: \"30%\",\r\n\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col>\r\n              <MenuButton img={message} />\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Teleport to\",\r\n      dataIndex: \"address\",\r\n      width: \"25%\",\r\n      //align: \"center\",\r\n      key: \"address\",\r\n      render: (text, record, index) => {\r\n        return (\r\n          <Row>\r\n            <Col>\r\n              <MenuButton img={teleport} />\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Table\r\n      pagination={false}\r\n      className={\"friendsTable\"}\r\n      rowClassName={\"\"}\r\n      style={{ width: \"100%\", height: isMobile ? \"77vh\" : \"600px\" }}\r\n      dataSource={friendsList}\r\n      columns={columns}\r\n      onRow={(data, index) => {\r\n        return {\r\n         /* onClick: (event) => {\r\n            if (event.target.className === \"ant-row\") {\r\n              history.push(\"/app/index/chat\", {\r\n                nick: data.userId.firstName\r\n                  ? data.userId.firstName\r\n                  : data.userId.email,\r\n              });\r\n            }\r\n          }, */\r\n        };\r\n      }}\r\n      loading={loaderState}\r\n    />\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/MassagesWithoutBackground.212b6833.svg\";","import { React } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n  List,\r\n} from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport MassagesWithoutBackground from \"../../assets/images/MassagesWithoutBackground.svg\";\r\nimport CloseButton from \"../../assets/images/close_btn (Hover State).svg\";\r\nexport default function DesktopheaderMessages({ onExitMassagesClick }) {\r\n  \r\n  const Messages = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    color: \"#ffff\",\r\n    fontSize: \"18px\",\r\n  };\r\n  \r\n  return (\r\n    <Row>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col span={24}>\r\n            <Row style={{ marginTop: 5 }} align={\"middle\"}>\r\n              <Col span={3} style={{ marginLeft: 15 }}>\r\n                <ReactSVG src={MassagesWithoutBackground}></ReactSVG>\r\n              </Col>\r\n              <Col style={{ marginBottom: 5 }} span={17}>\r\n                <span style={Messages}>MESSAGES</span>\r\n              </Col>\r\n              <Col span={1} onClick={onExitMassagesClick}>\r\n                <div className=\"backgroundForSVG\" style={{marginBottom:7, marginTop: 3}}>\r\n                  <ReactSVG src={CloseButton}></ReactSVG>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport MessagesTable from \"../../components/shared/MessagesTable/MessagesTable\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n  List,\r\n} from \"antd\";\r\nimport DesktopheaderMessages from \"./DesktopHeaderMassages\";\r\nimport { Link } from \"react-router-dom\";\r\nexport default function DesktopMessages({\r\n  onMassagesClick,\r\n  onExitMassagesClick,\r\n}) {\r\n  const text = {\r\n    color: \"#ffff\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const GlobalChat = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"20px\",\r\n  };\r\n  const ChatButton = {\r\n    background: \"#393939\",\r\n    padding: \"20px 20px\",\r\n  };\r\n  return (\r\n    <Row style={{ pointerEvents: \"auto\" }}>\r\n      <div\r\n        style={{\r\n          background: \"gray\",\r\n          opacity: \"0.5\",\r\n          width: \"100%\",\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          bottom: 0,\r\n          right: 0,\r\n        }}\r\n      ></div>\r\n      <Col span={24}>\r\n        <Row justify={\"end\"}>\r\n          <Col>\r\n            <Row\r\n              style={{\r\n                background: \"#282828\",\r\n                width: 400,\r\n                borderRadius: \"10px\",\r\n              }}\r\n            >\r\n              <Col span={24}>\r\n                <Row>\r\n                  <Col span={24}>\r\n                    <DesktopheaderMessages\r\n                      onExitMassagesClick={onExitMassagesClick}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n                {/* <div className=\"pointer\">\r\n                  <Link to={\"/app/index/global-chat\"}>\r\n                    <Row style={ChatButton}>\r\n                      <Col span={24}>\r\n                        <span style={GlobalChat}>Global Chat</span>\r\n                      </Col>\r\n                    </Row>\r\n                  </Link>\r\n                </div> */}\r\n                <Row>\r\n                  <Col span={24}>\r\n                    <MessagesTable />\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/arrow_left.19ba42df.svg\";","import { React } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport arrowLeft from \"../../../assets/images/arrow_left.svg\";\r\nimport close from \"../../../assets/images/close_btn (Hover State).svg\";\r\n\r\nimport {\r\n  Switch,\r\n  Route,\r\n  useHistory,\r\n  useRouteMatch,\r\n  Link,\r\n} from \"react-router-dom\";\r\n\r\nexport default function HeaderOfChat(props) {\r\n  const NickName = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const backToMessages = props.backToMessages;\r\n  let pathToFriends = \"/app/index/friends\";\r\n  let pathToMessages = \"/app/index/messages\";\r\n\r\n  return (\r\n    <Row>\r\n      <Col\r\n        span={24}\r\n        style={{ padding: 10, height: 59, borderBottom: \"1px solid #393939\" }}\r\n      >\r\n        <Row style={{ marginLeft: 10 }}>\r\n          <Col span={3} style={{ marginTop: 10 }} className=\"opacity\">\r\n            <Link to={backToMessages ? pathToMessages : pathToFriends}>\r\n              <div>\r\n                <ReactSVG src={arrowLeft}></ReactSVG>\r\n              </div>\r\n            </Link>\r\n          </Col>\r\n          <Col span={18} style={{ marginTop: 7 }}>\r\n            <span style={NickName}>{props.userNickName}</span>\r\n          </Col>\r\n          <Col span={1} onClick={props.onExitChat}>\r\n            <div className=\"backgroundForSVG\">\r\n              <ReactSVG src={close}></ReactSVG>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function ChatMessages(props) {\r\n  let testMessages = props.testMessages;\r\n  const [Messages, setMessages] = useState(testMessages);\r\n  function renderMessage(message) {\r\n    const { text, usernameFrom, usernameMe } = message;\r\n\r\n    const MessageFromME = usernameFrom === usernameMe;\r\n\r\n    const className = MessageFromME\r\n      ? \"Messages-message currentMember\"\r\n      : \"Messages-message\";\r\n\r\n    const classNameMessage = MessageFromME ? \"text currentMember\" : \"text\";\r\n\r\n    return (\r\n      <li className={className}>\r\n        <div className=\"Message-content\">\r\n          <div className=\"username\">{usernameFrom}</div>\r\n          <div className={classNameMessage}>{text}</div>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Row style={{ paddingLeft: 10, paddingRight: 20 }}>\r\n      <Col span={24}>\r\n        <ul className=\"Messages-list\">\r\n          {testMessages.map((m) => renderMessage(m))}\r\n        </ul>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/send_btn.107b4feb.svg\";","import { React } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport HeaderOfChat from \"./HeaderOfChat\";\r\nimport { useLocation, Redirect } from \"react-router-dom\";\r\nimport ChatMessages from \"./ChatMessages\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport send from \"../../../assets/images/send_btn.svg\";\r\n\r\nexport default function DesktopChat(props) {\r\n  const onExitChat = props.onExitChat;\r\n  const location = useLocation();\r\n  const interlocutorId = location.state.id;\r\n  const userNickName = location.state.nick;\r\n  const fromMessages = location.state.fromMessages;\r\n\r\n  const [text, setText] = useState(\"\");\r\n  const [testMessages, setTestMessages] = useState([\r\n    {\r\n      text: \"This is a test message!\",\r\n      usernameFrom: \"userNotME\",\r\n      usernameMe: \"userMe\",\r\n    },\r\n    {\r\n      text: \"This is a test message!\",\r\n      usernameFrom: \"userMe\",\r\n      usernameMe: \"userMe\",\r\n    },\r\n  ]);\r\n\r\n  function ChangeText(e) {\r\n    setText(e.target.value);\r\n  }\r\n  function ClickSend() {\r\n    if (text === \"\") {\r\n      return;\r\n    }\r\n\r\n    let id = location.state.id;\r\n\r\n    /*chatService\r\n      .sendMessage(id, \"Hello world\")\r\n      .then((result) => {\r\n        console.debug(result);\r\n      })\r\n      .catch((error) => {\r\n        console.debug(error);\r\n      });\r\n\r\n    setTestMessages(\r\n      testMessages.concat({\r\n        text: text,\r\n        usernameMe: \"userMe\",\r\n        usernameFrom: \"userMe\",\r\n      })\r\n    );*/\r\n\r\n    setText(\"\");\r\n  }\r\n  return (\r\n    <Row style={{ pointerEvents: \"auto\" }}>\r\n      <div\r\n        style={{\r\n          background: \"gray\",\r\n          opacity: \"0.5\",\r\n          width: \"100%\",\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          bottom: 0,\r\n          right: 0,\r\n        }}\r\n      ></div>\r\n      <Col span={24}>\r\n        <Row justify={\"end\"} style={{ height: \"30vh\" }}>\r\n          <Col>\r\n            <Row\r\n              style={{\r\n                background: \"#282828\",\r\n                width: 400,\r\n                borderRadius: \"10px\",\r\n              }}\r\n            >\r\n              <Col span={24}>\r\n                <Row>\r\n                  <Col span={24}>\r\n                    <HeaderOfChat\r\n                      userNickName={userNickName}\r\n                      backToMessages={fromMessages}\r\n                      onExitChat={onExitChat}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n                <Row\r\n                  style={{\r\n                    overflowY: \"scroll\",\r\n                    height: \"60vh\",\r\n                    background: \"#191919\",\r\n                  }}\r\n                >\r\n                  <Col span={24}>\r\n                    <ChatMessages testMessages={testMessages} />\r\n                  </Col>\r\n                </Row>\r\n                <Row style={{ marginTop: 10 }}>\r\n                  <Col span={24}>\r\n                    <Row style={{ marginLeft: 10, marginRight: 10 }}>\r\n                      <input\r\n                        style={{ marginRight: 10 }}\r\n                        className=\"auth-input\"\r\n                        value={text}\r\n                        placeholder=\"Type here...\"\r\n                        onChange={(e) => ChangeText(e)}\r\n                      ></input>\r\n                      <div className=\"opacity\">\r\n                        <ReactSVG src={send} onClick={ClickSend}></ReactSVG>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/spin-transparent.98390c51.svg\";","import { React } from \"react\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport DesktopPage from \"../utils/Page/DesktopPage\";\r\nimport DesktopFriendsPanel from \"../shared/FriendsPanel/DesktopFriendsPanel\";\r\nimport DesktopSettingPanel from \"../shared/SettingPanel/DesktopSettingPanel\";\r\n\r\nimport DesktopCustomization from \"../../views/Customization/Desktop/DesktopCustomization\";\r\nimport DesktopMessages from \"../../views/DesktopMessages/DesktopMessages\";\r\nimport DesktopChat from \"../shared/Chat/DesktopChat\";\r\nimport { OmitProps } from \"antd/lib/transfer/ListBody\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport GlobalChat from \"../shared/GlobalChat/GlobalChat\";\r\nimport loader from \"../../assets/images/spin-transparent.svg\";\r\n\r\nexport default function DesktopPageLayout({\r\n  onFriendsClick,\r\n  onExitFriendsClick,\r\n  onCustomizationClick,\r\n  onExitCustomizationClick,\r\n  onMassagesClick,\r\n  onExitMassagesClick,\r\n  onExitChat,\r\n  backToMessages,\r\n  isLoading,\r\n  setLoading,\r\n}) {\r\n  return (\r\n    <div>\r\n      <DesktopPage />\r\n      <Switch>\r\n        <Route exact path={`/app/index/friends`}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              background: \"gray\",\r\n              opacity: \"0.5\",\r\n            }}\r\n          ></div>\r\n          <div\r\n            style={{ position: \"fixed\", top: 0, bottom: 0, left: 0, right: 0 }}\r\n          >\r\n            <DesktopFriendsPanel\r\n              isLoading={isLoading}\r\n              onExitFriendsClick={onExitFriendsClick}\r\n              onFriendsClick={onFriendsClick}\r\n              setLoading={setLoading}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/index/settings`}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              background: \"gray\",\r\n              opacity: \"0.5\",\r\n            }}\r\n          ></div>\r\n          <div\r\n            style={{ position: \"fixed\", top: 0, bottom: 0, left: 0, right: 0 }}\r\n          >\r\n            <DesktopSettingPanel />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/index/messages`}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              padding: 5,\r\n              minWidth: \"50%\",\r\n            }}\r\n          >\r\n            <DesktopMessages\r\n              onMassagesClick={onMassagesClick}\r\n              onExitMassagesClick={onExitMassagesClick}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/customization`}>\r\n          <div>\r\n            <DesktopCustomization\r\n              onExitCustomizationClick={onExitCustomizationClick}\r\n              onCustomizationClick={onCustomizationClick}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/index/chat`}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              background: \"gray\",\r\n              opacity: \"0.5\",\r\n            }}\r\n          ></div>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              padding: 5,\r\n            }}\r\n          >\r\n            <DesktopChat\r\n              onExitChat={onExitChat}\r\n              backToMessages={backToMessages}\r\n            />\r\n          </div>\r\n        </Route>\r\n        {/* <Route exact path={`/app/index/global-chat`}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              background: \"gray\",\r\n              opacity: \"0.5\",\r\n            }}\r\n          ></div>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              padding: 5,\r\n            }}\r\n          >\r\n            <GlobalChat\r\n              backToMessages={backToMessages}\r\n              onExitChat={onExitChat}\r\n            />\r\n          </div>\r\n        </Route> */}\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport FriendsTable from \"./FriendsTable\";\r\nimport FriendNavigationPanel from \"./FriendNavigationPanel\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function MobileFriendsPanel({ onExitFriendsClick }) {\r\n  const report = useSelector((state) => state.report);\r\n  const [isHide, setIsHide] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (report.isReportOpen) {\r\n      setIsHide(true);\r\n      if (report.isReportSubmited) {\r\n        setIsHide(false);\r\n      }\r\n    } else {\r\n      setIsHide(false);\r\n    }\r\n  }, [report]);\r\n\r\n  return (\r\n    <Row\r\n      align={\"center\"}\r\n      justify={\"center\"}\r\n      style={{\r\n        height: \"100%\",\r\n        backgroundColor: \"gray\",\r\n        pointerEvents: \"auto\",\r\n      }}\r\n    >\r\n      <Col span={24}>\r\n        <Row\r\n          justify={\"center\"}\r\n          style={{ alignContent: \"center\", height: \"100%\" }}\r\n        >\r\n          <Card\r\n            style={{\r\n              width: isHide ? 0 : \"97vw\",\r\n              boxShadow: \"2px\",\r\n\r\n              border: 0,\r\n              backgroundColor: \"#282828\",\r\n              borderRadius: 10,\r\n              color: \"white\",\r\n            }}\r\n            id=\"mobile-fix-friends\"\r\n          >\r\n            {/* Header */}\r\n            <Row>\r\n              <Col span={24}>\r\n                <FriendNavigationPanel\r\n                  onExitFriendsClick={onExitFriendsClick}\r\n                />\r\n                <Row style={{ overflowY: \"scroll\" }}>\r\n                  <Col span={24}>\r\n                    <FriendsTable />\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport MassagesWithoutBackground from \"../../assets/images/MassagesWithoutBackground.svg\";\r\nimport CloseButton from \"../../assets/images/close_btn (Hover State).svg\";\r\n\r\nexport default function MobileUsersForMessages({\r\n  onMassagesClick,\r\n  onExitMassagesClick,\r\n}) {\r\n  const { useBreakpoint } = Grid;\r\n  const screens = useBreakpoint();\r\n  console.log(screens);\r\n  const Messages = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    color: \"#ffff\",\r\n    fontSize: \"19px\",\r\n  };\r\n  return (\r\n    <Row>\r\n      <Col xs={24} sm={24} md={24} lg={24}>\r\n        <Row>\r\n          <Col\r\n            xs={2}\r\n            sm={2}\r\n            md={2}\r\n            lg={2}\r\n            style={{ marginLeft: 20, marginTop: 10 }}\r\n          >\r\n            <ReactSVG src={MassagesWithoutBackground}></ReactSVG>\r\n          </Col>\r\n          <Col xs={19} sm={19} md={19} lg={20} style={{ marginTop: 15 }}>\r\n            <span style={Messages}>MESSAGES</span>\r\n          </Col>\r\n          <Col\r\n            xs={1}\r\n            sm={1}\r\n            md={1}\r\n            lg={1}\r\n            style={{ marginTop: 9 }}\r\n            onClick={onExitMassagesClick}\r\n          >\r\n            <div className=\"backgroundForSVG\">\r\n              <ReactSVG src={CloseButton}></ReactSVG>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n  List,\r\n} from \"antd\";\r\nimport MobileHeaderMessages from \"./MobileHeaderMessages\";\r\nimport MessagesTable from \"../../components/shared/MessagesTable/MessagesTable\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function MobileMassages({\r\n  onMassagesClick,\r\n  onExitMassagesClick,\r\n}) {\r\n  const background = {\r\n    background: \"#404040\",\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    pointerEvents: \"auto\",\r\n  };\r\n  const Panel = {\r\n    background: \"#282828\",\r\n    width: \"98%\",\r\n    height: \"96vh\",\r\n    marginLeft: \"1%\",\r\n    marginTop: \"1%\",\r\n    borderRadius: \"15px\",\r\n    overflowY: \"hide\",\r\n  };\r\n  const text = {\r\n    color: \"#ffff\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const GlobalChat = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"20px\",\r\n  };\r\n  const ChatButton = {\r\n    background: \"#393939\",\r\n    padding: \"20px 20px\",\r\n  };\r\n  return (\r\n    <Row style={background} >\r\n      <Col xs={24} sm={24} lg={24} >\r\n        <Row style={Panel} id=\"mobile-fix-messages-panel\">\r\n          <Col xs={24} sm={24} md={24} lg={24}>\r\n            <Row>\r\n              <Col xs={24} sm={24} md={24} lg={24}>\r\n                <MobileHeaderMessages\r\n                  onExitMassagesClick={onExitMassagesClick}\r\n                  onMassagesClick={onMassagesClick}\r\n                />\r\n              </Col>\r\n            </Row>\r\n            {/* <div className=\"pointer\">\r\n              <Link to={\"/app/index/global-chat\"}>\r\n                <Row style={ChatButton}>\r\n                  <Col xs={24} sm={24} md={24} lg={24}>\r\n                    <span style={GlobalChat}>Global Chat</span>\r\n                  </Col>\r\n                </Row>\r\n              </Link>\r\n            </div> */}\r\n            <Row style={{ overflowY: \"auto\" }}>\r\n              <Col span={24}>\r\n                <MessagesTable />\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/close_btn.9f0b736b.svg\";","import { React, useEffect, useState } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\n\r\nimport ue4appInstance from \"../../../../ue4appInstanse\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nimport {\r\n  setRingColor as setReduxRingColor,\r\n  setPrimaryColor as setReduxPrimaryColor,\r\n  setSecondaryColor as setReduxSecondaryColor,\r\n} from \"../../../../redux/customizationSlice\";\r\n\r\nimport commandsService from \"../../../../services/commands\";\r\n\r\nexport default function MobileColorChange(props) {\r\n  const dispatch = useDispatch();\r\n  const customization = useSelector((state) => state.customization);\r\n  //default colors (before user's changes)\r\n  const [defaultRingColor, setDefaultRingColor] = useState(null);\r\n  const [defaultPrimaryColor, setDefaultPrimaryColor] = useState(null);\r\n  const [defaultSecondaryColor, setDefaultSecondaryColor] = useState(null);\r\n  useEffect(() => {\r\n    props.gen(props.type);\r\n    if (props.type === \"ring\") {\r\n      props.gen(props.type, customization.ringColor);\r\n    }\r\n    if (props.type === \"primary\") {\r\n      props.gen(props.type, customization.primaryColor);\r\n    }\r\n    if (props.type === \"secondary\") {\r\n      props.gen(props.type, customization.secondaryColor);\r\n    }\r\n  });\r\n  useEffect(() => {\r\n    setDefaultRingColor(customization.ringColor);\r\n    setDefaultPrimaryColor(customization.primaryColor);\r\n    setDefaultSecondaryColor(customization.secondaryColor);\r\n  }, []);\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n\r\n  function handleConfirm() {\r\n    props.setColor(props.pickerColor);\r\n    props.setColorInFooter(props.pickerColor);\r\n\r\n    dispatch(setReduxRingColor(customization.ringColor));\r\n    dispatch(setReduxPrimaryColor(customization.primaryColor));\r\n    dispatch(setReduxSecondaryColor(customization.secondaryColor));\r\n\r\n    const setColorCommand = commandsService.createSetColorCommand(\r\n      props.socket,\r\n      props.pickerColor\r\n    );\r\n\r\n    ue4appInstance.getInstance().emitUICommand(setColorCommand);\r\n\r\n    props.cancel();\r\n  }\r\n\r\n  function handleCancel() {\r\n    dispatch(setReduxRingColor(defaultRingColor));\r\n    dispatch(setReduxPrimaryColor(defaultPrimaryColor));\r\n    dispatch(setReduxSecondaryColor(defaultSecondaryColor));\r\n\r\n    props.cancel();\r\n  }\r\n\r\n  return (\r\n    <Row justify=\"center\" align=\"middle\">\r\n      <Col span={18} style={{ marginBottom: \"25px\" }}>\r\n        <Row justify=\"center\" align=\"middle\">\r\n          <Col span={6} style={{ textAlign: \"center\", margin: \"0 18.5px\" }}>\r\n            <button\r\n              className=\"text-button\"\r\n              onClick={handleConfirm}\r\n              style={{\r\n                fontSize: \"21px\",\r\n                backgroundColor: \"#4f4f4f\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              CONFIRM\r\n            </button>\r\n          </Col>\r\n          <Col span={5} style={{ margin: \"0 18.5px\" }}>\r\n            <Row>\r\n              <Col span={24} style={{ textAlign: \"center\" }}>\r\n                <div\r\n                  className=\"color-rectangle-mobile\"\r\n                  style={{\r\n                    backgroundColor:\r\n                      props.type === \"ring\"\r\n                        ? customization.ringColor\r\n                        : props.type === \"primary\"\r\n                        ? customization.primaryColor\r\n                        : customization.secondaryColor,\r\n                  }}\r\n                ></div>\r\n              </Col>\r\n              <Col\r\n                className=\"customization-header-text\"\r\n                span={24}\r\n                style={{\r\n                  marginTop: \"12px\",\r\n                  fontSize: \"12px\",\r\n                  textTransform: \"uppercase\",\r\n                }}\r\n              >\r\n                {props.type} COLOR\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col span={6} style={{ textAlign: \"center\", margin: \"0 18.5px\" }}>\r\n            <button\r\n              className=\"text-button\"\r\n              onClick={handleCancel}\r\n              style={{\r\n                fontSize: \"21px\",\r\n                backgroundColor: \"#909090\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              CANCEL\r\n            </button>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useState } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nexport default function DesktopColorRectangle(props) {\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n  const style = {\r\n    display: \"inline-block\",\r\n    width: \"60px\",\r\n    height: \"60px\",\r\n    boxShadow: \"0px 2px 0px #040206\",\r\n    border: \"2px solid #232323\",\r\n    borderRadius: \"6px\",\r\n    textAlign: \"center\",\r\n    margin: \"0 auto\",\r\n    backgroundColor: props.color,\r\n  };\r\n  return (\r\n    <Row>\r\n      <Col span={24} style={{ textAlign: \"center\" }}>\r\n        <div style={style}></div>\r\n      </Col>\r\n      <Col\r\n        className=\"customization-header-text\"\r\n        span={24}\r\n        style={{ marginTop: \"13px\", fontSize: \"12px\", textTransform: \"uppercase\" }}\r\n      >\r\n          {props.type} COLOR\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useState, useEffect } from \"react\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nimport MobileColorChange from \"./MobileColorChange\";\r\nimport MobileColorRectangle from \"./MobileColorRectangle\";\r\nimport { OmitProps } from \"antd/lib/transfer/ListBody\";\r\n\r\nimport commands from \"../../../../services/commands\";\r\n\r\nexport default function MobileFooterColors(props) {\r\n  const customization = useSelector((state) => state.customization);\r\n  const [isPrimary, setPrimary] = useState(null);\r\n  const [isSecondary, setSecondary] = useState(null);\r\n  const [isRing, setRing] = useState(null);\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n  const [ringColor, setRingColor] = useState(props.ringColor);\r\n  const [primaryColor, setPrimaryColor] = useState(props.primaryColor);\r\n  const [secondaryColor, setSecondaryColor] = useState(props.secondaryColor);\r\n  useEffect(() => {\r\n    // setRingColor(props.ringColor);\r\n    // setPrimaryColor(props.primaryColor);\r\n    // setSecondaryColor(props.secondaryColor);\r\n  });\r\n\r\n  function handleRingClick() {\r\n    setRing(true);\r\n    setPrimary(false);\r\n    setSecondary(false);\r\n  }\r\n  function handlePrimaryClick() {\r\n    setPrimary(true);\r\n    setSecondary(false);\r\n    setRing(false);\r\n  }\r\n  function handleSecondaryClick() {\r\n    setSecondary(true);\r\n    setRing(false);\r\n    setPrimary(false);\r\n  }\r\n  function cancelColorChange() {\r\n    setSecondary(false);\r\n    setRing(false);\r\n    setPrimary(false);\r\n    props.hide();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!isPrimary && !isSecondary && !isRing ? (\r\n        <Row justify=\"center\">\r\n          <Col span={16} style={{ marginBottom: \"13px\" }}>\r\n            <Row>\r\n              <Col span={24}>\r\n                <Row justify=\"space-between\">\r\n                  <Col span={6}>\r\n                    <Row>\r\n                      <div onClick={handleRingClick}>\r\n                        <MobileColorRectangle\r\n                          type=\"ring\"\r\n                          color={customization.ringColor}\r\n                        ></MobileColorRectangle>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                  <Col span={6}>\r\n                    <Row>\r\n                      <div onClick={handlePrimaryClick}>\r\n                        <MobileColorRectangle\r\n                          type=\"primary\"\r\n                          color={customization.primaryColor}\r\n                        ></MobileColorRectangle>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                  <Col span={6}>\r\n                    <Row>\r\n                      <div onClick={handleSecondaryClick}>\r\n                        <MobileColorRectangle\r\n                          type=\"secondary\"\r\n                          color={customization.secondaryColor}\r\n                        ></MobileColorRectangle>\r\n                      </div>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      ) : null}\r\n      {isRing ? (\r\n        <MobileColorChange\r\n          pickerColor={props.pickerColor}\r\n          color={props.ringColor}\r\n          setColor={props.setRing}\r\n          setColorInFooter={setRingColor}\r\n          type=\"ring\"\r\n          gen={props.gen}\r\n          hide={props.hide}\r\n          cancel={cancelColorChange}\r\n          socket={commands.addonsColors.ring}\r\n        ></MobileColorChange>\r\n      ) : null}\r\n      {isSecondary ? (\r\n        <MobileColorChange\r\n          pickerColor={props.pickerColor}\r\n          color={props.secondaryColor}\r\n          setColor={props.setSecondary}\r\n          setColorInFooter={setSecondaryColor}\r\n          type=\"secondary\"\r\n          gen={props.gen}\r\n          hide={props.hide}\r\n          cancel={cancelColorChange}\r\n          socket={commands.addonsColors.secondary}\r\n        ></MobileColorChange>\r\n      ) : null}\r\n      {isPrimary ? (\r\n        <MobileColorChange\r\n          pickerColor={props.pickerColor}\r\n          color={props.primaryColor}\r\n          setColor={props.setPrimary}\r\n          setColorInFooter={setPrimaryColor}\r\n          type=\"primary\"\r\n          gen={props.gen}\r\n          hide={props.hide}\r\n          cancel={cancelColorChange}\r\n          socket={commands.addonsColors.primary}\r\n        ></MobileColorChange>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/face.5c23257d.svg\";","export default __webpack_public_path__ + \"static/media/face_btn-selected.45b14933.svg\";","export default __webpack_public_path__ + \"static/media/backpack_btn-selected.9f77ace9.svg\";","export default __webpack_public_path__ + \"static/media/lefthand_btn.1293896a.svg\";","export default __webpack_public_path__ + \"static/media/lefthand_btn (Selected State).b0e502f1.svg\";","export default __webpack_public_path__ + \"static/media/righthand_btn.b1f3cae4.svg\";","export default __webpack_public_path__ + \"static/media/righthand_btn (Selected).85463409.svg\";","export default __webpack_public_path__ + \"static/media/companion_btn-selected.dfa7e2ee.svg\";","export default __webpack_public_path__ + \"static/media/companion_btn.b88d0e69.svg\";","export default __webpack_public_path__ + \"static/media/colorpicker_btn.15595985.svg\";","export default __webpack_public_path__ + \"static/media/colorpicker_btn-selected.819ca71d.svg\";","import { React, useEffect, useState } from \"react\";\r\nimport sliderArrowLeft from \"../../../../assets/images/slider_arrow_left.svg\";\r\nimport sliderArrowRight from \"../../../../assets/images/slider_arrow_right.svg\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport { useSelector } from \"react-redux\";\r\nimport commands from \"../../../../services/commands\";\r\nimport ue4appInstance from \"../../../../ue4appInstanse\";\r\n\r\nexport default function MobileCustomizationSlider(props) {\r\n  const customizationStore = useSelector((state) => state.customization);\r\n  const items = customizationStore.items.filter(\r\n    (item) => item.type === props.socket\r\n  );\r\n\r\n  const [currIndex, setCurrIndex] = useState(0);\r\n\r\n  function slideToLeft() {\r\n    if (currIndex > 0) {\r\n      setCurrIndex(currIndex - 1);\r\n    }\r\n  }\r\n  function slideToRight() {\r\n    if (currIndex < items.length - maxRendered) {\r\n      setCurrIndex(currIndex + 1);\r\n    }\r\n  }\r\n\r\n  function pressAddonItem(addonId) {\r\n    const setAddonCommand = commands.createSetAddonCommand(\r\n      props.socket,\r\n      addonId\r\n    );\r\n\r\n    ue4appInstance.getInstance().emitUICommand(setAddonCommand);\r\n  }\r\n  useEffect(() => {\r\n    console.log(items);\r\n  }, [items]);\r\n\r\n  const maxRendered = Math.floor(window.innerWidth / 72) - 2;\r\n  return (\r\n    <Row>\r\n      <Col span={24} style={{ marginBottom: \"18px\" }}>\r\n        <Row justify=\"center\">\r\n          <Col span={24}>\r\n            <div\r\n              className=\"customization-header-text\"\r\n              style={{\r\n                fontSize: \"18px\",\r\n                color: \"white\",\r\n                fontFamily: \"Niveau Grotesk Bold\",\r\n                textAlign: \"center\",\r\n                textTransform: \"uppercase\",\r\n              }}\r\n            >\r\n              {props.type === \"left\" || props.type === \"right\"\r\n                ? props.type + \" hand\"\r\n                : props.type}\r\n            </div>\r\n          </Col>\r\n          <Col span={24} style={{ marginTop: \"12px\" }}>\r\n            <div\r\n              className=\"slider\"\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                textAlign: \"center\",\r\n                pointerEvents: \"auto\",\r\n              }}\r\n            >\r\n              <div\r\n                className=\"slider-item-mobile\"\r\n                style={{ background: \"transparent\", border: \"none\" }}\r\n              >\r\n                <div style={{ postion: \"fixed\" }} onClick={slideToLeft}>\r\n                  <ReactSVG src={sliderArrowLeft}></ReactSVG>\r\n                </div>\r\n              </div>\r\n              <div\r\n                className=\"slider-item-mobile slider-item-none\"\r\n                style={{ marginLeft: \"24px\" }}\r\n                onClick={() => {\r\n                  pressAddonItem(\"none\");\r\n                }}\r\n              ></div>\r\n              {items.map((elem, index) => {\r\n                console.log(maxRendered);\r\n                if (\r\n                  index >= currIndex &&\r\n                  index <= currIndex + maxRendered - 1\r\n                ) {\r\n                  console.log(currIndex);\r\n                  return (\r\n                    <div\r\n                      className=\"slider-item-mobile\"\r\n                      style={{ marginLeft: \"12px\", color: \"white\" }}\r\n                      onClick={() => {\r\n                        pressAddonItem(elem.addonId);\r\n                      }}\r\n                    >\r\n                      <img\r\n                        style={{ width: \"100%\", height: \"100%\" }}\r\n                        src={elem.imagePath}\r\n                      ></img>\r\n                    </div>\r\n                  );\r\n                }\r\n              })}\r\n              <div\r\n                className=\"slider-item-mobile\"\r\n                style={{\r\n                  background: \"transparent\",\r\n                  border: \"none\",\r\n                  marginLeft: \"12px\",\r\n                }}\r\n              >\r\n                <div style={{ postion: \"fixed\" }} onClick={slideToRight}>\r\n                  <ReactSVG src={sliderArrowRight}></ReactSVG>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { auto } from \"async\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport React, { Component, useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nfunction MobileCustomizationButton(props) {\r\n  const image = props.img;\r\n  const imageDisable = props.imgDisabled;\r\n\r\n  const circle = {\r\n    height: \"44px\",\r\n    width: \"42px\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"circle\" style={circle}>\r\n      <ReactSVG\r\n        id=\"bigSvg\"\r\n        src={props.isToogled ? imageDisable : image}\r\n        afterInjection={(error, svg) => {\r\n          if (error) {\r\n            console.error(error);\r\n            return;\r\n          }\r\n\r\n          if (props.style?.borderRadius !== undefined) {\r\n            svg.style.borderRadius = props.style.borderRadius;\r\n          }\r\n        }}\r\n      ></ReactSVG>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MobileCustomizationButton;\r\n","import { React, useState, useRef } from \"react\";\r\n\r\nimport commands from \"../../../../services/commands\";\r\nimport ue4appInstance from \"../../../../ue4appInstanse\";\r\n\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nexport default function MobileName(props) {\r\n  const inputName = useRef(null);\r\n  const inputCompanion = useRef(null);\r\n  const [inputNameState, setInputNameState] = useState(false);\r\n  const [inputCompanionState, setInputCompanionState] = useState(false);\r\n  function handleChangeCompanionNameClick() {\r\n    setInputCompanionState(true);\r\n    inputCompanion.current.focus();\r\n  }\r\n\r\n  function handleChangeNameClick() {\r\n    setInputNameState(true);\r\n    inputName.current.focus();\r\n  }\r\n\r\n  function setUserName(value) {\r\n    var command = commands.createSetNameCommand(value);\r\n    ue4appInstance.getInstance().emitUICommand(command);\r\n  }\r\n\r\n  function setCompanionName(value) {\r\n    var command = commands.createSetCompanionNameCommand(value);\r\n    ue4appInstance.getInstance().emitUICommand(command);\r\n  }\r\n\r\n  return (\r\n    <Row justify=\"center\">\r\n      <Col span={16} style={{ marginBottom: \"4vh\" }}>\r\n        <Row justify=\"space-between\">\r\n          <Col span={11}>\r\n            <div style={{ position: \"relative\" }}>\r\n              <div\r\n                style={{\r\n                  paddingTop: \"2px\",\r\n                  border: \"2px solid #232323\",\r\n                  borderRadius: \"6px\",\r\n                  color: \"#232323\",\r\n                  fontSize: \"10px\",\r\n                  display: \"inline-block\",\r\n                  background: \"#FFFFFF\",\r\n                  height: \"53px\",\r\n                  opacity: \"0.7\",\r\n                  textAlign: \"center\",\r\n                  fontFamily: \"Niveau Grotesk\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={\r\n                    inputCompanionState ? { textDecoration: \"underline\" } : null\r\n                  }\r\n                  onClick={handleChangeCompanionNameClick}\r\n                >\r\n                  Tap to edit companion name.\r\n                </span>\r\n              </div>\r\n              <input\r\n                ref={inputCompanion}\r\n                disabled={!inputCompanionState}\r\n                onChange={(event) => {\r\n                  setUserName(event.target.value);\r\n                }}\r\n                style={{\r\n                  border: \"2px solid #232323\",\r\n                  borderRadius: \"6px\",\r\n                  display: \"inline-block\",\r\n                  background: \"#232323\",\r\n                  color: \"white\",\r\n                  fontSize: \"12px\",\r\n                  textAlign: \"center\",\r\n                  fontFamily: \"Niveau Grotesk Bold\",\r\n                  width: \"100%\",\r\n                  position: \"absolute\",\r\n                  top: \"25px\",\r\n                  left: \"0\",\r\n                  padding: \"2.5% 0\",\r\n                }}\r\n              ></input>\r\n            </div>\r\n          </Col>\r\n          <Col span={11}>\r\n            <div style={{ position: \"relative\" }}>\r\n              <div\r\n                style={{\r\n                  paddingTop: \"2px\",\r\n                  border: \"2px solid #232323\",\r\n                  borderRadius: \"6px\",\r\n                  color: \"#232323\",\r\n                  fontSize: \"10px\",\r\n                  display: \"inline-block\",\r\n                  background: \"#FFFFFF\",\r\n                  height: \"53px\",\r\n                  opacity: \"0.7\",\r\n                  textAlign: \"center\",\r\n                  fontFamily: \"Niveau Grotesk\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={\r\n                    inputNameState ? { textDecoration: \"underline\" } : null\r\n                  }\r\n                  onClick={handleChangeNameClick}\r\n                >\r\n                  Tap to edit name.\r\n                </span>\r\n              </div>\r\n              <input\r\n                ref={inputName}\r\n                disabled={!inputNameState}\r\n                onChange={(event) => {\r\n                  setCompanionName(event.target.value);\r\n                }}\r\n                style={{\r\n                  border: \"2px solid #232323\",\r\n                  borderRadius: \"6px\",\r\n                  display: \"inline-block\",\r\n                  background: \"#232323\",\r\n                  color: \"white\",\r\n                  fontSize: \"12px\",\r\n                  textAlign: \"center\",\r\n                  fontFamily: \"Niveau Grotesk Bold\",\r\n                  width: \"100%\",\r\n                  position: \"absolute\",\r\n                  top: \"25px\",\r\n                  left: \"0\",\r\n                  padding: \"2.5% 0\",\r\n                }}\r\n              ></input>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React, useEffect, useState } from \"react\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\nimport accountHttpService from \"../../../services/account\";\r\nimport CircleButton from \"../../../components/shared/CircleButton/CircleButton\";\r\nimport ExitButton from \"../../../components/shared/ExitButton/ExitButton\";\r\nimport MobileFooterColors from \"../Mobile/Color/MobileFooterColors\";\r\n\r\nimport back from \"../../../assets/images/backpack_btn.svg\";\r\nimport close from \"../../../assets/images/close_btn_customization.svg\";\r\nimport face from \"../../../assets/images/face.svg\";\r\nimport faceSelected from \"../../../assets/images/face_btn-selected.svg\";\r\nimport backpack from \"../../../assets/images/backpack_btn.svg\";\r\nimport backpackSelected from \"../../../assets/images/backpack_btn-selected.svg\";\r\nimport leftHand from \"../../../assets/images/lefthand_btn.svg\";\r\nimport leftHandSelected from \"../../../assets/images/lefthand_btn (Selected State).svg\";\r\nimport rightHand from \"../../../assets/images/righthand_btn.svg\";\r\nimport rightHandSelected from \"../../../assets/images/righthand_btn (Selected).svg\";\r\nimport companionSelected from \"../../../assets/images/companion_btn-selected.svg\";\r\nimport companion from \"../../../assets/images/companion_btn.svg\";\r\nimport colorPicker from \"../../../assets/images/colorpicker_btn.svg\";\r\nimport colorPickerSelected from \"../../../assets/images/colorpicker_btn-selected.svg\";\r\nimport MobileCustomizationSlider from \"./Slider/MobileCustomizationSlider\";\r\nimport MobileCustomizationButton from \"./MobileCustomizationButton\";\r\n\r\nimport {\r\n  setRingColor as setReduxRingColor,\r\n  setPrimaryColor as setReduxPrimaryColor,\r\n  setSecondaryColor as setReduxSecondaryColor,\r\n} from \"../../../redux/customizationSlice\";\r\n\r\nimport MobileName from \"./Name/MobileName\";\r\nimport { OmitProps } from \"antd/lib/transfer/ListBody\";\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport commands from \"../../../services/commands\";\r\nimport ue4appInstance from \"../../../ue4appInstanse\";\r\n\r\nconst { Header, Footer, Sider, Content } = Layout;\r\nexport default function MobileCustomization(props) {\r\n  const account = useSelector((state) => state.account);\r\n\r\n  const dispatch = useDispatch();\r\n  const customization = useSelector((state) => state.customization);\r\n  //default colors (before user's changes)\r\n  const [defaultRingColor, setDefaultRingColor] = useState(null);\r\n  const [defaultPrimaryColor, setDefaultPrimaryColor] = useState(null);\r\n  const [defaultSecondaryColor, setDefaultSecondaryColor] = useState(null);\r\n\r\n  const [color, setColor] = useState(\"#aabbcc\");\r\n  const [colorToRectangles, setColorToRectangles] = useState(null);\r\n  const history = useHistory();\r\n  const [sliderType, setSliderType] = useState(\"face\");\r\n  const [colorsSelect, setColorsSelect] = useState(null);\r\n  const [colorPickerState, setColorPickerState] = useState(false);\r\n  const [isPrimary, setPrimary] = useState(null);\r\n  const [primaryColor, setPrimaryColor] = useState(\"red\");\r\n  const [isSecondary, setSecondary] = useState(null);\r\n  const [secondaryColor, setSecondaryColor] = useState(\"yellow\");\r\n  const [isRing, setRing] = useState(null);\r\n  const [ringColor, setRingColor] = useState(\"green\");\r\n  const [nameChange, setNameChange] = useState(false);\r\n  const [colorPickerType, setColorPickerType] = useState();\r\n  const [verticalAlign, setVerticalAlign] = useState(false);\r\n  const [style, setStyle] = useState({ zIndex: \"1000\" });\r\n  const screens = useBreakpoint();\r\n  useEffect(() => {\r\n    console.log(screens);\r\n    if (screens.xs) {\r\n      setVerticalAlign(true);\r\n    }\r\n    if (screens.sm) {\r\n      setVerticalAlign(false);\r\n    }\r\n  }, [screens]);\r\n\r\n  function handleLeftHandClick() {\r\n    setSliderType(\"left\");\r\n    setColorsSelect(false);\r\n    setColorPickerState(false);\r\n    setNameChange(false);\r\n  }\r\n  function handleRightHandClick() {\r\n    setSliderType(\"right\");\r\n    setColorsSelect(false);\r\n    setNameChange(false);\r\n  }\r\n  function handleColorSelectClick() {\r\n    setSliderType(null);\r\n    setColorsSelect(true);\r\n    setNameChange(false);\r\n  }\r\n\r\n  function getColorChange(type) {\r\n    if (type === \"ring\") {\r\n      setRing(true);\r\n      setPrimary(false);\r\n      setSecondary(false);\r\n    }\r\n    if (type === \"primary\") {\r\n      setPrimary(true);\r\n      setSecondary(false);\r\n      setRing(false);\r\n    }\r\n    if (type === \"secondary\") {\r\n      setSecondary(true);\r\n      setPrimary(false);\r\n      setRing(false);\r\n    }\r\n  }\r\n\r\n  function generateColorPicker(type, color) {\r\n    setColorPickerType(type);\r\n    setColorPickerState(true);\r\n    setColor(color);\r\n  }\r\n  function hideColorPicker() {\r\n    setColorPickerState(false);\r\n  }\r\n\r\n  function handleNameClick() {\r\n    setNameChange(true);\r\n    setSliderType(null);\r\n    setColorsSelect(null);\r\n  }\r\n\r\n  function handleFaceClick() {\r\n    setSliderType(\"face\");\r\n    setNameChange(false);\r\n    setColorsSelect(false);\r\n  }\r\n\r\n  function handleCompanionClick() {\r\n    setSliderType(\"companion\");\r\n    setNameChange(false);\r\n    setColorsSelect(false);\r\n  }\r\n\r\n  function handleBackClick() {\r\n    setSliderType(\"back\");\r\n    setNameChange(false);\r\n    setColorsSelect(false);\r\n  }\r\n\r\n  function handleColorChange(someColor) {\r\n    setColor(someColor);\r\n    if (colorPickerType === \"ring\") {\r\n      dispatch(setReduxRingColor(someColor));\r\n      setRingColor(someColor);\r\n    }\r\n    if (colorPickerType === \"primary\") {\r\n      dispatch(setReduxPrimaryColor(someColor));\r\n      setPrimaryColor(someColor);\r\n    }\r\n    if (colorPickerType === \"secondary\") {\r\n      dispatch(setReduxSecondaryColor(someColor));\r\n      setSecondaryColor(someColor);\r\n    }\r\n  }\r\n  function exitCustomization() {\r\n    const command = commands.createConnectToGameServerCommand();\r\n    ue4appInstance.getInstance().emitUICommand(command);\r\n\r\n    history.push(\"/app/index\");\r\n  }\r\n  function cancelCustomization() {\r\n    dispatch(setReduxRingColor(defaultRingColor));\r\n    dispatch(setReduxPrimaryColor(defaultPrimaryColor));\r\n    dispatch(setReduxSecondaryColor(defaultSecondaryColor));\r\n    history.push(\"/app/index\");\r\n  }\r\n  useEffect(() => {\r\n    setColorToRectangles(color);\r\n  }, [color]);\r\n\r\n  useEffect(() => {\r\n    setDefaultRingColor(customization.ringColor);\r\n    setDefaultPrimaryColor(customization.primaryColor);\r\n    setDefaultSecondaryColor(customization.secondaryColor);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    \r\n  })\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        padding: 0,\r\n        backgroundColor: \"rgba(0,0,0,0)\",\r\n        pointerEvents: \"auto\",\r\n      }}\r\n      id=\"mobile-fix\"\r\n    >\r\n      <Header style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n        <Row>\r\n          <Col span={24} style={{ marginTop: \"16px\" }}>\r\n            <Row\r\n              justify=\"center\"\r\n              align=\"middle\"\r\n              style={{ position: \"relative\" }}\r\n            >\r\n              <Col style={{ margin: \"0 4px\" }}>\r\n                <div onClick={handleFaceClick}>\r\n                  <MobileCustomizationButton\r\n                    isToogled={sliderType === \"face\"}\r\n                    img={face}\r\n                    imgDisabled={faceSelected}\r\n                  ></MobileCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 4px\" }}>\r\n                <div onClick={handleBackClick}>\r\n                  <MobileCustomizationButton\r\n                    isToogled={sliderType === \"back\"}\r\n                    img={backpack}\r\n                    imgDisabled={backpackSelected}\r\n                  ></MobileCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 4px\" }}>\r\n                <div onClick={handleLeftHandClick}>\r\n                  <MobileCustomizationButton\r\n                    isToogled={sliderType === \"left\"}\r\n                    img={leftHand}\r\n                    imgDisabled={leftHandSelected}\r\n                  ></MobileCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 4px\" }}>\r\n                <div onClick={handleRightHandClick}>\r\n                  <MobileCustomizationButton\r\n                    isToogled={sliderType === \"right\"}\r\n                    img={rightHand}\r\n                    imgDisabled={rightHandSelected}\r\n                  ></MobileCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 4px\" }}>\r\n                <div onClick={handleCompanionClick}>\r\n                  <MobileCustomizationButton\r\n                    isToogled={sliderType === \"companion\"}\r\n                    img={companion}\r\n                    imgDisabled={companionSelected}\r\n                  ></MobileCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col style={{ margin: \"0 4px\" }}>\r\n                <div onClick={handleColorSelectClick}>\r\n                  <MobileCustomizationButton\r\n                    type=\"color\"\r\n                    isToogled={colorsSelect}\r\n                    img={colorPicker}\r\n                    imgDisabled={colorPickerSelected}\r\n                    style={{ borderRadius: \"26px\" }}\r\n                  ></MobileCustomizationButton>\r\n                </div>\r\n              </Col>\r\n              <Col lg={2} md={2} span={3} style={{ margin: \"0 4px\" }}>\r\n                <div\r\n                  className=\"text-button\"\r\n                  onClick={handleNameClick}\r\n                  style={{\r\n                    padding: \"5px\",\r\n                    lineHeight: \"2.8\",\r\n                    background: nameChange ? \"#451CFF\" : \"#232323\",\r\n                    boxShadow: \"none\",\r\n                    fontSize: \"12px\",\r\n                    width: \"80%\",\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  NAME\r\n                </div>\r\n              </Col>\r\n              <Col\r\n                style={\r\n                  verticalAlign\r\n                    ? {\r\n                        textAlign: \"end\",\r\n                        alignContent: \"center\",\r\n                        top: \"13px\",\r\n                      }\r\n                    : {\r\n                        position: \"absolute\",\r\n                        top: \"0\",\r\n                        right: \"16px\",\r\n                        textAlign: \"end\",\r\n                      }\r\n                }\r\n              >\r\n                <div onClick={exitCustomization}>\r\n                  <ReactSVG src={close}></ReactSVG>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Header>\r\n      <Content>\r\n        <Row justify=\"center\" align=\"middle\" style={{ height: \"100vh\" }}>\r\n          <Col\r\n            className=\"mobile-colorpicker\"\r\n            span={20}\r\n            style={{ marginBottom: \"70px\" }}\r\n          >\r\n            <Row>\r\n              {colorPickerState ? (\r\n                <Col className=\"center\" style={style}>\r\n                  <div\r\n                    className=\"center\"\r\n                    style={{\r\n                      margin: \"0 auto\",\r\n                      marginBottom: \"32px\",\r\n                    }}\r\n                  >\r\n                    <HexColorPicker\r\n                      color={color}\r\n                      onChange={handleColorChange}\r\n                    />\r\n                    ;\r\n                  </div>\r\n                </Col>\r\n              ) : null}\r\n            </Row>\r\n            <Row justify=\"end\">\r\n              <Col\r\n                xs={7}\r\n                span={5}\r\n                style={{ color: \"white\", marginBottom: \"25vh\" }}\r\n              >\r\n                <Row>\r\n                  <Col span={24}>\r\n                    <div\r\n                      onClick={exitCustomization}\r\n                      className=\"text-buttonFinish\"\r\n                      id=\"main-button\"\r\n                      style={{\r\n                        fontSize: \"21px\",\r\n                        backgroundColor: \"#232323\",\r\n                        width: \"90%\",\r\n                        padding: \"5px\",\r\n                      }}\r\n                    >\r\n                      FINISH\r\n                    </div>\r\n                  </Col>\r\n                  <Col span={24}>\r\n                    <div\r\n                      onClick={cancelCustomization}\r\n                      className=\"text-button\"\r\n                      id=\"main-button\"\r\n                      style={{\r\n                        fontSize: \"21px\",\r\n                        backgroundColor: \"#909090\",\r\n                        width: \"90%\",\r\n                        marginTop: \"12px\",\r\n                        padding: \"5px\",\r\n                      }}\r\n                    >\r\n                      CANCEL\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Content>\r\n      <Footer style={{ padding: 0, backgroundColor: \"rgba(0,0,0,0)\" }}>\r\n        <Row justify=\"center\">\r\n          <Col span={24}>\r\n            {/* SLIDER (HANDS OR FACE) CUSTOMIZATION */}\r\n\r\n            {sliderType === \"left\" ? (\r\n              <MobileCustomizationSlider\r\n                socket={commands.addonsSockets.leftHand}\r\n                type=\"left\"\r\n              ></MobileCustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"back\" ? (\r\n              <MobileCustomizationSlider\r\n                socket={commands.addonsSockets.back}\r\n                type=\"back\"\r\n              ></MobileCustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"right\" ? (\r\n              <MobileCustomizationSlider\r\n                socket={commands.addonsSockets.rightHand}\r\n                type=\"right\"\r\n              ></MobileCustomizationSlider>\r\n            ) : null}\r\n\r\n            {sliderType === \"face\" ? (\r\n              <MobileCustomizationSlider\r\n                socket={commands.addonsSockets.head}\r\n                type=\"face\"\r\n              ></MobileCustomizationSlider>\r\n            ) : null}\r\n            {sliderType === \"companion\" ? (\r\n              <MobileCustomizationSlider\r\n                socket={commands.addonsSockets.companion}\r\n                type=\"companion\"\r\n              ></MobileCustomizationSlider>\r\n            ) : null}\r\n            {/* COLORS CUSTOMIZATION */}\r\n\r\n            {colorsSelect ? (\r\n              <MobileFooterColors\r\n                pickerColor={colorToRectangles}\r\n                ringColor={ringColor}\r\n                setRing={setRingColor}\r\n                primaryColor={primaryColor}\r\n                setPrimary={setPrimaryColor}\r\n                secondaryColor={secondaryColor}\r\n                setSecondary={setSecondaryColor}\r\n                gen={generateColorPicker}\r\n                hide={hideColorPicker}\r\n                getColorChange={getColorChange}\r\n              ></MobileFooterColors>\r\n            ) : null}\r\n\r\n            {/* NAME CUSTOMIZATION */}\r\n            {nameChange ? <MobileName></MobileName> : null}\r\n          </Col>\r\n        </Row>\r\n      </Footer>\r\n    </Layout>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport arrowLeft from \"../../../../assets/images/arrow_left.svg\";\r\nimport close from \"../../../../assets/images/close_btn (Hover State).svg\";\r\n\r\nimport {\r\n  Switch,\r\n  Route,\r\n  useHistory,\r\n  useRouteMatch,\r\n  Link,\r\n} from \"react-router-dom\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\n\r\nexport default function MobileHeaderOfChat(props) {\r\n  const screens = useBreakpoint();\r\n  const NickName = {\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n    fontSize: \"19px\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const backToMessages = props.backToMessages;\r\n  let pathToFriends = \"/app/index/friends\";\r\n  let pathToMessages = \"/app/index/messages\";\r\n  console.log(backToMessages)\r\n  \r\n  return (\r\n    <Row>\r\n      <Col span={24} style={{ paddingLeft:15, paddingTop: 7, borderBottom: \"1px solid #393939\",paddingBottom:10 }}>\r\n        <Row>\r\n          <Col xs={2} sm={2} style={{ marginTop: 10 }} className=\"opacity\">\r\n            <Link to={backToMessages ? pathToMessages : pathToFriends}>\r\n              <div>\r\n                <ReactSVG src={arrowLeft}></ReactSVG>\r\n              </div>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={19} sm={20} style={{ marginTop: 7 }}>\r\n            <span style={NickName}>{props.userNickName}</span>\r\n          </Col>\r\n          <Col xs={1} sm={1} onClick={props.onExitChat} >\r\n            <div className=\"backgroundForSVG\">\r\n            <ReactSVG src={close}></ReactSVG>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Card, Row, Col } from \"antd\";\r\nimport MobileHeaderOfChat from \"./Mobile/MobileHeaderOfChat\";\r\nimport { useLocation, Redirect } from \"react-router-dom\";\r\nimport ChatMessages from \"./ChatMessages\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport send from \"../../../assets/images/send_btn.svg\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nexport default function MobileChat(props) {\r\n  const screens = useBreakpoint();\r\n  const onExitChat = props.onExitChat;\r\n  const location = useLocation();\r\n\r\n  const interlocutorId = location.state.id;\r\n  const userNickName = location.state.nick;\r\n  const fromMessages = location.state.fromMessages;\r\n\r\n  const [text, setText] = useState(\"\");\r\n  console.log(screens);\r\n  const [testMessages, setTestMessages] = useState([\r\n    {\r\n      text: \"This is a test message!\",\r\n      usernameFrom: \"userNotME\",\r\n      usernameMe: \"userMe\",\r\n    },\r\n    {\r\n      text: \"This is a test message!\",\r\n      usernameFrom: \"userMe\",\r\n      usernameMe: \"userMe\",\r\n    },\r\n  ]);\r\n  const notXs = {\r\n    marginTop: \"5px\",\r\n  };\r\n  function ChangeText(e) {\r\n    setText(e.target.value);\r\n  }\r\n  function ClickSend() {\r\n    console.debug(\"clicked send\");\r\n    if (text === \"\") {\r\n      return;\r\n    }\r\n\r\n    setTestMessages(\r\n      testMessages.concat({\r\n        text: text,\r\n        usernameMe: \"userMe\",\r\n        usernameFrom: \"userMe\",\r\n      })\r\n    );\r\n\r\n    setText(\"\");\r\n  }\r\n  const background = {\r\n    background: \"#404040\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    pointerEvents: \"auto\",\r\n  };\r\n  const Panel = {\r\n    background: \"#282828\",\r\n    width: \"98%\",\r\n    height: \"96vh\",\r\n    marginLeft: \"1%\",\r\n    marginTop: \"1%\",\r\n    borderRadius: \"15px\",\r\n    overflowY: \"hide\",\r\n  };\r\n  const input = {\r\n    borderRadius: \"20px \",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"16px\",\r\n    fontFamily: \"Montserrat\",\r\n    width: \"90%\",\r\n    height: \"80%\",\r\n    border: \"none\",\r\n    paddingLeft: \"10px\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"13px\",\r\n    marginBottom: 10,\r\n  };\r\n\r\n  return (\r\n    <Row style={background}>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col span={24}>\r\n            <Row style={Panel} id=\"mobile-fix-messages-panel\">\r\n              <Col span={24}>\r\n                <Row>\r\n                  <Col span={24}>\r\n                    <MobileHeaderOfChat\r\n                      userNickName={userNickName}\r\n                      backToMessages={fromMessages}\r\n                      onExitChat={onExitChat}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n              <Col span={24}>\r\n                <Row\r\n                  style={{\r\n                    overflowY: \"scroll\",\r\n                    height: !screens.xs ? \"63vh\" : \"60vh\",\r\n                    background: \"#191919\",\r\n                  }}\r\n                  id=\"mobile-fix-chat\"\r\n                >\r\n                  <Col span={24}>\r\n                    <ChatMessages testMessages={testMessages} />\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n              <Col span={24} className=\"input-col\" style={{ marginTop: \"1%\" }}>\r\n                <Row>\r\n                  <Col span={24}>\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <Row justify=\"center\">\r\n                          <Col xs={21} sm={21}>\r\n                            <input\r\n                              className={!screens.xs ? \"auth-input\" : \"xsinput\"}\r\n                              value={text}\r\n                              style={!screens.xs ? { width: \"100%\" } : input}\r\n                              placeholder=\"Type here...\"\r\n                              onChange={(e) => ChangeText(e)}\r\n                              id=\"chat-input\"\r\n                            ></input>\r\n                          </Col>\r\n                          <Col\r\n                            xs={3}\r\n                            sm={2}\r\n                            style={!screens.xs ? notXs : { marginTop: 7 }}\r\n                            className=\"opacity\"\r\n                            onClick={ClickSend}\r\n                          >\r\n                            <ReactSVG src={send}></ReactSVG>\r\n                          </Col>\r\n                        </Row>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\n\r\nimport Avatar from \"../componentsForTabs/Avatar\";\r\nimport Cancel from \"../componentsForTabs/Cancel\";\r\nimport ButtonText from \"../componentsForTabs/ButtonText\";\r\nexport default function MobileAccountTab() {\r\n  const screens = useBreakpoint();\r\n  console.log(screens)\r\n  const title = {\r\n    fontSize: \"20px\",\r\n    fontFamily: \"Open Sans\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const input = {\r\n    borderRadius: \"20px\",\r\n    background: \"#040206\",\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"16px\",\r\n    fontFamily: \"Montserrat\",\r\n    paddingLeft: \"10px\",\r\n    paddingTop: \"4px\",\r\n    paddingBottom: \"4px\",\r\n    width: \"90%\",\r\n    height: \"100%\",\r\n    marginTop: 10,\r\n    border: \"none\",\r\n  };\r\n  return (\r\n    <Row style={{height: \"100%\"}}>\r\n      <Col span={24}>\r\n        <Row>\r\n          <Col\r\n            xs={24}\r\n            sm={24}\r\n            style={{ marginTop: \"10px\", paddingLeft: \"5px\" }}\r\n          >\r\n            <span style={title}>Username</span>\r\n          </Col>\r\n          <Col xs={15} sm={19}>\r\n            <input style={input}></input>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col\r\n            xs={24}\r\n            sm={24}\r\n            style={{ marginTop: \"20px\", paddingLeft: \"5px\" }}\r\n          >\r\n            <span style={title}>Password</span>\r\n          </Col>\r\n          <Col xs={15} sm={19}>\r\n            <input style={input}></input>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: 30 }}>\r\n          <Col xs={6} sm={7}>\r\n            <Cancel height=\"120%\" />\r\n          </Col>\r\n          <Col xs={6} sm={7} style={{ marginLeft: 30 }}>\r\n            <ButtonText text=\"UPDATE\" height=\"120%\" />\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Row, Col, Card, Tabs, Radio, Space } from \"antd\";\r\n\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nimport FriendsWithoutBackground from \"../../../assets/images/FriendsWithoutBackround.svg\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport SettingHeaderPanel from \"./SettingHeaderPanel\";\r\nimport MobileAccountTab from \"./Tabs/MobileTabs/MobileAccountTab\";\r\nimport AudioTab from \"./Tabs/AudioTab\";\r\nimport VideoTab from \"./Tabs/VideoTab\";\r\nimport BillingTab from \"./Tabs/BillingTab\";\r\nimport ConnectionTab from \"./Tabs/ConnectionTab\";\r\nimport PrivacyTab from \"./Tabs/PrivacyTab\";\r\nimport { setSettingsTabDefault } from \"../../../redux/accountSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nexport default function MobileSettingsPanel() {\r\n  const account = useSelector((state) => state.account);\r\n  const tabDefault = account.settingsTabDefault;\r\n  const history = useHistory();\r\n  return (\r\n    <Row\r\n      align={\"center\"}\r\n      justify={\"center\"}\r\n      style={{ height: \"100%\", pointerEvents: \"auto\" }}\r\n    >\r\n      <Col span={24}>\r\n        <Row\r\n          justify={\"center\"}\r\n          style={{ alignContent: \"center\", height: \"100%\" }}\r\n        >\r\n          <Col>\r\n            <Card\r\n              style={{\r\n                width: \"100vw\",\r\n                boxShadow: \"2px\",\r\n                border: 0,\r\n                backgroundColor: \"#282828\",\r\n                borderRadius: 10,\r\n                color: \"white\",\r\n              }}\r\n              \r\n            >\r\n              {/* Header */}\r\n              <SettingHeaderPanel\r\n                onExitSettings={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n              />\r\n              <Tabs\r\n                tabPosition={\"left\"}\r\n                style={{ height: \"89vh\" }}\r\n                defaultActiveKey={tabDefault}\r\n                id=\"mobile-fix-tabs-container\"\r\n              >\r\n                <TabPane tab=\"ACCOUNT\" key=\"1\">\r\n                  <div\r\n                    style={{\r\n                      width: \"70vw\",\r\n                      height: \"80vh\",\r\n                      overflowY: \"scroll\",\r\n                      overflowX: \"hidden\",\r\n                      \r\n                    }}\r\n                    id=\"mobile-fix-tab\"\r\n                  >\r\n                    <Row>\r\n                      <Col span={24} id=\"mobile-fix-tab\">\r\n                        <MobileAccountTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"AUDIO\" key=\"2\">\r\n                  <div\r\n                    style={{\r\n                      width: \"70vw\",\r\n                      height: \"80vh\",\r\n                      overflowY: \"scroll\",\r\n                      overflowX: \"hidden\",\r\n                    }}\r\n                    id=\"mobile-fix-tab\"\r\n                  >\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <AudioTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"VIDEO\" key=\"3\">\r\n                  <div\r\n                    style={{\r\n                      width: \"70vw\",\r\n                      height: \"80vh\",\r\n                      overflowY: \"scroll\",\r\n                      overflowX: \"hidden\",\r\n                    }}\r\n                    id=\"mobile-fix-tab\"\r\n                  >\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <VideoTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"BILLING\" key=\"4\">\r\n                  <div\r\n                    style={{\r\n                      width: \"70vw\",\r\n                      height: \"80vh\",\r\n                      overflowY: \"scroll\",\r\n                      overflowX: \"hidden\",\r\n                    }}\r\n                    id=\"mobile-fix-tab\"\r\n                  >\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <BillingTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"CONNECTIONS\" key=\"5\">\r\n                  <div\r\n                    style={{\r\n                      width: \"70vw\",\r\n                      height: \"80vh\",\r\n                      overflowY: \"scroll\",\r\n                      overflowX: \"hidden\",\r\n                    }}\r\n                    id=\"mobile-fix-tab\"\r\n                  >\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <ConnectionTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane tab=\"PRIVACY\" key=\"6\">\r\n                  <div\r\n                    style={{\r\n                      width: \"70vw\",\r\n                      height: \"80vh\",\r\n                      overflowY: \"scroll\",\r\n                      overflowX: \"hidden\",\r\n                    }}\r\n                    id=\"mobile-fix-tab\"\r\n                  >\r\n                    <Row>\r\n                      <Col span={24}>\r\n                        <PrivacyTab />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </TabPane>\r\n              </Tabs>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport MobilePage from \"../utils/Page/MobilePage\";\r\nimport MobileFriendsPanel from \"../shared/FriendsPanel/MobileFriendsPanel\";\r\nimport MobileMassages from \"../../views/MobileMessages/MobileMassages\";\r\n\r\nimport DesktopSettingPanel from \"../shared/SettingPanel/DesktopSettingPanel\";\r\nimport MobileCustomization from \"../../views/Customization/Mobile/MobileCustomization\";\r\nimport MobileChat from \"../shared/Chat/MobileChat\";\r\nimport MobileSettingsPanel from \"../shared/SettingPanel/MobileSettingPanel\";\r\nimport MobileGlobalChat from \"../shared/GlobalChat/mobile/MobileGlobalChat\";\r\n\r\nexport default function MobilePageLayout({\r\n  onFriendsClick,\r\n  onExitFriendsClick,\r\n  onMassagesClick,\r\n  onExitMassagesClick,\r\n  onCustomizationClick,\r\n  onExitCustomizationClick,\r\n  onExitChat,\r\n  backToMessages,\r\n}) {\r\n  return (\r\n    <div>\r\n      <MobilePage />\r\n      <Switch>\r\n        <Route exact path={`/app/index/friends`}>\r\n          <div\r\n            style={{ position: \"fixed\", top: 0, bottom: 0, left: 0, right: 0 }}\r\n          >\r\n            <MobileFriendsPanel\r\n              onExitFriendsClick={onExitFriendsClick}\r\n              onFriendsClick={onFriendsClick}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/index/settings`}>\r\n          <div\r\n            style={{ position: \"fixed\", top: 0, bottom: 0, left: 0, right: 0 }}\r\n          >\r\n            <MobileSettingsPanel />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/index/messages`}>\r\n          <div\r\n            style={{ position: \"fixed\", top: 0, bottom: 0, left: 0, right: 0 }}\r\n            \r\n          >\r\n            <MobileMassages\r\n              onMassagesClick={onMassagesClick}\r\n              onExitMassagesClick={onExitMassagesClick}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/customization`}>\r\n          <div\r\n            style={{ position: \"fixed\", top: 0, bottom: 0, left: 0, right: 0 }}\r\n          >\r\n            <MobileCustomization\r\n              onCustomizationClick={onCustomizationClick}\r\n              onExitCustomizationClick={onExitCustomizationClick}\r\n            ></MobileCustomization>\r\n          </div>\r\n        </Route>\r\n        <Route exact path={`/app/index/chat`}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n            }}\r\n          >\r\n            <MobileChat onExitChat={onExitChat} />\r\n          </div>\r\n        </Route>\r\n        {/* <Route exact path={`/app/index/global-chat`}>\r\n         \r\n          <div\r\n             style={{\r\n              position: \"fixed\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n            }}\r\n          >\r\n            <MobileGlobalChat\r\n              backToMessages={backToMessages}\r\n              onExitChat={onExitChat}\r\n            />\r\n          </div>\r\n        </Route> */}\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n","import useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport { React, useEffect, useState } from \"react\";\r\nimport { Switch, Route, useHistory, useRouteMatch } from \"react-router-dom\";\r\nimport MobilePage from \"../utils/Page/MobilePage\";\r\n\r\nimport DesktopPageLayout from \"./DesktopPageLayout\";\r\nimport MobilePageLayout from \"./MobilePageLayout\";\r\nimport loader from \"../../assets/images/spin-transparent.svg\";\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nexport default function AppUIContainer() {\r\n  const [scaleCount, setCount] = useState(0);\r\n  const [isDesktop, setIsDesktop] = useState(false);\r\n\r\n  const screens = useBreakpoint();\r\n  const history = useHistory();\r\n  let { path, url } = useRouteMatch();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(false);\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    console.debug(screens);\r\n\r\n    if (screens.md) {\r\n      setIsDesktop(true);\r\n    } else {\r\n      setIsDesktop(false);\r\n    }\r\n  }, [screens]);\r\n\r\n  return (\r\n    <div style={{ position: \"relative\" }} id=\"mobile-fix\">\r\n      {loading ? (\r\n        <div className=\"center\" style={{ zIndex: \"9999\" }}>\r\n          <ReactSVG src={loader}></ReactSVG>\r\n        </div>\r\n      ) : (\r\n        <Switch>\r\n          <Route path={`${path}`}>\r\n            {isDesktop ? (\r\n              <DesktopPageLayout\r\n                onFriendsClick={() => {\r\n                  history.push(\"/app/index/friends\");\r\n                }}\r\n                onExitFriendsClick={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                onMassagesClick={() => {\r\n                  history.push(\"/app/index/messages\");\r\n                }}\r\n                onExitMassagesClick={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                onCustomizationClick={() => {\r\n                  history.push(\"/app/customization\");\r\n                }}\r\n                onExitCustomizationClick={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                onExitChat={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                setLoading={setLoading}\r\n                backToMessages={() => {\r\n                  history.push(\"/app/index/messages\");\r\n                }}\r\n              ></DesktopPageLayout>\r\n            ) : (\r\n              <MobilePageLayout\r\n                onFriendsClick={() => {\r\n                  history.push(\"/app/index/friends\");\r\n                }}\r\n                onExitFriendsClick={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                onMassagesClick={() => {\r\n                  history.push(\"/app/index/messages\");\r\n                }}\r\n                onExitMassagesClick={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                onCustomizationClick={() => {\r\n                  history.push(\"/app/customization\");\r\n                }}\r\n                onExitCustomizationClick={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                onExitChat={() => {\r\n                  history.push(\"/app/index\");\r\n                }}\r\n                backToMessages={() => {\r\n                  history.push(\"/app/index/messages\");\r\n                }}\r\n              ></MobilePageLayout>\r\n            )}\r\n          </Route>\r\n        </Switch>\r\n      )}\r\n      ;\r\n    </div>\r\n  );\r\n}\r\n","import { React } from \"react\";\r\n\r\nimport { Route, Redirect } from \"react-router\";\r\n\r\nexport default function GuardedRoute({\r\n  component: Component,\r\n  auth,\r\n  redirect,\r\n  ...rest\r\n}) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        auth === true ? <Component {...props} /> : <Redirect to={redirect} />\r\n      }\r\n    />\r\n  );\r\n}\r\n","function getDevicePermission(params) {\r\n  return navigator.mediaDevices.getUserMedia(params);\r\n}\r\n\r\nfunction getAllDevices() {\r\n  return new Promise((resolve, reject) => {\r\n    let videoDevices = [];\r\n    let audioInputDevices = [];\r\n    let audioOutputDevices = [];\r\n\r\n    //Get devices\r\n    navigator.mediaDevices\r\n      .enumerateDevices()\r\n      .then(function (devices) {\r\n        devices.forEach(function (device) {\r\n          //fix redux serialize\r\n          let object = {\r\n            kind: device.kind,\r\n            label: device.label,\r\n            id: device.deviceId,\r\n          };\r\n\r\n          if (device.kind === \"audioinput\") {\r\n            audioInputDevices.push(object);\r\n          }\r\n\r\n          if (device.kind === \"videoinput\") {\r\n            videoDevices.push(object);\r\n          }\r\n\r\n          if (device.kind === \"audiooutput\") {\r\n            audioOutputDevices.push(object);\r\n          }\r\n        });\r\n\r\n        resolve({\r\n          videoDevices,\r\n          audioInputDevices,\r\n          audioOutputDevices,\r\n        });\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err.name + \": \" + err.message);\r\n\r\n        reject();\r\n      });\r\n  });\r\n}\r\n\r\nexport default { getDevicePermission, getAllDevices };\r\n","import { React, useEffect, useState } from \"react\";\r\nimport { Switch, Route, useHistory } from \"react-router-dom\";\r\n\r\nimport Homepage from \"../utils/Homepage/Homepage\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport AppUIContainer from \"./AppUIContainer\";\r\nimport DesktopCustomization from \"../../views/Customization/Desktop/DesktopCustomization\";\r\nimport MobileCustomization from \"../../views/Customization/Mobile/MobileCustomization\";\r\n\r\nimport GuardedRoute from \"../utils/GuardedRoute\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport devices from \"../../services/devices\";\r\nimport { ReactSVG } from \"react-svg\";\r\n\r\nexport default function UIContainer({\r\n  startVideoStreaming,\r\n  dataChannelInited,\r\n}) {\r\n  const screens = useBreakpoint();\r\n  const history = useHistory();\r\n\r\n  const [isDesktop, setIsDesktop] = useState(false);\r\n\r\n  const account = useSelector((state) => state.account);\r\n\r\n  useEffect(() => {\r\n    if (screens.xl) {\r\n      setIsDesktop(true);\r\n    } else {\r\n      setIsDesktop(false);\r\n    }\r\n  }, [screens]);\r\n\r\n  const baseStyle = {\r\n    position: \"fixed\",\r\n    top: 0,\r\n    right: 0,\r\n    left: 0,\r\n    bottom: 0,\r\n    zIndex: 50,\r\n    pointerEvents: \"none\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"ui-container\" style={baseStyle}>\r\n      <Switch>\r\n        {/* Splash */}\r\n        <GuardedRoute\r\n          exact\r\n          path={\"/app/splash\"}\r\n          component={() => (\r\n            <Homepage\r\n              loading={!dataChannelInited}\r\n              startVideoStreaming={startVideoStreaming}\r\n            ></Homepage>\r\n          )}\r\n          auth={account.token !== null}\r\n        />\r\n\r\n        {/* Index */}\r\n        <GuardedRoute\r\n          path={\"/app/index\"}\r\n          component={() => <AppUIContainer />}\r\n          auth={account.token !== null}\r\n        />\r\n\r\n        {/* Customization*/}\r\n        <GuardedRoute\r\n          exact\r\n          path={\"/app/customization\"}\r\n          component={() =>\r\n            isDesktop ? <DesktopCustomization /> : <MobileCustomization />\r\n          }\r\n          auth={account.token !== null}\r\n        />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\n{\r\n  /*{isPage ? (\r\n       \r\n      ) : null}\r\n      {isCustomization ? <Customization></Customization> : null}*/\r\n}\r\n","import { React, useEffect, useState } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nimport useDevices from \"../../hooks/useDevices\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport accountHttpService from \"../../services/account\";\r\nimport { setLogin as setReduxLogin, setToken } from \"../../redux/accountSlice\";\r\n\r\nconst { Option } = Select;\r\nexport default function InitialSetup() {\r\n  const title = {\r\n    color: \"#FFFFFF\",\r\n    fontSize: \"19px\",\r\n    fontFamily: \"Niveau Grotesk Bold\",\r\n  };\r\n  const text = {\r\n    color: \"#909090\",\r\n    fontSize: \"14px\",\r\n    fontFamily: \"Montserrat\",\r\n  };\r\n  const advice = {\r\n    color: \"#909090\",\r\n    fontSize: \"12px\",\r\n    fontFamily: \"Montserrat\",\r\n    textAlign: \"center\",\r\n  };\r\n  const select = {\r\n    width: \"80%\",\r\n    height: \"48px\",\r\n  };\r\n  const dropdown = {\r\n    borderRadius: \"20px\",\r\n    background: \"#7F7F7F\",\r\n    color: \"#FFFFFF\",\r\n  };\r\n  const { Option } = Select;\r\n\r\n  useDevices();\r\n\r\n  const app = useSelector((state) => state.app);\r\n  const localVideoDevices = app.videoDevices;\r\n  const localAudioDevices = app.audioDevices;\r\n\r\n  const history = useHistory();\r\n\r\n  const [localSelectedVideoDevice, setLocalSelectedVideoDevice] = useState(\r\n    app.selectedVideoDevice\r\n  );\r\n  const [localSelectedAudioDevice, setLocalSelectedAudioDevice] = useState(\r\n    app.selectedAudioDevice\r\n  );\r\n\r\n  function finishPressed() {\r\n    history.push(\"/app/splash\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLocalSelectedVideoDevice(app.selectedVideoDevice);\r\n    setLocalSelectedAudioDevice(app.selectedAudioDevice);\r\n  }, [app.selectedVideoDevice, app.selectedAudioDevice]);\r\n\r\n  return (\r\n    <Row justify={\"center\"}>\r\n      <Col span={24}>\r\n        <Row justify={\"center\"}>\r\n          <Col\r\n            span={24}\r\n            style={{\r\n              background: \"#282828\",\r\n              maxWidth: 390,\r\n              minWidth: 350,\r\n              borderRadius: \"15px\",\r\n            }}\r\n          >\r\n            <Row>\r\n              <Col span={24} style={{ textAlign: \"center\", marginTop: 30 }}>\r\n                <span style={title}>Initial Setup</span>\r\n              </Col>\r\n              <Col span={24} style={{ textAlign: \"center\", marginTop: 15 }}>\r\n                <span style={text}>Select audio/video devices below.</span>\r\n              </Col>\r\n            </Row>\r\n            <Row justify={\"center\"}>\r\n              <Col\r\n                span={24}\r\n                style={{ textAlign: \"center\", alignContent: \"center\" }}\r\n              >\r\n                <Row justify={\"center\"}>\r\n                  <Col span={24} style={{ marginTop: 10 }}>\r\n                    <Select\r\n                      style={select}\r\n                      suffixIcon=\"▼\"\r\n                      placeholder=\"SELECT MICROFONE\"\r\n                      dropdownStyle={dropdown}\r\n                      value={localSelectedAudioDevice}\r\n                      onChange={(value) => setLocalSelectedAudioDevice(value)}\r\n                    >\r\n                      {localAudioDevices.map((item) => (\r\n                        <Option key={item.id}>{item.label}</Option>\r\n                      ))}\r\n                    </Select>\r\n                  </Col>\r\n                  <Col\r\n                    span={24}\r\n                    style={{\r\n                      marginTop: 20,\r\n                      textAlign: \"center\",\r\n                      alignContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Select\r\n                      style={select}\r\n                      suffixIcon=\"▼\"\r\n                      placeholder=\"SELECT WEBCAM\"\r\n                      dropdownStyle={dropdown}\r\n                      value={localSelectedVideoDevice}\r\n                      onChange={(value) => setLocalSelectedVideoDevice(value)}\r\n                    >\r\n                      {localVideoDevices.map((item) => (\r\n                        <Option key={item.id}>{item.label}</Option>\r\n                      ))}\r\n                    </Select>\r\n                  </Col>\r\n                  <Col\r\n                    span={24}\r\n                    style={{\r\n                      marginTop: 20,\r\n                      textAlign: \"center\",\r\n                      alignContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Select\r\n                      style={select}\r\n                      suffixIcon=\"▼\"\r\n                      placeholder=\"SELECT AUDIO\"\r\n                      dropdownStyle={dropdown}\r\n                    ></Select>\r\n                  </Col>\r\n                  <Col\r\n                    span={24}\r\n                    style={{\r\n                      marginTop: 20,\r\n                      textAlign: \"center\",\r\n                      alignContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <button\r\n                      className=\"auth-button\"\r\n                      style={{\r\n                        marginBottom: \"40px\",\r\n                        width: \"80%\",\r\n                        height: \"48px\",\r\n                        fontSize:\"19px\"\r\n                      }}\r\n                      onClick={() => {\r\n                        finishPressed();\r\n                      }}\r\n                    >\r\n                      FINISH\r\n                    </button>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n            <Row justify={\"center\"}>\r\n              <Col\r\n                span={18}\r\n                style={{\r\n                  marginBottom: 30,\r\n                  marginTop: 10,\r\n                  textAlign: \"center\",\r\n                  alignContent: \"center\",\r\n                }}\r\n              >\r\n                <span style={advice} > \r\n                  Visit the settings menu to check or change audio/video\r\n                  settings at any time.\r\n                </span>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  setAudioDevices,\r\n  setVideoDevices,\r\n  setSelectedVideoDevice,\r\n  setSelectedAudioDevice,\r\n} from \"../redux/appSlice\";\r\n\r\nimport devices from \"../services/devices\";\r\n\r\nexport default function useDevices(props) {\r\n  const app = useSelector((state) => state.app);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    var params = {};\r\n\r\n    if (app.selectedVideoDevice) {\r\n      params[\"video\"] = {};\r\n      params.video[\"deviceId\"] = app.selectedVideoDevice;\r\n    } else {\r\n      params[\"video\"] = true;\r\n    }\r\n\r\n    if (app.selectedAudioDevice) {\r\n      params[\"audio\"] = {};\r\n      params.audio[\"deviceId\"] = app.selectedAudioDevice;\r\n    } else {\r\n      params[\"audio\"] = true;\r\n    }\r\n\r\n    devices\r\n      .getDevicePermission(params)\r\n      .then((value) => {\r\n        const selectedVideoSetting = value\r\n          .getTracks()\r\n          .find((item) => item.kind === \"video\")\r\n          .getSettings();\r\n\r\n        const selectedAudioSetting = value\r\n          .getTracks()\r\n          .find((item) => item.kind === \"audio\")\r\n          .getSettings();\r\n\r\n        dispatch(setSelectedVideoDevice(selectedVideoSetting.deviceId));\r\n        dispatch(setSelectedAudioDevice(selectedAudioSetting.deviceId));\r\n\r\n        devices\r\n          .getAllDevices()\r\n          .then((devices) => {\r\n            console.log(devices);\r\n            dispatch(setVideoDevices(devices.videoDevices));\r\n            dispatch(setAudioDevices(devices.audioInputDevices));\r\n          })\r\n          .catch((error) => console.error(error));\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, []);\r\n\r\n  return true;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  notification,\r\n  Tag,\r\n} from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport logo from \"../../assets/images/PassageLogo.svg\";\r\nimport { ReactSVG } from \"react-svg\";\r\nimport \"../../styles/style.css\";\r\n\r\nexport default function ResetPassword() {\r\n  const history = useHistory();\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n\r\n  function cancelPressed() {\r\n    history.goBack();\r\n  }\r\n  function inputChange(e) {\r\n    setInputValue(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <Row justify=\"center\" align=\"middle\">\r\n      <Col\r\n        span={24}\r\n        style={{ textAlign: \"center\", marginBottom: \"-120px\", zIndex: \"1000\" }}\r\n      >\r\n        <ReactSVG src={logo}></ReactSVG>\r\n      </Col>\r\n      <Col\r\n        xs={18}\r\n        sm={11}\r\n        md={8}\r\n        lg={8}\r\n        xl={5}\r\n        style={{\r\n          backgroundColor: \"#242424\",\r\n          textAlign: \"center\",\r\n          borderRadius: \"24px\",\r\n          pointerEvents: \"auto\",\r\n          paddingTop: \"105px\",\r\n          maxWidth: \"390px\",\r\n          minWidth: \"390px\",\r\n        }}\r\n      >\r\n        <Row justify=\"center\">\r\n          <Col\r\n            span={24}\r\n            className=\"login-col\"\r\n            style={{\r\n              color: \"white\",\r\n              textAlign: \"center\",\r\n              marginBottom: \"7px\",\r\n              fontWeight: \"normal\",\r\n              marginTop: \"15px\",\r\n            }}\r\n          >\r\n            RESET PASSWORD\r\n          </Col>\r\n          <Col span={22} style={{ marginBottom: \"8px\" }}>\r\n            <input\r\n              className=\"auth-input\"\r\n              placeholder=\"Your email adress\"\r\n              value={inputValue}\r\n              onChange={(e) => inputChange(e)}\r\n            ></input>\r\n          </Col>\r\n          <Col style={{ marginBottom: \"10px\" }} span={22}>\r\n            <button className=\"auth-button\">SEND </button>\r\n          </Col>\r\n          <Col span={22}>\r\n            <button\r\n              onClick={() => {\r\n                cancelPressed();\r\n              }}\r\n              className=\"auth-button\"\r\n              style={{\r\n                backgroundColor: \"#5b5b5b\",\r\n                boxShadow: \"0px 4px 0px #4f4f4f\",\r\n                marginBottom: 30,\r\n              }}\r\n            >\r\n              CANCEL\r\n            </button>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import \"./styles/index.css\";\r\n\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  Select,\r\n  Button,\r\n  Divider,\r\n  Modal,\r\n  Layout,\r\n  Grid,\r\n  Tag,\r\n} from \"antd\";\r\n\r\nimport \"./App.css\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport LogIn from \"./views/Log In/LogIn\";\r\n\r\nimport { Switch, Route, useLocation, useHistory } from \"react-router-dom\";\r\n\r\nimport Registration from \"./views/Registration/Registration\";\r\nimport UE4Engine from \"./components/layout/UE4Engine\";\r\nimport UIContainer from \"./components/layout/UIContainer\";\r\nimport InitialSetup from \"./views/InitialSetup/InitialSetup\";\r\nimport ResetPassword from \"./views/ResetPassword/ResetPassword\";\r\nimport GuardedRoute from \"./components/utils/GuardedRoute\";\r\n\r\nimport devices from \"./services/devices\";\r\nimport accountService from \"./services/account\";\r\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\r\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport useWhoami from \"./hooks/useWhoami\";\r\n\r\nimport ue4appInstance from \"./ue4appInstanse\";\r\nimport useAgora from \"./hooks/useAgora\";\r\nimport useNeonItems from \"./hooks/useNeonItems\";\r\n//import useFriendsChats from \"./hooks/useFriendsChats\";\r\nimport { setAgoraId } from \"./redux/accountSlice\";\r\n\r\nfunction App() {\r\n  let location = useLocation();\r\n  const history = useHistory();\r\n\r\n  function handleResize() {\r\n    let vh = window.innerHeight * 0.01;\r\n    document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\r\n  }\r\n\r\n  useWhoami();\r\n  useAgora();\r\n  useNeonItems();\r\n  //useFriendsChats();\r\n  const screens = useBreakpoint();\r\n  const [dataChannelInited, setDataChannelInited] = useState(false);\r\n  handleResize();\r\n  const account = useSelector((state) => state.account);\r\n\r\n  useEffect(() => {\r\n    console.debug(\"dataChannelInited:\", dataChannelInited);\r\n  }, [dataChannelInited]);\r\n  useEffect(() => {\r\n    if (!screens.md) window.addEventListener(\"resize\", handleResize);\r\n    return () => {\r\n      if (!screens.md) window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  });\r\n  return (\r\n    <div id=\"app\" className=\"App\">\r\n      <Switch location={location}>\r\n        {/* Registration */}\r\n        <Route path=\"/\" exact>\r\n          <Row\r\n            align=\"middle\"\r\n            justify=\"center\"\r\n            style={{ backgroundColor: \"#7d7d7d\", height: \"100vh\" }}\r\n          >\r\n            <Col style={{ backgroundColor: \"#7d7d7d\" }} span={24}>\r\n              <LogIn></LogIn>\r\n            </Col>\r\n          </Row>\r\n        </Route>\r\n\r\n        {/* App */}\r\n        <GuardedRoute path=\"/app\" auth={account.token !== null}>\r\n          <div>\r\n            <UE4Engine\r\n              init={() => {\r\n                if (!account.token) {\r\n                  return;\r\n                }\r\n                var ue4app = ue4appInstance.getInstance().getUe4app();\r\n\r\n                function localGetIntance() {\r\n                  accountService.getGiveMyServer().then((response) => {\r\n                    if (response.data.instanceAddress !== null) {\r\n                      ue4app.load(response.data.instanceAddress);\r\n                      return;\r\n                    }\r\n\r\n                    setTimeout(() => {\r\n                      localGetIntance();\r\n                    }, 2500);\r\n                  });\r\n                }\r\n\r\n                localGetIntance();\r\n              }}\r\n              onInited={() => {\r\n                console.debug(\"Set inited\");\r\n                setDataChannelInited(true);\r\n              }}\r\n            />\r\n\r\n            <UIContainer\r\n              dataChannelInited={dataChannelInited}\r\n              startVideoStreaming={() => {\r\n                var ue4app = ue4appInstance.getInstance().getUe4app();\r\n                ue4app.handleHomepageClick();\r\n                ue4appInstance.getInstance().initUE4Callback();\r\n              }}\r\n            />\r\n          </div>\r\n        </GuardedRoute>\r\n\r\n        <Route path=\"/registration\">\r\n          <Row\r\n            align=\"middle\"\r\n            justify=\"center\"\r\n            style={{ height: \"100vh\", backgroundColor: \"#7d7d7d\" }}\r\n          >\r\n            <Col>\r\n              <Registration></Registration>\r\n            </Col>\r\n          </Row>\r\n        </Route>\r\n        <Route path=\"/initial-setup\">\r\n          <Row\r\n            align=\"middle\"\r\n            justify=\"center\"\r\n            style={{ height: \"100vh\", backgroundColor: \"#7F7F7F\" }}\r\n          >\r\n            <Col span={5}>\r\n              <InitialSetup />\r\n            </Col>\r\n          </Row>\r\n        </Route>\r\n        <Route path=\"/reset-password\">\r\n          <Row\r\n            align=\"middle\"\r\n            justify=\"center\"\r\n            style={{ height: \"100vh\", backgroundColor: \"#7F7F7F\" }}\r\n          >\r\n            <Col span={5}>\r\n              <ResetPassword />\r\n            </Col>\r\n          </Row>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  setId,\r\n  clean,\r\n  setIsSuperUser,\r\n  setNeonName,\r\n} from \"../redux/accountSlice\";\r\n\r\nimport accountService from \"../services/account\";\r\n\r\nexport default function useWhoami(props) {\r\n  const account = useSelector((state) => state.account);\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!account.token) {\r\n      return;\r\n    }\r\n\r\n    accountService\r\n      .whoami(account.token)\r\n      .then((response) => {\r\n        console.debug(response);\r\n        if (response.status === 200) {\r\n          dispatch(setId(response.data._id));\r\n          dispatch(setIsSuperUser(response.data.isSuper));\r\n          dispatch(setNeonName(response.data.firstName));\r\n        }\r\n\r\n        if (response.status === 401) {\r\n          dispatch(clean());\r\n\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, [account.token]);\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport accountService from \"../services/account\";\r\nimport { setAgoraToken } from \"../redux/accountSlice\";\r\n\r\nexport default function useAgora(props) {\r\n  const account = useSelector((state) => state.account);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n   \r\n  }, [account.id]);\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  setId,\r\n  clean,\r\n  setIsSuperUser,\r\n  setNeonName,\r\n} from \"../redux/accountSlice\";\r\nimport { setCustomizationItems } from \"../redux/customizationSlice\";\r\n\r\nimport accountService from \"../services/account\";\r\n\r\nexport default function useNeonItems(props) {\r\n  const account = useSelector((state) => state.account);\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!account.token) {\r\n      return;\r\n    }\r\n\r\n    console.debug(\"GET ITEMS\")\r\n\r\n    accountService\r\n      .getNeonItems(account.token)\r\n      .then((response) => {\r\n        console.debug(response);\r\n        if (response.status === 200) {\r\n          let items = response.data;\r\n          let reducedItems = items.map((item) => {\r\n            return {\r\n              id: item._id,\r\n              name: item.name,\r\n              imagePath: item.path,\r\n              type: item.slot,\r\n              addonId: item.addonId,\r\n            };\r\n          });\r\n\r\n          dispatch(setCustomizationItems(reducedItems));\r\n        }\r\n\r\n        if (response.status === 401) {\r\n          dispatch(clean());\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, [account.token]);\r\n}\r\n","import {\r\n  combineReducers,\r\n  configureStore,\r\n  getDefaultMiddleware,\r\n} from \"@reduxjs/toolkit\";\r\n\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  createMigrate,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\n\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport autoMergeLevel2 from \"redux-persist/lib/stateReconciler/autoMergeLevel2\";\r\n\r\nimport appSlice from \"./redux/appSlice\";\r\nimport accountSlice from \"./redux/accountSlice\";\r\nimport customizationSlice from \"./redux/customizationSlice\";\r\nimport searchSlice from \"./redux/searchSlice\";\r\nimport reportSlice from \"./redux/reportSlice\";\r\n\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  version: 2,\r\n  storage,\r\n  stateReconciler: autoMergeLevel2,\r\n  blacklist: [\"app.isSplashed\", \"account.agoraId\"],\r\n};\r\n\r\nconst rootReducer = combineReducers({\r\n  app: appSlice,\r\n  account: accountSlice,\r\n  customization: customizationSlice,\r\n  search: searchSlice,\r\n  report: reportSlice,\r\n});\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport default configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport { persistStore } from \"redux-persist\";\r\n\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\n\r\nimport store from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nlet persistor = persistStore(store);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}